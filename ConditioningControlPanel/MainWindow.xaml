<Window x:Class="ConditioningControlPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        xmlns:helpers="clr-namespace:ConditioningControlPanel.Helpers"
        Title="Conditioning Control Panel"
        Height="943" Width="1385"
        MinHeight="620" MinWidth="978"
        Background="#1A1A2E"
        WindowStartupLocation="Manual"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResizeWithGrip"
        AllowDrop="True"
        Drop="Window_Drop"
        DragEnter="Window_DragEnter"
        DragLeave="Window_DragLeave"
        DragOver="Window_DragOver">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" 
                      ResizeBorderThickness="5"
                      GlassFrameThickness="0"
                      CornerRadius="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- Global converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
        <helpers:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibility"/>

        <!-- Custom Tooltip Style -->
        <Style TargetType="ToolTip">
            <Setter Property="Background" Value="{StaticResource DarkerBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Placement" Value="Mouse"/>
            <Setter Property="HasDropShadow" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToolTip">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="8" Opacity="0.5" ShadowDepth="2"/>
                            </Border.Effect>
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Style (for header navigation) -->
        <Style x:Key="TabButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="MinWidth" Value="130"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Active Style -->
        <Style x:Key="TabButtonActive" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="MinWidth" Value="130"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF8FAF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Small Pink Button Style (for tutorial guide buttons) -->
        <Style x:Key="SmallPinkButton" TargetType="Button">
            <Setter Property="Background" Value="#FF69B4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF8FAF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E0507A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Outline Button Style -->
        <Style x:Key="OutlineButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Shared template for expandable icon buttons -->
        <ControlTemplate x:Key="ExpandableIconTemplate" TargetType="Button">
            <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="6" Padding="8,6" MinWidth="42">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="IconText" Text="{TemplateBinding Content}"
                               FontSize="{TemplateBinding FontSize}" VerticalAlignment="Center"/>
                    <TextBlock x:Name="LabelText" Text="{TemplateBinding Tag}"
                               FontSize="12" FontWeight="Bold" VerticalAlignment="Center"
                               Margin="0" Visibility="Collapsed" Opacity="1"/>
                </StackPanel>
            </Border>
        </ControlTemplate>

        <!-- Base style with shared behavior (animated Width handled in code-behind) -->
        <Style x:Key="ExpandableIconButtonBase" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="MinWidth" Value="42"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Template" Value="{StaticResource ExpandableIconTemplate}"/>
            <EventSetter Event="MouseEnter" Handler="ExpandableIcon_MouseEnter"/>
            <EventSetter Event="MouseLeave" Handler="ExpandableIcon_MouseLeave"/>
        </Style>

        <!-- Default (pink-outline) variant -->
        <Style x:Key="ExpandableIconButton" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Active (pink filled) variant -->
        <Style x:Key="ExpandableIconButtonActive" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF8FAF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Patreon (purple) variant -->
        <Style x:Key="ExpandableIconButtonPatreon" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="#9B59B6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#E0B0FF"/>
            <Setter Property="FontSize" Value="18"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#8E44AD"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Window Control Button Style -->
        <Style x:Key="WindowControlButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentWhiteBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Window Close Button Style -->
        <Style x:Key="WindowCloseButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource DangerBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Session Action Button Style (small icon buttons for Edit/Export/Delete) -->
        <Style x:Key="SessionActionButton" TargetType="Button">
            <Setter Property="Width" Value="26"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="Background" Value="#353555"/>
            <Setter Property="Foreground" Value="#909090"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Session Delete Button Style (red hover) -->
        <Style x:Key="SessionDeleteButton" TargetType="Button" BasedOn="{StaticResource SessionActionButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#E81123"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Slider Style -->
        <Style x:Key="PinkSlider" TargetType="Slider">
            <Setter Property="Minimum" Value="0"/>
            <Setter Property="Maximum" Value="100"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border Height="4" Background="#404060" CornerRadius="2" VerticalAlignment="Center"/>
                            <Track x:Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="Slider.DecreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Height="4" Background="{StaticResource PinkBrush}" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="Slider.IncreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="Transparent"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate>
                                                <Ellipse Width="16" Height="16" Fill="White" Cursor="Hand"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Slider" BasedOn="{StaticResource PinkSlider}" />

        <!-- Simple, minimal girly ScrollBar + Utilities -->
        <!-- Invisible RepeatButton for ScrollBar -->
        <Style x:Key="InvisibleRepeatButton" TargetType="RepeatButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border Background="Transparent" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="IsTabStop" Value="False"/>
        </Style>

        <!-- Thumb for controlling ScrollBar -->
        <Style x:Key="SimpleCuteThumb" TargetType="Thumb">
            <Setter Property="MinWidth" Value="8"/>
            <Setter Property="MinHeight" Value="24"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border x:Name="Bd"
                                CornerRadius="6"
                                Background="{StaticResource PinkBrush}"
                                Opacity="0.9"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                SnapsToDevicePixels="True"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="0.6" ScaleY="1.0"/>
                            </Border.RenderTransform>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Opacity" Value="1"/>
                                <Setter TargetName="Bd" Property="Background" Value="{StaticResource DarkPinkBrush}"/>
                                <Setter TargetName="Bd" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.6" ScaleY="1.0"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsDragging" Value="True">
                                <Setter TargetName="Bd" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.65" ScaleY="1.0"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width" Value="10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Background="Transparent" SnapsToDevicePixels="True">
                            <Border x:Name="TrackBg"
                                    Background="#403949"
                                    CornerRadius="6"
                                    Opacity="0.4"
                                    Margin="1"/>
                            <Track x:Name="PART_Track"
                                   Orientation="{TemplateBinding Orientation}"
                                   IsDirectionReversed="true">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource InvisibleRepeatButton}" Command="ScrollBar.LineUpCommand"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource InvisibleRepeatButton}" Command="ScrollBar.LineDownCommand"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource SimpleCuteThumb}"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Orientation" Value="Horizontal">
                                <Setter Property="Height" Value="10"/>
                                <Setter TargetName="TrackBg" Property="CornerRadius" Value="6"/>
                            </Trigger>
                            <Trigger Property="Orientation" Value="Vertical">
                                <Setter Property="Width" Value="10"/>
                                <Setter TargetName="TrackBg" Property="CornerRadius" Value="6"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="TrackBg" Property="Opacity" Value="0.2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section Panel Style -->
        <Style x:Key="SectionPanel" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource PanelBgBrush}"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="9"/>
            <Setter Property="Margin" Value="0,0,0,9"/>
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="SettingLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Value Label Style -->
        <Style x:Key="ValueLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- Achievement Tile Style -->
        <Style x:Key="AchievementTile" TargetType="Border">
            <Setter Property="Background" Value="#1E1E3A"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="MinHeight" Value="100"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
        
        <!-- Feature Image Style -->
        <Style x:Key="FeatureImageBorder" TargetType="Border">
            <Setter Property="Width" Value="180"/>
            <Setter Property="Height" Value="180"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="Background" Value="{StaticResource DarkerBgBrush}"/>
            <Setter Property="Margin" Value="10,0,0,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Rounded Image Rectangle Style -->
        <Style x:Key="RoundedFeatureImage" TargetType="Rectangle">
            <Setter Property="Width" Value="180"/>
            <Setter Property="Height" Value="180"/>
            <Setter Property="RadiusX" Value="15"/>
            <Setter Property="RadiusY" Value="15"/>
            <Setter Property="Margin" Value="10,0,0,0"/>
        </Style>
    </Window.Resources>

    <!-- Viewbox scales all content proportionally with window size -->
    <Viewbox Stretch="Fill">
        <!-- Design canvas at reference size - wider to fit all header buttons -->
        <Grid Width="1405" Height="901">
            <Grid.RowDefinitions>
                <RowDefinition Height="36"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Border Grid.Row="0" Background="{StaticResource PinkBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Icon and Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,0,0">
                    <TextBlock Text="ðŸ’—" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtTitleBarVersion" Text="Conditioning Control Panel" Foreground="White" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Window Control Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="BtnMinimize" Content="â”€" Width="46" Height="36" 
                            Click="BtnMinimize_Click" Style="{StaticResource WindowControlButton}"/>
                    <Button x:Name="BtnMaximize" Content="â˜" Width="46" Height="36" 
                            Click="BtnMaximize_Click" Style="{StaticResource WindowControlButton}"/>
                    <Button x:Name="BtnClose" Content="âœ•" Width="46" Height="36" 
                            Click="BtnClose_Click" Style="{StaticResource WindowCloseButton}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Header Bar - Row 1 -->
        <Border Grid.Row="1" Background="{StaticResource PanelBgBrush}" Padding="15,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title + Player Title + App Name + Version -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="â­" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtPlayerTitle" Text="Basic Bimbo" Foreground="#FF69B4"
                               FontSize="18" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,12,0">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#FF69B4" BlurRadius="8" ShadowDepth="0" Opacity="0.6"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <Border Background="{StaticResource PinkBrush}" CornerRadius="12" Padding="10,4" Margin="0,0,20,0">
                        <TextBlock x:Name="TxtLevel" Text="Lvl 1" Foreground="White" FontWeight="Bold" FontSize="12"/>
                    </Border>
                    <TextBlock Text="ðŸ’—" FontSize="15" Margin="0,0,8,0"/>
                    <TextBlock Text="Conditioning Control Panel" Foreground="White" FontSize="18" FontWeight="Bold"/>
                    <TextBlock x:Name="TxtHeaderVersion" Text="" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Normal"
                               VerticalAlignment="Bottom" Margin="6,0,0,2"/>
                </StackPanel>

                <!-- Row 1 Tab Buttons: Settings, Presets, Progression -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button x:Name="BtnSettings" Tag="Settings" Style="{StaticResource TabButtonActive}"
                            Margin="6,0" Click="BtnSettings_Click" ToolTip="Settings">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock Text="Settings" FontSize="12"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnPresets" Tag="Presets" Style="{StaticResource TabButton}"
                            Margin="6,0" Click="BtnPresets_Click" ToolTip="Presets &amp; Sessions">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“‹" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock Text="Presets" FontSize="12"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnProgression" Tag="Progression" Style="{StaticResource TabButton}"
                            Margin="6,0" Click="BtnProgression_Click" ToolTip="Level &amp; Progression">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“Š" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock Text="Progression" FontSize="12"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Right side: Preset Dropdown + Latest Version -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <ComboBox x:Name="CmbPresets" Width="160" Margin="0,0,10,0"
                              SelectionChanged="CmbPresets_SelectionChanged"
                              ToolTip="Select a preset configuration">
                        <ComboBox.Style>
                            <Style TargetType="ComboBox">
                                <Setter Property="Background" Value="#1E1E3A"/>
                                <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Padding" Value="8,6"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ComboBox">
                                            <Grid>
                                                <ToggleButton x:Name="ToggleButton"
                                                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                              Focusable="False" ClickMode="Press">
                                                    <ToggleButton.Template>
                                                        <ControlTemplate TargetType="ToggleButton">
                                                            <Border Background="#1E1E3A" BorderBrush="{StaticResource PinkBrush}"
                                                                    BorderThickness="1" CornerRadius="4" Cursor="Hand">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="20"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <Path Grid.Column="1" Fill="#E0E0E0" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                          Data="M 0 0 L 4 4 L 8 0 Z"/>
                                                                </Grid>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </ToggleButton.Template>
                                                </ToggleButton>
                                                <ContentPresenter x:Name="ContentSite" IsHitTestVisible="False"
                                                                  Content="{TemplateBinding SelectionBoxItem}"
                                                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                                  Margin="8,6,25,6" VerticalAlignment="Center" HorizontalAlignment="Left">
                                                    <ContentPresenter.Resources>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                                        </Style>
                                                    </ContentPresenter.Resources>
                                                </ContentPresenter>
                                                <TextBlock x:Name="Watermark" Text="Preset" Foreground="#808090"
                                                           Margin="8,6,25,6" VerticalAlignment="Center" IsHitTestVisible="False"
                                                           Visibility="Collapsed"/>
                                                <Popup x:Name="PART_Popup" IsOpen="{TemplateBinding IsDropDownOpen}"
                                                       Placement="Bottom" AllowsTransparency="True" Focusable="False"
                                                       PopupAnimation="Slide">
                                                    <Border Background="#1E1E3A" BorderBrush="{StaticResource PinkBrush}"
                                                            BorderThickness="1" CornerRadius="4" Margin="0,2,0,0"
                                                            MinWidth="{TemplateBinding ActualWidth}">
                                                        <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                                            <ItemsPresenter/>
                                                        </ScrollViewer>
                                                    </Border>
                                                </Popup>
                                            </Grid>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="SelectedItem" Value="{x:Null}">
                                                    <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ComboBox.Style>
                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="ComboBoxItem">
                                <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                <Setter Property="Background" Value="#1E1E3A"/>
                                <Setter Property="Padding" Value="8,6"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ComboBoxItem">
                                            <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ComboBox.ItemContainerStyle>
                    </ComboBox>
                    <Button x:Name="BtnUpdateAvailable" Content="ðŸ’– v5.2.0 IS OUT! ðŸ’–"
                            Click="BtnUpdateAvailable_Click" ToolTip="v5.2.0 - UI improvements and bug fixes!"
                            FontSize="11" FontWeight="Bold" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#3D1A3D"/>
                                <Setter Property="Foreground" Value="#FF69B4"/>
                                <Setter Property="MinWidth" Value="130"/>
                                <Setter Property="Height" Value="32"/>
                                <Setter Property="Padding" Value="12,6"/>
                                <Setter Property="Tag" Value="NoUpdate"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="6" BorderThickness="1" BorderBrush="#3D3D60"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#2D2D50"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#5D5D80"/>
                                                </Trigger>
                                                <Trigger Property="Tag" Value="UpdateAvailable">
                                                    <Setter TargetName="border" Property="Background" Value="#FF1493"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#FF69B4"/>
                                                    <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontSize" Value="13"/>
                                                </Trigger>
                                                <!-- Server-controlled urgent update - bright red -->
                                                <Trigger Property="Tag" Value="UrgentUpdate">
                                                    <Setter TargetName="border" Property="Background" Value="#DC143C"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#FF4444"/>
                                                    <Setter TargetName="border" Property="BorderThickness" Value="3"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontSize" Value="12"/>
                                                    <Setter Property="FontWeight" Value="ExtraBold"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Row 2: Banner + Second row buttons + Patreon Login -->
        <Border Grid.Row="2" Background="{StaticResource PanelBgBrush}" Padding="10,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.85*"/>
                    <ColumnDefinition Width="1.15*"/>
                </Grid.ColumnDefinitions>

                <!-- Banner -->
                <Border Grid.Column="0" Background="#1E1E3A" CornerRadius="8" Padding="12,8" Margin="0,0,6,0">
                    <Grid>
                        <TextBlock x:Name="TxtBannerPrimary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="1">
                            <Run Text="If you love the project please "/>
                            <Run Text="consider supporting it" FontWeight="Bold"/>
                            <Run Text=" "/>
                            <Hyperlink NavigateUri="https://linktr.ee/CodeBambi" RequestNavigate="HandleHyperlinkClick">
                                <Run Text="https://linktr.ee/CodeBambi"/>
                            </Hyperlink>
                        </TextBlock>
                        <TextBlock x:Name="TxtBannerSecondary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="0" IsHitTestVisible="False"
                                   Text="Welcome back!"/>
                        <TextBlock x:Name="TxtBannerTertiary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic" FontWeight="Bold"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="0" IsHitTestVisible="False">
                            <Hyperlink NavigateUri="https://www.patreon.com/c/PlatinumPuppets" RequestNavigate="HandleHyperlinkClick">
                                <Run Text="A special thanks to Platinum Puppets for providing the audios â¤ï¸"/>
                            </Hyperlink>
                        </TextBlock>
                    </Grid>
                </Border>

                <!-- Right side: Achievements, Leaderboard, Companion, Assets buttons + Patreon Login + Help -->
                <Grid Grid.Column="1" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1.2*"/>
                        <ColumnDefinition Width="1.1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1.2*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" x:Name="BtnAchievements" Tag="Achievements" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnAchievements_Click" ToolTip="Achievements">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ†" FontSize="11" Margin="0,0,3,0"/>
                            <TextBlock Text="Achievements" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="1" x:Name="BtnLeaderboard" Tag="Leaderboard" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnLeaderboard_Click" ToolTip="Leaderboard">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“Š" FontSize="11" Margin="0,0,3,0"/>
                            <TextBlock Text="Leaderboard" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="2" x:Name="BtnCompanion" Tag="Companion" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnCompanion_Click" ToolTip="Companion Settings">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ¤–" FontSize="11" Margin="0,0,3,0"/>
                            <TextBlock Text="Companion" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="3" x:Name="BtnOpenAssets" Tag="Assets" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnAssets_Click" ToolTip="Assets &amp; Content Packs">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“" FontSize="11" Margin="0,0,3,0"/>
                            <TextBlock Text="Assets" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="4" x:Name="BtnPatreonExclusives" Tag="Patreon" Click="BtnPatreonExclusives_Click"
                            ToolTip="View Patreon exclusive features" Cursor="Hand" Height="28" Margin="2,0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#FF424D"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FontSize" Value="10"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="6" BorderThickness="2" BorderBrush="#E8363F"
                                                    Padding="8,4">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#E8363F"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#FF424D"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="â­" FontSize="11" Margin="0,0,4,0"/>
                            <TextBlock Text="Patreon Exclusives" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnMainHelp" Grid.Column="5" Content="?" Click="BtnMainHelp_Click"
                            Width="28" Height="28" ToolTip="How to use the app" Margin="3,0">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="#FF69B4" CornerRadius="14" Width="28" Height="28" Cursor="Hand">
                                    <TextBlock Text="?" Foreground="White" FontWeight="Bold" FontSize="16"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.85"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Grid>
        </Border>

        <!-- XP Progress Bar - Row 3 -->
        <Grid Grid.Row="3" Margin="15,10,15,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:Name="TxtLevelLabel" Grid.Column="0" Text="LVL 1" Foreground="{StaticResource PinkBrush}"
                       FontWeight="Bold" FontSize="12" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <Border Grid.Column="1" Background="#404060" CornerRadius="4" Height="8" Margin="0,0,10,0">
                <Border x:Name="XPBar" Background="{StaticResource PinkBrush}" CornerRadius="4"
                        HorizontalAlignment="Left" Width="100"/>
            </Border>
            <TextBlock x:Name="TxtXP" Grid.Column="2" Text="0 / 70 XP" Foreground="{StaticResource TextMutedBrush}"
                       FontSize="11" VerticalAlignment="Center" Margin="0,0,10,0"/>
        </Grid>

        <!-- Main Content - Settings Tab -->
        <Grid x:Name="SettingsTab" Grid.Row="4" Margin="10,5,10,2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="330"/>
                <ColumnDefinition Width="360"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- LEFT COLUMN -->
            <ScrollViewer Grid.Column="0" Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5">
                <StackPanel>
                    
                    <!-- Flash Images Section -->
                    <Border x:Name="FlashSection" Style="{StaticResource SectionPanel}" Padding="10,6"
                            ToolTip="Random images that appear on screen periodically.&#x0a;Add your own images to assets/images folder.&#x0a;Supports PNG, JPG, GIF formats.">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionHeader}" Text="âš¡ Flash Images" Margin="0,0,0,2"/>
                            
                            <!-- Enable / Clickable / Hydra in one row -->
                            <Grid Margin="0,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0"
                                            ToolTip="Turn flash images on or off">
                                    <CheckBox x:Name="ChkFlashEnabled" Style="{StaticResource ToggleStyle}" IsChecked="True"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,10,0"
                                            ToolTip="When enabled, clicking an image dismisses it.&#x0a;When disabled, images are click-through.">
                                    <CheckBox x:Name="ChkClickable" Style="{StaticResource ToggleStyle}" IsChecked="True"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Click" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Orientation="Horizontal"
                                            ToolTip="Hydra Mode: Clicking an image spawns&#x0a;two more images instead of dismissing it.&#x0a;Creates an escalating challenge!">
                                    <CheckBox x:Name="ChkCorruption" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="ðŸ™Hydra" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Per Hour / Images in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="How many flash events occur per hour.&#x0a;Higher values = more frequent flashes.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour" FontSize="11"/><TextBlock x:Name="TxtPerMin" Style="{StaticResource ValueLabel}" Text="10" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderPerMin" Minimum="1" Maximum="180" Value="10" Margin="0,1" ValueChanged="SliderPerMin_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="Number of images shown per flash event.&#x0a;Multiple images appear simultaneously.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Images" FontSize="11"/><TextBlock x:Name="TxtImages" Style="{StaticResource ValueLabel}" Text="5" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderImages" Minimum="1" Maximum="15" Value="5" Margin="0,1" ValueChanged="SliderImages_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Max On Screen -->
                            <Grid Margin="0,2,0,0" ToolTip="Maximum images displayed at once.&#x0a;Limits screen clutter during Hydra mode.">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Max On Screen" FontSize="11"/>
                                <TextBlock x:Name="TxtMaxOnScreen" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="20"/>
                            </Grid>
                            <Slider x:Name="SliderMaxOnScreen" Minimum="5" Maximum="20" Value="20" Margin="0,1" ValueChanged="SliderMaxOnScreen_Changed"/>
                        </StackPanel>
                    </Border>

                    <!-- Visuals Section -->
                    <Border x:Name="VisualsSection" Style="{StaticResource SectionPanel}" Padding="10,6"
                            ToolTip="Visual appearance settings for flash images.&#x0a;Customize size, transparency, and animations.">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ‘ Visuals" Margin="0,0,0,2"/>
                            
                            <!-- Size / Opacity in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="Scale of flash images.&#x0a;100% = original size, 200% = double size.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Size" FontSize="11"/><TextBlock x:Name="TxtSize" Style="{StaticResource ValueLabel}" Text="100%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSize" Minimum="50" Maximum="250" Value="100" Margin="0,1" ValueChanged="SliderSize_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="Transparency of flash images.&#x0a;Lower = more see-through, 100% = fully solid.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Opacity" FontSize="11"/><TextBlock x:Name="TxtOpacity" Style="{StaticResource ValueLabel}" Text="100%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderOpacity" Minimum="10" Maximum="100" Value="100" Margin="0,1" ValueChanged="SliderOpacity_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Fade / Duration in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="Fade in/out animation speed.&#x0a;0% = instant appear/disappear.&#x0a;100% = slow smooth fade.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Fade" FontSize="11"/><TextBlock x:Name="TxtFade" Style="{StaticResource ValueLabel}" Text="50%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFade" Minimum="0" Maximum="100" Value="50" Margin="0,1" ValueChanged="SliderFade_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="How long images stay on screen.&#x0a;Only used when audio is disabled.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Duration" FontSize="11"/><TextBlock x:Name="TxtFlashDuration" Style="{StaticResource ValueLabel}" Text="5s" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFlashDuration" Minimum="1" Maximum="30" Value="5" Margin="0,1" ValueChanged="SliderFlashDuration_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Link to Audio -->
                            <Border Background="#3D2D4D" CornerRadius="5" Padding="8,6" Margin="0,5,0,0"
                                    ToolTip="When enabled, flash duration matches audio length.&#x0a;Disable to use manual duration slider.&#x0a;Audio disabled automatically above 60 flashes/hour.">
                                <Grid>
                                    <CheckBox x:Name="ChkFlashAudio" IsChecked="True" Checked="ChkFlashAudio_Changed" Unchecked="ChkFlashAudio_Changed">
                                        <TextBlock Text="ðŸ“Š Link to Audio Trigger" FontSize="12" FontWeight="SemiBold"/>
                                    </CheckBox>
                                    <TextBlock x:Name="TxtAudioWarning" Text="âš  Max 30/h" Foreground="#FFB347" FontSize="10" 
                                               HorizontalAlignment="Right" VerticalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Logo (Clickable for Neon Obsession achievement + Easter Egg) -->
                    <Border Background="#01000000" Padding="0" Height="260" Margin="0,0,0,8"
                            Cursor="Hand" MouseLeftButtonDown="ImgLogo_MouseLeftButtonDown"
                            ToolTip="Click me rapidly! ðŸ’—">
                        <Border CornerRadius="20" ClipToBounds="True">
                            <Image x:Name="ImgLogo" Stretch="Uniform"
                                   HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                        </Border>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- MIDDLE COLUMN -->
            <ScrollViewer Grid.Column="1" Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5">
                <StackPanel>
                    
                    <!-- Mandatory Video Section -->
                    <Border x:Name="VideoSection" Style="{StaticResource SectionPanel}" Padding="10,10"
                            ToolTip="Fullscreen videos that play periodically.&#x0a;Add videos to assets/videos folder.&#x0a;Supports MP4, WebM, AVI formats.">
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸŽ¬ Mandatory Video"/>
                                <Button x:Name="BtnTestVideo" Content="â–¶ Test" Style="{StaticResource OutlineButton}"
                                        HorizontalAlignment="Right" Padding="10,4" Click="BtnTestVideo_Click"
                                        ToolTip="Play a random video now to test"/>
                            </Grid>

                            <!-- Enable + Strict + Per Hour -->
                            <Grid Margin="0,8,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="30"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Orientation="Horizontal" ToolTip="Turn mandatory videos on or off">
                                    <CheckBox x:Name="ChkVideoEnabled" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" Margin="6,0,15,0"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal"
                                            ToolTip="âš  STRICT MODE: Videos cannot be skipped!&#x0a;You must watch the entire video.&#x0a;Use with caution.">
                                    <CheckBox x:Name="ChkStrictLock" Style="{StaticResource ToggleStyle}" Checked="ChkStrictLock_Checked"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="âš  Strict" Foreground="#FFB347" Margin="6,0,15,0"/>
                                </StackPanel>
                                <Slider Grid.Column="2" x:Name="SliderPerHour" Minimum="1" Maximum="20" Value="2" ValueChanged="SliderPerHour_Changed"
                                        ToolTip="Videos per hour"/>
                                <TextBlock x:Name="TxtPerHour" Grid.Column="3" Style="{StaticResource ValueLabel}" Text="2" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Mini-Game Sub-Section -->
                            <Border Background="#1E1E3A" CornerRadius="6" Padding="10,10" Margin="0,10,0,0"
                                    ToolTip="Attention check during videos.&#x0a;Click targets that appear to prove you're watching.&#x0a;Failing in Strict mode restarts the video!">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text="ðŸŽ¯ Mini-Game" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                        <CheckBox x:Name="ChkMiniGameEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"
                                                  ToolTip="Enable attention check targets"/>
                                    </Grid>

                                    <!-- Targets / Duration / Size -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0" Margin="0,0,6,0" ToolTip="Number of targets to click per video">
                                            <Grid>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Targets" FontSize="11" Foreground="#A0A0B0"/>
                                                    <CheckBox x:Name="ChkRandomizeTargets" Margin="6,0,0,0" VerticalAlignment="Center"
                                                              ToolTip="Randomize target count (1 to max)"
                                                              Checked="ChkRandomizeTargets_Changed" Unchecked="ChkRandomizeTargets_Changed">
                                                        <TextBlock Text="ðŸŽ²" FontSize="9" ToolTip="Randomize"/>
                                                    </CheckBox>
                                                </StackPanel>
                                                <TextBlock x:Name="TxtTargets" Text="3" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/>
                                            </Grid>
                                            <Slider x:Name="SliderTargets" Minimum="1" Maximum="10" Value="3" Margin="0,3,0,0" ValueChanged="SliderTargets_Changed"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Margin="3,0" ToolTip="Seconds each target stays visible">
                                            <Grid><TextBlock Text="Duration" FontSize="11" Foreground="#A0A0B0"/><TextBlock x:Name="TxtDuration" Text="5" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/></Grid>
                                            <Slider x:Name="SliderDuration" Minimum="1" Maximum="15" Value="5" Margin="0,3,0,0" ValueChanged="SliderDuration_Changed"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2" Margin="6,0,0,0" ToolTip="Target button size in pixels">
                                            <Grid><TextBlock Text="Size" FontSize="11" Foreground="#A0A0B0"/><TextBlock x:Name="TxtTargetSize" Text="70" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/></Grid>
                                            <Slider x:Name="SliderTargetSize" Minimum="30" Maximum="150" Value="70" Margin="0,3,0,0" ValueChanged="SliderTargetSize_Changed"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                        <Button Content="ðŸ“ Phrases" Style="{StaticResource PinkButton}" Padding="8,5" Click="BtnManageAttention_Click"
                                                ToolTip="Edit attention check phrases"/>
                                        <Button Content="ðŸŽ¨ Style" Style="{StaticResource OutlineButton}" Margin="8,0,0,0" Padding="8,5" Click="BtnAttentionStyle_Click"
                                                ToolTip="Customize target appearance (colors, border, font)"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Subliminals Section -->
                    <Border x:Name="SubliminalSection" Style="{StaticResource SectionPanel}" Padding="10,10"
                            ToolTip="Brief text messages that flash on screen.&#x0a;Customize messages in the Messages editor.&#x0a;Can be paired with whispered audio.">
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ’­ Subliminals"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Content="ðŸ“" Style="{StaticResource OutlineButton}" Padding="6,3" Click="BtnManageMessages_Click" Margin="0,0,4,0"
                                            ToolTip="Edit subliminal messages"/>
                                    <Button Content="âš™" Style="{StaticResource OutlineButton}" Padding="6,3" Click="BtnSubliminalSettings_Click" Margin="0,0,8,0"
                                            ToolTip="Advanced subliminal visual settings"/>
                                    <CheckBox x:Name="ChkSubliminalEnabled" Style="{StaticResource ToggleStyle}"
                                              ToolTip="Enable/disable subliminal messages"/>
                                </StackPanel>
                            </Grid>

                            <!-- Per Min / Frames / Opacity in 3 columns -->
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Margin="0,0,6,0" ToolTip="Messages shown per minute">
                                    <Grid><TextBlock Text="Per Min" FontSize="11" Foreground="#A0A0B0"/><TextBlock x:Name="TxtSubPerMin" Text="5" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSubPerMin" Minimum="1" Maximum="30" Value="5" Margin="0,3,0,0" ValueChanged="SliderSubPerMin_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="3,0" ToolTip="Display duration in frames.&#x0a;Lower = faster flash, harder to read.">
                                    <Grid><TextBlock Text="Frames" FontSize="11" Foreground="#A0A0B0"/><TextBlock x:Name="TxtFrames" Text="2" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFrames" Minimum="1" Maximum="10" Value="2" Margin="0,3,0,0" ValueChanged="SliderFrames_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Margin="6,0,0,0" ToolTip="Text visibility. Lower = more subtle.">
                                    <Grid><TextBlock Text="Opacity" FontSize="11" Foreground="#A0A0B0"/><TextBlock x:Name="TxtSubOpacity" Text="80%" FontSize="11" Foreground="#E0E0E0" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSubOpacity" Minimum="10" Maximum="100" Value="80" Margin="0,3,0,0" ValueChanged="SliderSubOpacity_Changed"/>
                                </StackPanel>
                            </Grid>

                            <!-- Audio Whispers -->
                            <Grid Margin="0,10,0,0" ToolTip="Play whispered audio when subliminal messages appear.">
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox x:Name="ChkAudioWhispers" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="ðŸ“Š Audio Whispers" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Slider x:Name="SliderWhisperVol" Minimum="0" Maximum="100" Value="50" Width="100" ValueChanged="SliderWhisperVol_Changed"/>
                                    <TextBlock x:Name="TxtWhisperVol" Style="{StaticResource ValueLabel}" Text="50%" Width="40"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- System Section -->
                    <Border x:Name="SystemSection" Style="{StaticResource SectionPanel}" Padding="10,10"
                            ToolTip="Application behavior and startup settings.">
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text="âš™ System"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Content="ðŸ“" Style="{StaticResource OutlineButton}"
                                            Padding="6,3" Click="BtnPickAssetsFolder_Click" Margin="0,0,4,0"
                                            ToolTip="Set custom assets folder"/>
                                    <Button Content="ðŸ“š Assets" Style="{StaticResource OutlineButton}"
                                            Padding="8,3" Click="BtnOpenAssetsFolder_Click"
                                            ToolTip="Open assets folder (images, videos, sounds)"/>
                                </StackPanel>
                            </Grid>

                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Show content on all connected monitors (2, 3, or more)">
                                    <CheckBox x:Name="ChkDualMon" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkDualMon_Changed" Unchecked="ChkDualMon_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Multi Mon" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Launch automatically when Windows starts">
                                    <CheckBox x:Name="ChkWinStart" Style="{StaticResource ToggleStyle}" Click="ChkWinStart_Click"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Win Start" Margin="6,0,0,0"/>
                                </StackPanel>

                                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Play a mandatory video when app opens">
                                    <CheckBox x:Name="ChkVidLaunch" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Vid Launch" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Start the engine automatically on launch">
                                    <CheckBox x:Name="ChkAutoRun" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Auto Run" Margin="6,0,0,0"/>
                                </StackPanel>

                                <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Start minimized to system tray">
                                    <CheckBox x:Name="ChkStartHidden" Style="{StaticResource ToggleStyle}" Click="ChkStartHidden_Click"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Start Hidden" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="âš  DANGER: Completely disables panic key!&#x0a;You won't be able to emergency stop.&#x0a;Use with extreme caution.">
                                    <CheckBox x:Name="ChkNoPanic" Style="{StaticResource ToggleStyle}" Checked="ChkNoPanic_Checked" Unchecked="ChkNoPanic_Unchecked"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="âš  No Panic" Margin="6,0,0,0" Foreground="#FF6B6B"/>
                                </StackPanel>

                                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Disable all network features (updates, AI, leaderboard).&#x0a;App runs completely offline with no external connections.">
                                    <CheckBox x:Name="ChkOfflineMode" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkOfflineMode_Changed" Unchecked="ChkOfflineMode_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Offline Mode" Margin="6,0,0,0"/>
                                </StackPanel>
                            </Grid>

                            <!-- Startup Video Selection -->
                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0"
                                        ToolTip="Select a specific video to play on startup (when Vid Launch is enabled)">
                                <TextBlock Text="Startup Video:" Foreground="#B0B0B0" FontSize="10" VerticalAlignment="Center" Width="75"/>
                                <TextBlock x:Name="TxtStartupVideo" Text="(Random)" Foreground="#E0E0E0" FontSize="10"
                                           VerticalAlignment="Center" Width="90" TextTrimming="CharacterEllipsis"/>
                                <Button Content="ðŸ“" Background="#40FFFFFF" Foreground="White" BorderThickness="0"
                                        Padding="5,1" Margin="4,0,0,0" Cursor="Hand" Click="BtnSelectStartupVideo_Click"
                                        ToolTip="Browse for startup video"/>
                                <Button Content="âœ•" Background="#40FF6B6B" Foreground="White" BorderThickness="0"
                                        Padding="5,1" Margin="4,0,0,0" Cursor="Hand" Click="BtnClearStartupVideo_Click"
                                        ToolTip="Clear selection (use random)"/>
                            </StackPanel>

                            <!-- Gaming Tip + Panic Key -->
                            <Grid Margin="0,8,0,0">
                                <TextBlock Text="ðŸ’¡ Use Borderless Windowed for overlays" Foreground="#808090" FontSize="10" VerticalAlignment="Center"
                                           ToolTip="Exclusive fullscreen games block overlays.&#x0a;Use Borderless Windowed mode instead."/>
                                <Button x:Name="BtnPanicKey" Content="ðŸ”‘ Escape" Style="{StaticResource OutlineButton}" 
                                        HorizontalAlignment="Right" Padding="10,4" Click="BtnPanicKey_Click"
                                        ToolTip="Click to change panic key.&#x0a;Press once to stop, twice to exit."/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- RIGHT COLUMN -->
            <Grid Grid.Column="2" Grid.Row="0" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Browser Section -->
                <Border Grid.Row="0" Style="{StaticResource SectionPanel}" Margin="0,0,0,5">
                    <StackPanel>
                        <!-- Browser Header - single row with title, tabs, status, pop out -->
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸŒ Browser" Margin="0" VerticalAlignment="Center"/>
                            <!-- Site Toggle - inline -->
                            <Border Grid.Column="1" Background="#252545" CornerRadius="10" Padding="2" Margin="10,0,0,0" VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton x:Name="RbBambiCloud" Content="BambiCloud" GroupName="BrowserSite"
                                                 IsChecked="True" Checked="BrowserSiteToggle_Changed"
                                                 Foreground="#E0E0E0" FontSize="10" Cursor="Hand" Margin="2,1">
                                        <RadioButton.Template>
                                            <ControlTemplate TargetType="RadioButton">
                                                <Border x:Name="border" Background="Transparent" CornerRadius="8" Padding="8,3">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="#FF69B4"/>
                                                        <Setter Property="Foreground" Value="White"/>
                                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                                    </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#353565"/>
                                                </Trigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsChecked" Value="True"/>
                                                        <Condition Property="IsMouseOver" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="border" Property="Background" Value="#FF85C1"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </RadioButton.Template>
                                </RadioButton>
                                <RadioButton x:Name="RbHypnoTube" Content="HypnoTube" GroupName="BrowserSite"
                                             Checked="BrowserSiteToggle_Changed"
                                             Foreground="#E0E0E0" FontSize="10" Cursor="Hand" Margin="2,1">
                                    <RadioButton.Template>
                                        <ControlTemplate TargetType="RadioButton">
                                            <Border x:Name="border" Background="Transparent" CornerRadius="8" Padding="8,3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#FF69B4"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#353565"/>
                                                </Trigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsChecked" Value="True"/>
                                                        <Condition Property="IsMouseOver" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="border" Property="Background" Value="#FF85C1"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </RadioButton.Template>
                                </RadioButton>
                                </StackPanel>
                            </Border>
                            <!-- Status indicator -->
                            <TextBlock Grid.Column="3" x:Name="TxtBrowserStatus" Text="â— Loading..."
                                       Foreground="{StaticResource PinkBrush}" FontSize="10"
                                       VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <!-- Pop Out button -->
                            <Button Grid.Column="4" x:Name="BtnPopOutBrowser" Content="â§‰ Pop Out"
                                    Click="BtnPopOutBrowser_Click"
                                    ToolTip="Pop out browser to resizable window"
                                    FontSize="9" Padding="6,3" VerticalAlignment="Center">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="#FF69B4"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#FF85C1"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter Property="Background" Value="#E05A9E"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <!-- Browser Container -->
                        <Border Background="#1E1E3A" CornerRadius="6" ClipToBounds="True" Height="395">
                            <Grid x:Name="BrowserContainer">
                                <!-- WebView2 will be added here programmatically -->
                                <TextBlock x:Name="BrowserLoadingText"
                                           Text="ðŸŒ Connecting to Bambi Cloud..."
                                           Foreground="#808080" FontSize="12"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Audio Section + Quick Actions -->
                <Grid Grid.Row="1" Margin="0,5,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Audio Section (left half) -->
                    <Border x:Name="AudioSection" Grid.Column="0" Style="{StaticResource SectionPanel}" VerticalAlignment="Stretch">
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ“Š Audio" FontSize="12"
                                           ToolTip="Audio volume and ducking settings"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock Text="Duck" Foreground="#808090" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                    <CheckBox x:Name="ChkAudioDuck" Style="{StaticResource ToggleStyle}"
                                              IsChecked="True"
                                              Checked="ChkAudioDuck_Changed" Unchecked="ChkAudioDuck_Changed"
                                              ToolTip="Automatically reduce other app volumes during videos"/>
                                </StackPanel>
                            </Grid>

                            <!-- Master Volume -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Master" FontSize="10"
                                           ToolTip="Master volume for all audio"/>
                                <Slider Grid.Column="1" x:Name="SliderMaster" Minimum="0" Maximum="100" Value="50"
                                        Margin="4,0" ValueChanged="SliderMaster_Changed"
                                        ToolTip="Overall audio volume level"/>
                                <TextBlock x:Name="TxtMaster" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="50%" FontSize="10"/>
                            </Grid>

                            <!-- Video Volume -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Video" FontSize="10"
                                           ToolTip="Volume for mandatory videos"/>
                                <Slider Grid.Column="1" x:Name="SliderVideoVolume" Minimum="0" Maximum="100" Value="50"
                                        Margin="4,0" ValueChanged="SliderVideoVolume_Changed"
                                        ToolTip="Separate volume control for videos"/>
                                <TextBlock x:Name="TxtVideoVolume" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="50%" FontSize="10"/>
                            </Grid>

                            <!-- Duck % -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Duck" FontSize="10"
                                           ToolTip="How much to reduce other audio"/>
                                <Slider Grid.Column="1" x:Name="SliderDuck" Minimum="0" Maximum="100" Value="80"
                                        Margin="4,0" ValueChanged="SliderDuck_Changed"
                                        ToolTip="Ducking percentage (80% = reduce other audio to 20%)"/>
                                <TextBlock x:Name="TxtDuck" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="80%" FontSize="10"/>
                            </Grid>

                            <!-- Exclude BambiCloud from ducking -->
                            <CheckBox x:Name="ChkExcludeBambiCloudDucking" Margin="0,4,0,0"
                                      Content="Don't duck browser"
                                      IsChecked="True"
                                      Checked="ChkExcludeBambiCloudDucking_Changed"
                                      Unchecked="ChkExcludeBambiCloudDucking_Changed"
                                      ToolTip="When enabled, audio from the integrated BambiCloud browser won't be reduced during ducking"
                                      Foreground="#FFB6C1" FontSize="9"/>
                        </StackPanel>
                    </Border>

                    <!-- Quick Actions (right half) -->
                    <Border Grid.Column="2" Style="{StaticResource SectionPanel}" VerticalAlignment="Stretch">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ”— Quick Links" FontSize="12" Margin="0,0,0,6"/>

                            <!-- Patreon Login Button -->
                            <Button x:Name="BtnQuickPatreonLogin" Content="â­ Login with Patreon"
                                    Click="BtnQuickPatreonLogin_Click"
                                    Padding="8,10" Margin="0,0,0,6"
                                    ToolTip="Login with Patreon for premium features">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="#FF424D"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="11"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#E8363F"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter Property="Background" Value="#D42F38"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!-- Discord row: Login + Rich Presence + Server Link -->
                            <Grid Margin="0,0,0,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Discord Login Button -->
                                <Button x:Name="BtnQuickDiscordLogin" Content="ðŸŽ® Login with Discord"
                                        Click="BtnQuickDiscordLogin_Click"
                                        Padding="8,10"
                                        ToolTip="Login with Discord for community features">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="#5865F2"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Setter Property="FontSize" Value="11"/>
                                            <Setter Property="BorderThickness" Value="0"/>
                                            <Setter Property="Cursor" Value="Hand"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="#4752C4"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter Property="Background" Value="#3C45A5"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <!-- Rich Presence Toggle -->
                                <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Center" Margin="6,0,0,0"
                                            ToolTip="Show your activity on Discord">
                                    <CheckBox x:Name="ChkQuickDiscordRichPresence" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkDiscordRichPresence_Changed" Unchecked="ChkDiscordRichPresence_Changed"/>
                                    <TextBlock Text="RP" Foreground="#808090" FontSize="8" HorizontalAlignment="Center" Margin="0,1,0,0"/>
                                </StackPanel>

                                <!-- Discord Server Link -->
                                <Button Grid.Column="2" Click="BtnDiscord_Click" Margin="4,0,0,0"
                                        ToolTip="Join the Discord community" Cursor="Hand">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="0"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="#3A3A5A" CornerRadius="6"
                                                                Padding="8,6" BorderThickness="1" BorderBrush="#5865F2">
                                                            <TextBlock Text="ðŸ’¬" FontSize="14" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#5865F2"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>

            <!-- Scrolling Marquee Banner - spans all columns -->
            <Border x:Name="MarqueeBanner" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"
                    Background="#1A0A1A" BorderBrush="#FF1493" BorderThickness="2"
                    CornerRadius="8" Height="48" Margin="5,5,5,0" ClipToBounds="True">
                <Border.Effect>
                    <DropShadowEffect Color="#FF1493" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                </Border.Effect>
                <Canvas x:Name="MarqueeCanvas" ClipToBounds="True">
                    <TextBlock x:Name="MarqueeText"
                               Text="v5.0.2 IS OUT - THANKS TO ALL THE 100+ PATREONS AND TO ALL THE SUPPORTERS/TESTERS ðŸ’–ðŸ”’"
                               FontFamily="Impact" FontSize="28" FontWeight="Bold"
                               Foreground="#FF69B4" Canvas.Top="8">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#FF1493" BlurRadius="8" ShadowDepth="0" Opacity="0.8"/>
                        </TextBlock.Effect>
                        <TextBlock.RenderTransform>
                            <TranslateTransform x:Name="MarqueeTransform"/>
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </Canvas>
            </Border>
        </Grid>

        <!-- Presets Tab (Hidden by default) -->
        <Grid x:Name="PresetsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <!-- Main Content -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="430" MinWidth="300" MaxWidth="700"/>
                </Grid.ColumnDefinitions>

                <!-- Left Side: Presets and Sessions -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Top Section: Preset Cards Row -->
                    <Border Grid.Row="0" Style="{StaticResource SectionPanel}" Margin="5,5,5,0" Padding="10">
                        <StackPanel>
                            <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ“‹ Presets" Margin="0,0,0,8"/>
                            
                            <!-- Horizontal Scrolling Preset Cards -->
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Preset Cards Container -->
                                    <StackPanel x:Name="PresetCardsPanel" Orientation="Horizontal">
                                        <!-- Preset cards will be generated here dynamically -->
                                </StackPanel>
                                
                                <!-- Fixed "New Preset" Card -->
                                <Border Background="#2A2A4A" CornerRadius="6" Padding="8" Margin="4,0,0,0" 
                                        Width="100" Height="70" Cursor="Hand"
                                        MouseLeftButtonUp="BtnNewPreset_Click"
                                        ToolTip="Create a new preset from current settings">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                    <Setter Property="Background" Value="#353550"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="âž•" FontSize="20" HorizontalAlignment="Center" Foreground="{StaticResource PinkBrush}"/>
                                        <TextBlock Text="New" FontSize="10" FontWeight="Bold" 
                                                   Foreground="{StaticResource PinkBrush}" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- Bottom Section: Sessions -->
                <Border Grid.Row="1" Style="{StaticResource SectionPanel}" Margin="5,8,5,5" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="2*"/>
                            <RowDefinition Height="*" MinHeight="120"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" Margin="0,0,0,10">
                            <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸŽ¯ Sessions"/>
                        </Grid>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="SessionsPanel">
                                <!-- Morning Drift - Available -->
                                <Border Background="#2A2A4A" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionMorningDrift" MouseLeftButtonUp="SessionCard_Click" Tag="morning_drift">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸŒ… Morning Drift" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="30 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#2A3A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="â­ Easy" Foreground="#90EE90" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#2A4A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+400 XP" Foreground="#90EE90" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Gentle subliminals &amp; bouncing text with gradual pink filter"
                                                       Foreground="#A0A0A0" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="âœ" ToolTip="Edit Session"
                                                    Tag="morning_drift" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="ðŸ“¤" ToolTip="Export Session"
                                                    Tag="morning_drift" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Gamer Girl - Available -->
                                <Border Background="#2A2A4A" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionGamerGirl" MouseLeftButtonUp="SessionCard_Click" Tag="gamer_girl">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸŽ® Gamer Girl" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="45 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#3A3A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="â­â­ Medium" Foreground="#FFD700" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#3A4A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+800 XP" Foreground="#FFD700" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Non-intrusive conditioning with pink filter &amp; spiral overlay"
                                                       Foreground="#A0A0A0" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="âœ" ToolTip="Edit Session"
                                                    Tag="gamer_girl" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="ðŸ“¤" ToolTip="Export Session"
                                                    Tag="gamer_girl" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- The Distant Doll - Available -->
                                <Border Background="#2A2A4A" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionDistantDoll" MouseLeftButtonUp="SessionCard_Click" Tag="distant_doll">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ›‹ï¸ The Distant Doll" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="45 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#2A3A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="â­ Easy" Foreground="#90EE90" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#2A4A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+400 XP" Foreground="#90EE90" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Large visuals for couch viewing, no audio ducking"
                                                       Foreground="#A0A0A0" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="âœ" ToolTip="Edit Session"
                                                    Tag="distant_doll" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="ðŸ“¤" ToolTip="Export Session"
                                                    Tag="distant_doll" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Good Girls Don't Cum - Available -->
                                <Border Background="#2A2A4A" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionGoodGirls" MouseLeftButtonUp="SessionCard_Click" Tag="good_girls_dont_cum">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ”’ Good Girls Don't Cum" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="60 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#4A3A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="â­â­â­ Hard" Foreground="#FFA500" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="#4A4A2A" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+1200 XP" Foreground="#FFA500" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Denial session with heavy conditioning and escalating intensity."
                                                       Foreground="#A0A0A0" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="âœ" ToolTip="Edit Session"
                                                    Tag="good_girls_dont_cum" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="ðŸ“¤" ToolTip="Export Session"
                                                    Tag="good_girls_dont_cum" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Custom/Imported Sessions Section -->
                                <TextBlock x:Name="TxtCustomSessionsHeader" Text="Your Sessions:" Foreground="#FF69B4"
                                           FontSize="13" FontWeight="SemiBold" Margin="0,16,0,10" Visibility="Collapsed"/>
                                <StackPanel x:Name="CustomSessionsPanel"/>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Drop Zone and Editor Panel -->
                        <Grid Grid.Row="2" Margin="0,8,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left: Drop Zone -->
                            <Border Grid.Column="0"
                                    x:Name="SessionDropZone"
                                    Background="#1E1E3A"
                                    BorderBrush="#404060"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Margin="0,0,4,0"
                                    AllowDrop="True"
                                    Drop="SessionDropZone_Drop"
                                    DragEnter="SessionDropZone_DragEnter"
                                    DragLeave="SessionDropZone_DragLeave"
                                    DragOver="SessionDropZone_DragOver">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="#606080"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock x:Name="DropZoneIcon" Text="ðŸ“‚" FontSize="28" HorizontalAlignment="Center" Foreground="#707090"/>
                                    <TextBlock Text="Drag &amp; Drop" FontSize="13" FontWeight="SemiBold"
                                               Foreground="#909090" HorizontalAlignment="Center" Margin="0,6,0,0"/>
                                    <TextBlock Text=".session.json" FontSize="11"
                                               Foreground="#606070" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    <TextBlock x:Name="DropZoneStatus" Text="" FontSize="10"
                                               Foreground="{StaticResource PinkBrush}" HorizontalAlignment="Center" Margin="0,6,0,0"
                                               Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- Right: Session Editor Panel -->
                            <Border Grid.Column="1"
                                    Background="#1E1E3A"
                                    BorderBrush="#404060"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Margin="4,0,0,0">
                                <Grid>
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="Session Editor" FontSize="13" FontWeight="SemiBold"
                                                   Foreground="#FF69B4" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Create custom sessions" FontSize="11"
                                                   Foreground="#707090" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,12,0,0">
                                            <Button x:Name="BtnCreateSession" Content="+ Create New"
                                                    Click="BtnCreateSession_Click"
                                                    Background="#FF69B4" Foreground="White"
                                                    BorderThickness="0"
                                                    Padding="12,6" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                                                    Margin="0,0,8,0">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button x:Name="BtnExportSession" Content="Export"
                                                    Click="BtnExportSession_Click"
                                                    IsEnabled="False"
                                                    Background="#2A2A4A" Foreground="#909090"
                                                    BorderBrush="#404060" BorderThickness="1"
                                                    Padding="12,6" FontSize="11" Cursor="Hand">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                                            CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                    </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsEnabled" Value="True">
                                                                <Setter Property="Foreground" Value="White"/>
                                                                <Setter Property="Background" Value="#3A3A5A"/>
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>

                <!-- Splitter -->
                <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                              Background="#404060" Cursor="SizeWE"/>

            <!-- Right Side: Details Panel -->
            <Border Grid.Column="2" Style="{StaticResource SectionPanel}" Margin="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,12">
                        <TextBlock x:Name="TxtDetailTitle" Text="Select a Preset" 
                                   Foreground="{StaticResource PinkBrush}" FontSize="18" FontWeight="Bold"/>
                        <TextBlock x:Name="TxtDetailSubtitle" Text="Click on a preset or session to see details" 
                                   Foreground="#909090" FontSize="12" TextWrapping="Wrap" Margin="0,5,0,0"/>
                    </StackPanel>
                    
                    <!-- Details Content - Preset View -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" x:Name="PresetDetailScroller">
                        <StackPanel x:Name="DetailContentPanel">
                            <!-- Preset details will show here -->
                            <TextBlock Text="âš¡ Flash Images" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailFlash" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="ðŸŽ¬ Mandatory Videos" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailVideo" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="ðŸ’­ Subliminals" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailSubliminal" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="ðŸ“Š Audio" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailAudio" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="ðŸŒ€ Overlays" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailOverlays" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text="ðŸ“ Advanced" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailAdvanced" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,12"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Details Content - Session View (Spoiler-Free) -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" x:Name="SessionDetailScroller" Visibility="Collapsed">
                        <StackPanel x:Name="SessionDetailPanel">
                            <!-- Session Duration & Difficulty -->
                            <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                        <TextBlock Text="â± Duration" Foreground="#808090" FontSize="10" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="TxtSessionDuration" Text="30 minutes" Foreground="White" 
                                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ† Reward" Foreground="#808090" FontSize="10" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="TxtSessionXP" Text="+50 XP" Foreground="#90EE90" 
                                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Difficulty Badge -->
                            <Border x:Name="DifficultyBadge" Background="#2A2A4A" CornerRadius="6" Padding="8,4" 
                                    Margin="0,0,0,12" HorizontalAlignment="Center">
                                <TextBlock x:Name="TxtSessionDifficulty" Text="â­Â Easy" Foreground="#FFD700" 
                                           FontSize="12" FontWeight="Bold"/>
                            </Border>
                            
                            <!-- Spoiler-Free Description -->
                            <TextBlock x:Name="TxtSessionDescription" TextWrapping="Wrap" Foreground="#C0C0C0" FontSize="12" 
                                       LineHeight="20" Margin="0,0,0,16"
                                       Text="Let the morning carry you away..."/>
                            
                            <!-- Corner GIF Option (shown for Gamer Girl session) -->
                            <Border x:Name="CornerGifOptionPanel" Background="#252540" CornerRadius="6" Padding="10" 
                                    Margin="0,0,0,12" Visibility="Collapsed">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text="ðŸ–¼ Corner GIF" Foreground="{StaticResource PinkBrush}" 
                                                   FontWeight="Bold" FontSize="11"/>
                                        <CheckBox x:Name="ChkCornerGifEnabled" Style="{StaticResource ToggleStyle}" 
                                                  HorizontalAlignment="Right" Checked="ChkCornerGifEnabled_Changed" 
                                                  Unchecked="ChkCornerGifEnabled_Changed"/>
                                    </Grid>
                                    <TextBlock x:Name="TxtCornerGifDesc" Text="Place a subtle GIF in a screen corner" 
                                               Foreground="#808090" FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap"/>
                                    
                                    <StackPanel x:Name="CornerGifSettings" Visibility="Collapsed" Margin="0,8,0,0">
                                        <Button x:Name="BtnSelectCornerGif" Content="ðŸ“ Select GIF" 
                                                Style="{StaticResource OutlineButton}" Padding="8,6" FontSize="10"
                                                Margin="0,0,0,8" Click="BtnSelectCornerGif_Click"/>
                                        <TextBlock Text="Position:" Foreground="#909090" FontSize="10" Margin="0,0,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <RadioButton x:Name="RbCornerTL" Content="â†– Top-Left" Foreground="White"
                                                         GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                            <RadioButton x:Name="RbCornerTR" Grid.Column="1" Content="â†— Top-Right"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                            <RadioButton x:Name="RbCornerBL" Grid.Row="1" Content="â†™ Bottom-Left"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10" IsChecked="True"/>
                                            <RadioButton x:Name="RbCornerBR" Grid.Row="1" Grid.Column="1" Content="â†˜ Bottom-Right"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                        </Grid>

                                        <!-- Size Slider -->
                                        <TextBlock Text="Size:" Foreground="#909090" FontSize="10" Margin="0,10,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="50"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider x:Name="SliderCornerGifSize" Minimum="100" Maximum="600" Value="300"
                                                    VerticalAlignment="Center" ValueChanged="SliderCornerGifSize_ValueChanged"/>
                                            <TextBlock x:Name="TxtCornerGifSize" Grid.Column="1" Text="300px"
                                                       Foreground="#C0C0C0" FontSize="10" VerticalAlignment="Center"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>

                                        <!-- Opacity Slider -->
                                        <TextBlock Text="Opacity:" Foreground="#909090" FontSize="10" Margin="0,10,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="50"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider x:Name="SliderCornerGifOpacity" Minimum="5" Maximum="100" Value="20"
                                                    VerticalAlignment="Center" ValueChanged="SliderCornerGifOpacity_ValueChanged"/>
                                            <TextBlock x:Name="TxtCornerGifOpacity" Grid.Column="1" Text="20%"
                                                       Foreground="#C0C0C0" FontSize="10" VerticalAlignment="Center"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                            
                            <!-- Spoiler Warning -->
                            <Border Background="#2A2040" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="ðŸŽ Mystery Experience" Foreground="{StaticResource PinkBrush}" 
                                               FontWeight="Bold" FontSize="13" HorizontalAlignment="Center"/>
                                    <TextBlock Text="The magic works best when you don't know what's coming..." 
                                               Foreground="#808090" FontSize="11" TextAlignment="Center" 
                                               Margin="0,6,0,0" FontStyle="Italic"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Reveal Spoilers Button -->
                            <Button x:Name="BtnRevealSpoilers" Content="ðŸ‘ Reveal Details" 
                                    Style="{StaticResource OutlineButton}" Padding="12,8" FontSize="12"
                                    Click="BtnRevealSpoilers_Click" Margin="0,0,0,12"
                                    ToolTip="âš  This will show all session settings - spoils the surprise!"/>
                            
                            <!-- Spoiler Content (Hidden by default) -->
                            <StackPanel x:Name="SessionSpoilerPanel" Visibility="Collapsed">
                                <Border Background="#301520" CornerRadius="6" Padding="10" Margin="0,0,0,12">
                                    <TextBlock Text="âš  SPOILERS BELOW âš " Foreground="#FF6B6B" FontSize="12" 
                                               FontWeight="Bold" HorizontalAlignment="Center"/>
                                </Border>
                                
                                <TextBlock Text="âš¡ Flash Images" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionFlash" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text="ðŸ’­ Subliminals" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionSubliminal" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10"/>
                                
                                <TextBlock Text="ðŸ“Š Audio" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionAudio" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10"/>
                                
                                <TextBlock Text="ðŸŒ€ Overlays" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionOverlays" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text="ðŸ“º Extras" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionExtras" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text="â± Timeline" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionTimeline" Text="â€”" Foreground="#909090" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Preset Action Buttons -->
                    <StackPanel Grid.Row="2" x:Name="PresetButtonsPanel" Margin="0,10,0,0">
                        <Button x:Name="BtnLoadPreset" Content="ðŸ“¥ Load Preset" Style="{StaticResource PinkButton}"
                                Margin="0,0,0,6" Padding="12,10" FontSize="13" Click="BtnLoadPreset_Click" IsEnabled="False"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button x:Name="BtnSaveOverPreset" Grid.Column="0" Content="ðŸ’¾ Save" 
                                    Style="{StaticResource OutlineButton}" Margin="0,0,3,0" Padding="10,8"
                                    Click="BtnSaveOverPreset_Click" IsEnabled="False" FontSize="12"/>
                            <Button x:Name="BtnDeletePreset" Grid.Column="1" Content="ðŸ—‘ Delete" 
                                    Style="{StaticResource OutlineButton}" Margin="3,0,0,0" Padding="10,8"
                                    Click="BtnDeletePreset_Click" IsEnabled="False" FontSize="12"/>
                        </Grid>
                    </StackPanel>
                    
                    <!-- Session Action Buttons -->
                    <StackPanel Grid.Row="2" x:Name="SessionButtonsPanel" Margin="0,10,0,0" Visibility="Collapsed">
                        <Button x:Name="BtnStartSession" Content="â–¶ Start Session" Style="{StaticResource PinkButton}"
                                Padding="12,12" FontSize="14" Click="BtnStartSession_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
            </Grid>
        </Grid>

        <!-- Progression Tab (Hidden by default) -->
        <Grid x:Name="ProgressionTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>

            <!-- Unlockables -->
            <Border Grid.Column="0" Style="{StaticResource SectionPanel}" Margin="5"
                    ToolTip="Features that unlock as you level up.&#x0a;Keep conditioning to earn XP and unlock new features!">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸŽ Unlockables"
                               ToolTip="Level-gated features - higher levels unlock more!"/>
                    
                    <!-- Spiral Overlay - Lvl 10 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Hypnotic spiral animation overlay.&#x0a;Covers all screens with customizable opacity.&#x0a;Unlocks at Level 10.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="SpiralLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸŒ€ Spiral Overlay" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="ðŸ”’ Lvl 10" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 10 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="SpiralUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text="ðŸŒ€ Spiral Overlay" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="âœ” Unlocked" Foreground="#00E676" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable spiral overlay on all monitors"/>
                                    <CheckBox x:Name="ChkSpiralEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkSpiralEnabled_Changed" Unchecked="ChkSpiralEnabled_Changed"
                                              ToolTip="Show hypnotic spiral overlay"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Opacity"
                                               ToolTip="Spiral transparency level"/>
                                    <Slider Grid.Column="1" x:Name="SliderSpiralOpacity" Minimum="5" Maximum="50" Value="15" 
                                            Margin="10,0" ValueChanged="SliderSpiralOpacity_Changed"
                                            ToolTip="Spiral opacity (5% - 50%)"/>
                                    <TextBlock x:Name="TxtSpiralOpacity" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="15%"/>
                                </Grid>
                                <Button Content="ðŸ“ Select GIF" Style="{StaticResource OutlineButton}"
                                        Margin="0,10,0,0" Click="BtnSelectSpiral_Click"
                                        ToolTip="Choose a spiral GIF animation"/>
                                <TextBlock Text="âš  If you have display problems, try setting your monitor DPI scaling to the recommended settings"
                                           Foreground="#FFA500" FontSize="10" FontStyle="Italic" TextWrapping="Wrap"
                                           Margin="0,8,0,0" Opacity="0.8"/>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="SpiralFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/spiral_overlay.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Pink Filter - Lvl 10 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Pink color tint overlay for all screens.&#x0a;Subtle or intense, you choose!&#x0a;Unlocks at Level 10.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="PinkFilterLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ’— Pink Filter" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="ðŸ”’ Lvl 10" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 10 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="PinkFilterUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text="ðŸ’— Pink Filter" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="âœ” Unlocked" Foreground="#00E676" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable pink tint overlay"/>
                                    <CheckBox x:Name="ChkPinkFilterEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkPinkFilterEnabled_Changed" Unchecked="ChkPinkFilterEnabled_Changed"
                                              ToolTip="Apply pink color filter to all monitors"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Opacity"
                                               ToolTip="Pink filter intensity"/>
                                    <Slider Grid.Column="1" x:Name="SliderPinkOpacity" Minimum="5" Maximum="50" Value="10" 
                                            Margin="10,0" ValueChanged="SliderPinkOpacity_Changed"
                                            ToolTip="Filter opacity (5% - 50%)"/>
                                    <TextBlock x:Name="TxtPinkOpacity" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="10%"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="PinkFilterFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Pink_filter.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bubble Pop - Lvl 20 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Pop floating bubbles to earn XP!&#x0a;Fun mini-game that spawns periodically.&#x0a;Unlocks at Level 20.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="BubblesLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ«§ Bubble Pop" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="ðŸ”’ Lvl 20" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 20 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="BubblesUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text="ðŸ«§ Bubble Pop" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="âœ” Unlocked" Foreground="#00E676" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable bubble pop mini-game"/>
                                    <CheckBox x:Name="ChkBubblesEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBubblesEnabled_Changed" Unchecked="ChkBubblesEnabled_Changed"
                                              ToolTip="Pop bubbles to earn XP!"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Per Min"
                                               ToolTip="Bubbles spawned per minute"/>
                                    <Slider Grid.Column="1" x:Name="SliderBubbleFreq" Minimum="1" Maximum="15" Value="5" 
                                            Margin="10,0" ValueChanged="SliderBubbleFreq_Changed"
                                            ToolTip="Bubble spawn rate"/>
                                    <TextBlock x:Name="TxtBubbleFreq" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="5"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BubblePopFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Bubble_pop.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Lock Card - Lvl 35 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Screen lock that requires typing phrases.&#x0a;Reinforces conditioning through repetition.&#x0a;Unlocks at Level 35.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="LockCardLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ“ Lock Card" Foreground="#666666" FontWeight="Bold"/>
                                    <TextBlock Text="ðŸ”’ Lvl 35" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 35 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="LockCardUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text="ðŸ“ Lock Card" Foreground="White" FontWeight="Bold"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="â–¶ Test" Style="{StaticResource OutlineButton}" 
                                                Padding="10,4" FontSize="11" Margin="0,0,8,0"
                                                Click="BtnTestLockCard_Click"
                                                ToolTip="Test a lock card now"/>
                                        <TextBlock Text="âœ” Unlocked" Foreground="#00E676" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable lock card popups"/>
                                    <CheckBox x:Name="ChkLockCardEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkLockCardEnabled_Changed" Unchecked="ChkLockCardEnabled_Changed"
                                              ToolTip="Show lock cards that require typing to dismiss"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour"
                                               ToolTip="Lock cards shown per hour"/>
                                    <Slider Grid.Column="1" x:Name="SliderLockCardFreq" Minimum="1" Maximum="10" Value="2" 
                                            Margin="10,0" ValueChanged="SliderLockCardFreq_Changed"
                                            ToolTip="Lock card frequency (1-10 per hour)"/>
                                    <TextBlock x:Name="TxtLockCardFreq" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="2"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Repeats"
                                               ToolTip="Times the phrase must be typed"/>
                                    <Slider Grid.Column="1" x:Name="SliderLockCardRepeats" Minimum="1" Maximum="10" Value="3" 
                                            Margin="10,0" ValueChanged="SliderLockCardRepeats_Changed"
                                            ToolTip="Number of times to type the phrase (1-10)"/>
                                    <TextBlock x:Name="TxtLockCardRepeats" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="3x"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Strict Lock"
                                               ToolTip="Prevent ESC key from closing the lock card"/>
                                    <CheckBox x:Name="ChkLockCardStrict" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right" Checked="ChkLockCardStrict_Checked"
                                              ToolTip="âš  Cannot escape - must complete typing!"/>
                                </Grid>
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content="ðŸ“ Manage Phrases" Style="{StaticResource OutlineButton}" 
                                            Margin="0,0,5,0" Click="BtnManageLockCardPhrases_Click"
                                            ToolTip="Edit phrases that must be typed"/>
                                    <Button Grid.Column="1" Content="âš™" Style="{StaticResource OutlineButton}" 
                                            Width="40" Click="BtnLockCardSettings_Click"
                                            ToolTip="Customize lock card colors"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="LockCardFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Phrase_Lock.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bubble Count Game - Lvl 50 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Count the bubbles challenge!&#x0a;Memory and attention test for bonus XP.&#x0a;Unlocks at Level 50.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="Level50Locked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ«§ Bubble Count" Foreground="#666666" FontWeight="Bold"/>
                                    <TextBlock Text="ðŸ”’ Lvl 50" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 50 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="Level50Unlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ«§ Bubble Count" Foreground="{StaticResource PinkBrush}" FontWeight="Bold"/>
                                        <TextBlock Text="âœ” Lvl 50" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkBubbleCountEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBubbleCountEnabled_Changed" Unchecked="ChkBubbleCountEnabled_Changed"/>
                                </Grid>
                                
                                <StackPanel x:Name="BubbleCountSettings" Margin="0,10,0,0">
                                    <!-- Per Hour -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour"
                                                   ToolTip="How often the bubble count challenge appears"/>
                                        <TextBlock x:Name="TxtBubbleCountFreq" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="2"/>
                                    </Grid>
                                    <Slider x:Name="SliderBubbleCountFreq" Minimum="1" Maximum="10" Value="2" 
                                            Margin="0,1" ValueChanged="SliderBubbleCountFreq_Changed"
                                            ToolTip="Challenges per hour (1-10)"/>
                                    
                                    <!-- Difficulty -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Difficulty"/>
                                        <ComboBox x:Name="CmbBubbleCountDifficulty" Grid.Column="1" 
                                                  Width="100" Background="#1E1E3A" Foreground="White"
                                                  SelectionChanged="CmbBubbleCountDifficulty_Changed">
                                            <ComboBoxItem Content="Easy" Tag="0"/>
                                            <ComboBoxItem Content="Medium" Tag="1" IsSelected="True"/>
                                            <ComboBoxItem Content="Hard" Tag="2"/>
                                        </ComboBox>
                                    </Grid>
                                    
                                    <!-- Strict Lock -->
                                    <Grid Margin="0,8,0,0">
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Strict Lock"
                                                   ToolTip="Prevent closing until correctly answered"/>
                                        <CheckBox x:Name="ChkBubbleCountStrict" Style="{StaticResource ToggleStyle}" 
                                                  HorizontalAlignment="Right"
                                                  Checked="ChkBubbleCountStrict_Changed" Unchecked="ChkBubbleCountStrict_Changed"/>
                                    </Grid>
                                    
                                    <!-- Test Button -->
                                    <Button Content="ðŸŽ® Test Now" 
                                            Background="#40FFFFFF" Foreground="White" 
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnTestBubbleCount_Click"
                                            ToolTip="Trigger a bubble count challenge now"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BubbleCountFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Bubble_count.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bouncing Text - Lvl 60 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="DVD screensaver-style bouncing text!&#x0a;Customizable phrases bounce across screen.&#x0a;Unlocks at Level 60.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="Level60Locked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ“º Bouncing Text" Foreground="#666666" FontWeight="Bold"/>
                                    <TextBlock Text="ðŸ”’ Lvl 60" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 60 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="Level60Unlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ“º Bouncing Text" Foreground="{StaticResource PinkBrush}" FontWeight="Bold"/>
                                        <TextBlock Text="âœ” Lvl 60" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkBouncingTextEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBouncingTextEnabled_Changed" Unchecked="ChkBouncingTextEnabled_Changed"/>
                                </Grid>
                                
                                <StackPanel x:Name="BouncingTextSettings" Margin="0,10,0,0">
                                    <!-- Speed -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Speed"
                                                   ToolTip="How fast the text bounces"/>
                                        <TextBlock x:Name="TxtBouncingTextSpeed" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="5"/>
                                    </Grid>
                                    <Slider x:Name="SliderBouncingTextSpeed" Minimum="1" Maximum="10" Value="5" 
                                            Margin="0,1" ValueChanged="SliderBouncingTextSpeed_Changed"
                                            ToolTip="Bounce speed (1=slow, 10=fast)"/>
                                    
                                    <!-- Size -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Size"
                                                   ToolTip="Text size (50% to 300%)"/>
                                        <TextBlock x:Name="TxtBouncingTextSize" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="100%"/>
                                    </Grid>
                                    <Slider x:Name="SliderBouncingTextSize" Minimum="50" Maximum="300" Value="100" 
                                            Margin="0,1" ValueChanged="SliderBouncingTextSize_Changed"
                                            ToolTip="Text size (50%=small, 100%=normal, 300%=huge)"/>
                                    
                                    <!-- XP Info -->
                                    <TextBlock Text="ðŸ’° +10 XP per bounce!" 
                                               Foreground="#50C878" FontSize="12" 
                                               HorizontalAlignment="Center" Margin="0,8,0,0"/>
                                    
                                    <!-- Edit Phrases -->
                                    <Button Content="âœ Edit Phrases" 
                                            Background="#40FFFFFF" Foreground="White" 
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnEditBouncingText_Click"
                                            ToolTip="Customize the bouncing text phrases"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BouncingTextFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/bouncing_text.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Brain Drain - DISABLED FOR REWORK -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5" Opacity="0.5"
                            ToolTip="This feature is temporarily disabled while we improve performance.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text="ðŸ’§ Brain Drain" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                        <TextBlock Text="ðŸ”§ REWORK" Foreground="#FFA500" HorizontalAlignment="Right" FontSize="13" FontWeight="Bold"/>
                                    </Grid>
                                    <Border Background="#2A2A4A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                        <TextBlock Text="UP FOR REWORK - This feature is temporarily disabled while we optimize performance. Check back in a future update!"
                                                   Foreground="#FFA500" FontSize="11" TextWrapping="Wrap"/>
                                    </Border>
                                </StackPanel>

                                <!-- Hidden elements to prevent XAML binding errors -->
                                <StackPanel x:Name="BrainDrainLocked" Visibility="Collapsed"/>
                                <StackPanel x:Name="BrainDrainUnlocked" Visibility="Collapsed">
                                    <CheckBox x:Name="ChkBrainDrainEnabled" Visibility="Collapsed"/>
                                    <StackPanel x:Name="BrainDrainSettings" Visibility="Collapsed">
                                        <TextBlock x:Name="TxtBrainDrainIntensity"/>
                                        <Slider x:Name="SliderBrainDrainIntensity"/>
                                        <CheckBox x:Name="ChkBrainDrainHighRefresh"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!-- Feature Image (grayed out) -->
                            <Rectangle x:Name="BrainDrainFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}" Opacity="0.3">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/brain_drain.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Mind Wipe - Lvl 75 -->
                    <Border Background="#1E1E3A" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Random mind wipe audio effects!&#x0a;Escalates in frequency during sessions.&#x0a;Unlocks at Level 75.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="MindWipeLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text="ðŸ§  Mind Wipe" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="ðŸ”’ Lvl 75" Foreground="#666666" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 75 to Unlock" Foreground="{StaticResource PinkBrush}"
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>

                            <!-- Unlocked State -->
                            <StackPanel x:Name="MindWipeUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ§  Mind Wipe" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="14"/>
                                        <TextBlock Text="âœ” Lvl 75" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkMindWipeEnabled" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right"
                                              Checked="ChkMindWipeEnabled_Changed" Unchecked="ChkMindWipeEnabled_Changed"/>
                                </Grid>

                                <StackPanel x:Name="MindWipeSettings" Margin="0,10,0,0">
                                    <!-- Frequency -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Frequency"
                                                   ToolTip="How many times per hour (outside sessions)"/>
                                        <TextBlock x:Name="TxtMindWipeFreq" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="6/h"/>
                                    </Grid>
                                    <Slider x:Name="SliderMindWipeFreq" Minimum="1" Maximum="180" Value="6"
                                            Margin="0,1" ValueChanged="SliderMindWipeFreq_Changed"
                                            ToolTip="Mind wipe frequency (1-180 per hour)"/>

                                    <!-- Volume -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Volume"
                                                   ToolTip="Mind wipe audio volume (independent of other audio)"/>
                                        <TextBlock x:Name="TxtMindWipeVolume" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="50%"/>
                                    </Grid>
                                    <Slider x:Name="SliderMindWipeVolume" Minimum="0" Maximum="100" Value="50"
                                            Margin="0,1" ValueChanged="SliderMindWipeVolume_Changed"
                                            ToolTip="Volume level (0-100%)"/>

                                    <!-- Loop Toggle -->
                                    <Grid Margin="0,10,0,0">
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="ðŸ” Loop in Background"
                                                   ToolTip="Continuously loop a single track instead of random triggers"/>
                                        <CheckBox x:Name="ChkMindWipeLoop" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right"
                                                  Checked="ChkMindWipeLoop_Changed" Unchecked="ChkMindWipeLoop_Changed"/>
                                    </Grid>

                                    <!-- Test Button -->
                                    <Button Content="ðŸ”Š Test Now"
                                            Background="#40FFFFFF" Foreground="White"
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnTestMindWipe_Click"
                                            ToolTip="Play a mind wipe sound now"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>

                            <!-- Feature Image -->
                            <Rectangle x:Name="MindWipeFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Mind_Wipers.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Right Column: Scheduler + Ramp + Community stacked -->
            <StackPanel Grid.Column="1">
                <!-- Scheduler Box -->
                <Border x:Name="SchedulerPanel" Style="{StaticResource SectionPanel}" Margin="5">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ“… Scheduler" FontSize="14"/>
                        
                        <!-- Enable -->
                        <Grid Margin="0,3">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" FontSize="12"/>
                            <CheckBox x:Name="ChkSchedulerEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Time Range -->
                        <Grid Margin="0,3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="TxtStartTime" Grid.Column="0" Text="16:00" Background="#1E1E3A" 
                                     Foreground="White" BorderBrush="{StaticResource PinkBrush}" 
                                     Padding="6,4" FontSize="12" TextAlignment="Center"/>
                            <TextBlock Grid.Column="1" Text="â†’" Foreground="White" FontSize="12" Margin="5,0" VerticalAlignment="Center"/>
                            <TextBox x:Name="TxtEndTime" Grid.Column="2" Text="22:00" Background="#1E1E3A" 
                                     Foreground="White" BorderBrush="{StaticResource PinkBrush}" 
                                     Padding="6,4" FontSize="12" TextAlignment="Center"/>
                        </Grid>
                        
                        <!-- Days -->
                        <WrapPanel Margin="0,3">
                            <CheckBox x:Name="ChkMon" Content="M" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkTue" Content="T" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkWed" Content="W" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkThu" Content="T" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkFri" Content="F" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkSat" Content="S" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkSun" Content="S" Foreground="White" Margin="0,0,0,0" IsChecked="True" FontSize="10"/>
                        </WrapPanel>
                    </StackPanel>
                </Border>
                
                <!-- Intensity Ramp Box -->
                <Border x:Name="RampPanel" Style="{StaticResource SectionPanel}" Margin="5">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}" Text="âš¡ Intensity Ramp" FontSize="14"/>
                        
                        <!-- Enable Ramp -->
                        <Grid Margin="0,3">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" FontSize="12"/>
                            <CheckBox x:Name="ChkRampEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Duration -->
                        <Grid Margin="0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Duration" FontSize="11"/>
                            <Slider Grid.Column="1" x:Name="SliderRampDuration" Minimum="10" Maximum="180" Value="60" 
                                    Margin="5,0" ValueChanged="SliderRampDuration_Changed"/>
                            <TextBlock x:Name="TxtRampDuration" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="60 min" FontSize="11"/>
                        </Grid>
                        
                        <!-- Multiplier -->
                        <Grid Margin="0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Multiplier" FontSize="11"/>
                            <Slider Grid.Column="1" x:Name="SliderMultiplier" Minimum="1" Maximum="3" Value="1.5" 
                                    Margin="5,0" ValueChanged="SliderMultiplier_Changed"/>
                            <TextBlock x:Name="TxtMultiplier" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="1.5x" FontSize="11"/>
                        </Grid>
                        
                        <!-- End at Ramp -->
                        <Grid Margin="0,2">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="End at Complete" FontSize="11"/>
                            <CheckBox x:Name="ChkEndAtRamp" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Ramp Links -->
                        <TextBlock Text="Link to Ramp" Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,5,0,2"/>
                        <Border Background="#1E1E3A" CornerRadius="4" Padding="6,4">
                            <WrapPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkFlash" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Flash" Foreground="#AAA" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkSpiral" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Spiral" Foreground="#AAA" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkPink" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Pink" Foreground="#AAA" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkMaster" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Master" Foreground="#AAA" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                                    <CheckBox x:Name="ChkRampLinkSubAudio" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Sub" Foreground="#AAA" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                            </WrapPanel>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- Community Discord -->
                <Border Style="{StaticResource SectionPanel}" Margin="5" MinHeight="100"
                        ToolTip="Join our Discord community!">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ’¬ Community" Foreground="{StaticResource PinkBrush}"
                                   FontSize="13" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,5,0,5"/>
                        <Button x:Name="BtnDiscord" Click="BtnDiscord_Click" Cursor="Hand"
                                ToolTip="Click to join our Discord server!">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="Transparent">
                                        <Border CornerRadius="8" ClipToBounds="True">
                                            <Image x:Name="DiscordImage"
                                                   Source="pack://application:,,,/Resources/discord.png"
                                                   Width="120" Stretch="Uniform" RenderTransformOrigin="0.5,0.5">
                                                <Image.RenderTransform>
                                                    <ScaleTransform x:Name="ImageScale" ScaleX="1" ScaleY="1"/>
                                                </Image.RenderTransform>
                                            </Image>
                                        </Border>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <EventTrigger RoutedEvent="MouseEnter">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale"
                                                                     Storyboard.TargetProperty="ScaleX"
                                                                     To="1.05" Duration="0:0:0.15"/>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale"
                                                                     Storyboard.TargetProperty="ScaleY"
                                                                     To="1.05" Duration="0:0:0.15"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                        <EventTrigger RoutedEvent="MouseLeave">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale"
                                                                     Storyboard.TargetProperty="ScaleX"
                                                                     To="1" Duration="0:0:0.15"/>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale"
                                                                     Storyboard.TargetProperty="ScaleY"
                                                                     To="1" Duration="0:0:0.15"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Discord Rich Presence Toggle - Pink themed -->
                        <CheckBox x:Name="ChkDiscordRichPresence"
                                  HorizontalAlignment="Center"
                                  Margin="0,8,0,5"
                                  ToolTip="Show your activity status in Discord"
                                  Checked="ChkDiscordRichPresence_Changed"
                                  Unchecked="ChkDiscordRichPresence_Changed">
                            <CheckBox.Template>
                                <ControlTemplate TargetType="CheckBox">
                                    <StackPanel Orientation="Horizontal" Cursor="Hand">
                                        <Border x:Name="checkBorder" Width="14" Height="14"
                                                Background="#353550" BorderBrush="#FF69B4" BorderThickness="1.5"
                                                CornerRadius="3" VerticalAlignment="Center">
                                            <TextBlock x:Name="checkMark" Text="âœ“" Foreground="#FF69B4"
                                                       FontSize="10" FontWeight="Bold"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Visibility="Collapsed" Margin="0,-1,0,0"/>
                                        </Border>
                                        <TextBlock Text="Rich Presence" Foreground="#A0A0A0" FontSize="10"
                                                   VerticalAlignment="Center" Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                            <Setter TargetName="checkBorder" Property="Background" Value="#452545"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="checkBorder" Property="BorderBrush" Value="#FF85C1"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </CheckBox.Template>
                        </CheckBox>
                    </StackPanel>
                </Border>

                <!-- App Info / Updates -->
                <Border Style="{StaticResource SectionPanel}" Margin="5" Padding="10,8">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="App Info" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtVersion" Text="Version" Foreground="#888888"
                                   FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <Button x:Name="BtnCheckUpdates" Content="Check for Updates"
                                Click="BtnCheckUpdates_Click" Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#252542"/>
                                    <Setter Property="Foreground" Value="#E0E0E0"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="16,8"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="{TemplateBinding Background}"
                                                        CornerRadius="6" Padding="{TemplateBinding Padding}"
                                                        BorderBrush="#404060" BorderThickness="1">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="#353560"/>
                                                        <Setter TargetName="border" Property="BorderBrush" Value="#FF69B4"/>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>

        <!-- Achievements Tab -->
        <Border x:Name="AchievementsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed"
                Style="{StaticResource SectionPanel}">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Style="{StaticResource SectionHeader}" Text="ðŸ† Achievements" Margin="0,0,0,10"/>
                    <TextBlock Text="Complete challenges to unlock achievements! Locked achievements are blurred until earned." 
                               Foreground="#888888" FontSize="12" Margin="0,0,0,15"/>
                    
                    <!-- Achievement Grid - 7 columns -->
                    <ItemsControl x:Name="AchievementsGrid">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="7"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                    
                    <!-- Dynamic Achievement Grid (populated in code-behind) -->
                    <UniformGrid x:Name="AchievementGrid" Columns="7" Margin="0,5">
                    </UniformGrid>
                    
                    <TextBlock x:Name="TxtAchievementCount" Text="0 / 25 Achievements Unlocked" Foreground="#888888" FontSize="14"
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Companion Tab -->
        <Grid x:Name="CompanionTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <Border Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">

                        <!-- Companion Settings -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Companion Settings" Foreground="#FF69B4" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                                <!-- Avatar Toggle -->
                                <Grid Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="Show Companion" Foreground="White" FontSize="13"/>
                                        <TextBlock Text="Display the avatar companion window" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkAvatarEnabledCompanion" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" VerticalAlignment="Center"
                                              IsChecked="True"
                                              Checked="ChkAvatarEnabled_Changed" Unchecked="ChkAvatarEnabled_Changed"/>
                                </Grid>

                                <!-- Detach Button -->
                                <Grid Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="Floating Companion" Foreground="White" FontSize="13"/>
                                        <TextBlock x:Name="TxtDetachStatusCompanion" Text="Anchored to window" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <Button x:Name="BtnDetachCompanionTab" HorizontalAlignment="Right"
                                            Content="Detach"
                                            Background="#252542" Foreground="White"
                                            BorderBrush="{StaticResource PinkBrush}" BorderThickness="1"
                                            Padding="12,6" FontSize="11"
                                            Cursor="Hand"
                                            Click="BtnDetachCompanion_Click"/>
                                </Grid>

                                <!-- Idle Interval Slider -->
                                <StackPanel>
                                    <Grid>
                                        <StackPanel>
                                            <TextBlock Text="Idle Giggle Interval" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="How often the companion speaks when idle" Foreground="#808080" FontSize="11"/>
                                        </StackPanel>
                                        <TextBlock x:Name="TxtIdleIntervalCompanion" Text="120s" Foreground="#FF69B4"
                                                   HorizontalAlignment="Right" VerticalAlignment="Center"
                                                   FontSize="13" FontWeight="Bold"/>
                                    </Grid>
                                    <Slider x:Name="SliderIdleIntervalCompanion"
                                            Style="{StaticResource PinkSlider}"
                                            Minimum="5" Maximum="300" Value="120"
                                            Margin="0,8,0,0"
                                            ValueChanged="SliderIdleInterval_ValueChanged"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- AI Personality -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="AI Personality" Foreground="#9370DB" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                                <TextBlock Text="Customize your companion's personality, reactions, and knowledge base."
                                           Foreground="#808080" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,12"/>

                                <Button x:Name="BtnCustomizeCompanion" Content="Customize AI Companion"
                                        Background="#252542" Foreground="White"
                                        BorderBrush="#9370DB" BorderThickness="1"
                                        Padding="12,8" FontSize="12"
                                        HorizontalAlignment="Left"
                                        Cursor="Hand"
                                        Click="BtnCustomizeCompanion_Click"/>
                            </StackPanel>
                        </Border>

                        <!-- Trigger Mode -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Trigger Mode" Foreground="#9370DB" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                                <!-- Trigger Mode Toggle -->
                                <Grid Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="Enable Triggers" Foreground="White" FontSize="13"/>
                                        <TextBlock Text="Random conditioning phrases with audio" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkTriggerModeCompanion" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" VerticalAlignment="Center"
                                              Checked="ChkTriggerMode_Changed" Unchecked="ChkTriggerMode_Changed"/>
                                </Grid>

                                <!-- Trigger Interval Slider -->
                                <StackPanel x:Name="TriggerSettingsPanelCompanion" Visibility="Collapsed">
                                    <Grid>
                                        <StackPanel>
                                            <TextBlock Text="Trigger Interval" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="Seconds between trigger phrases" Foreground="#808080" FontSize="11"/>
                                        </StackPanel>
                                        <TextBlock x:Name="TxtTriggerIntervalCompanion" Text="60s" Foreground="#9370DB"
                                                   HorizontalAlignment="Right" VerticalAlignment="Center"
                                                   FontSize="13" FontWeight="Bold"/>
                                    </Grid>
                                    <Slider x:Name="SliderTriggerIntervalCompanion"
                                            Style="{StaticResource PinkSlider}"
                                            Minimum="10" Maximum="600" Value="60"
                                            Margin="0,8,0,0"
                                            ValueChanged="SliderTriggerInterval_ValueChanged"/>

                                    <!-- Edit Triggers Button -->
                                    <Button x:Name="BtnEditTriggersCompanion" Content="Edit Triggers"
                                            Background="#252542" Foreground="White"
                                            BorderBrush="#9370DB" BorderThickness="1"
                                            Padding="12,6" Margin="0,12,0,0"
                                            HorizontalAlignment="Left" FontSize="11"
                                            Cursor="Hand"
                                            Click="BtnEditTriggers_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Quick Controls -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Quick Controls" Foreground="#FF69B4" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                                <!-- Mute Avatar -->
                                <Grid Margin="0,0,0,8">
                                    <StackPanel>
                                        <TextBlock Text="Mute Avatar" Foreground="White" FontSize="13"/>
                                        <TextBlock Text="Hide speech bubbles and sounds" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkMuteAvatarCompanion" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" VerticalAlignment="Center"
                                              Checked="ChkMuteAvatar_Changed" Unchecked="ChkMuteAvatar_Changed"/>
                                </Grid>

                                <!-- Mute Whispers -->
                                <Grid Margin="0,0,0,8">
                                    <StackPanel>
                                        <TextBlock Text="Mute Whispers" Foreground="White" FontSize="13"/>
                                        <TextBlock Text="Mute subliminal audio" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkMuteWhispersCompanion" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" VerticalAlignment="Center"
                                              Checked="ChkMuteWhispers_Changed" Unchecked="ChkMuteWhispers_Changed"/>
                                </Grid>

                                <!-- Pause Browser -->
                                <Grid>
                                    <StackPanel>
                                        <TextBlock Text="Pause Browser Audio" Foreground="White" FontSize="13"/>
                                        <TextBlock Text="Pause/mute embedded browser" Foreground="#808080" FontSize="11"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkPauseBrowserCompanion" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" VerticalAlignment="Center"
                                              Checked="ChkPauseBrowser_Changed" Unchecked="ChkPauseBrowser_Changed"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Interaction Tips -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15"
                                BorderBrush="#FF69B4" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="Interaction Tips" Foreground="#FF69B4" FontSize="14" FontWeight="Bold"/>
                                <TextBlock Text="â€¢ Click avatar for achievement progress" Foreground="#808080" FontSize="12" Margin="0,8,0,0"/>
                                <TextBlock Text="â€¢ Right-click avatar for quick menu" Foreground="#808080" FontSize="12" Margin="0,3,0,0"/>
                                <TextBlock Text="â€¢ Double-click to chat (Patreon)" Foreground="#808080" FontSize="12" Margin="0,3,0,0"/>
                                <TextBlock Text="â€¢ Drag to reposition when detached" Foreground="#808080" FontSize="12" Margin="0,3,0,0"/>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Patreon Exclusives Tab -->
        <Grid x:Name="PatreonTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <Border Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Style="{StaticResource SectionHeader}" Text="Patreon Exclusives" FontSize="18" Margin="0,0,0,15"/>

                        <!-- Patreon Login Status -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                                BorderBrush="#FF424D" BorderThickness="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock x:Name="TxtPatreonStatus" Text="Not Connected" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                    <TextBlock x:Name="TxtPatreonTier" Text="Login to unlock exclusive features" Foreground="#808080" FontSize="12"/>
                                </StackPanel>

                                <Button x:Name="BtnPatreonLogin" Grid.Column="1"
                                        Content="Login with Patreon"
                                        Background="#FF424D" Foreground="White"
                                        BorderThickness="0" Padding="15,8"
                                        FontWeight="Bold" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnPatreonLogin_Click"/>
                            </Grid>
                        </Border>

                        <!-- Discord Login Status -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                                BorderBrush="#5865F2" BorderThickness="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock x:Name="TxtDiscordStatus" Text="Not Connected" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                    <TextBlock x:Name="TxtDiscordInfo" Text="Link Discord for community features" Foreground="#808080" FontSize="12"/>
                                </StackPanel>

                                <Button x:Name="BtnDiscordLogin" Grid.Column="1"
                                        Content="Login with Discord"
                                        Background="#5865F2" Foreground="White"
                                        BorderThickness="0" Padding="15,8"
                                        FontWeight="Bold" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnDiscordLogin_Click"/>
                            </Grid>
                        </Border>

                        <!-- Feature Boxes Side by Side -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- LEVEL 1: AI Chatbot Feature Box -->
                            <Border Grid.Column="0" Background="#1E1E3A" CornerRadius="8" Padding="15">
                                <StackPanel>
                                    <!-- Locked State -->
                                    <StackPanel x:Name="AiChatLocked" Visibility="Collapsed">
                                        <Grid>
                                            <TextBlock Text="AI Companion Chat" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Level 1" Foreground="#666666" HorizontalAlignment="Right" FontSize="12"/>
                                        </Grid>
                                        <TextBlock Text="Support on Patreon to unlock AI-powered conversations"
                                                   Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                    </StackPanel>

                                    <!-- Unlocked State (Visible for testing) -->
                                    <StackPanel x:Name="AiChatUnlocked" Visibility="Visible">
                                        <Grid>
                                            <TextBlock Text="AI Companion Chat" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Unlocked" Foreground="#00E676" HorizontalAlignment="Right" FontSize="12"/>
                                        </Grid>

                                        <!-- AI Chat Toggle -->
                                        <Grid Margin="0,12,0,0">
                                            <StackPanel>
                                                <TextBlock Text="Enable AI Chat" Foreground="White" FontSize="12"/>
                                                <TextBlock Text="Double-click avatar to chat" Foreground="#808080" FontSize="10"/>
                                            </StackPanel>
                                            <CheckBox x:Name="ChkAiChat" Style="{StaticResource ToggleStyle}"
                                                      HorizontalAlignment="Right" VerticalAlignment="Center"
                                                      IsChecked="True"
                                                      Checked="ChkAiChat_Changed" Unchecked="ChkAiChat_Changed"/>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Window Awareness Feature Box (Patreon) -->
                            <Border Grid.Column="2" Background="#1E1E3A" CornerRadius="8" Padding="15">
                                <StackPanel>
                                    <!-- Locked State -->
                                    <StackPanel x:Name="AwarenessLocked" Visibility="Collapsed">
                                        <Grid>
                                            <TextBlock Text="Window Awareness" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="ðŸ”’ Patreon" Foreground="#9B59B6" HorizontalAlignment="Right" FontSize="12"/>
                                        </Grid>
                                        <TextBlock Text="Support on Patreon to unlock smart activity detection"
                                                   Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                    </StackPanel>

                                    <!-- Unlocked State (Visible for testing) -->
                                    <StackPanel x:Name="AwarenessUnlocked" Visibility="Visible">
                                        <Grid>
                                            <TextBlock Text="Window Awareness" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Unlocked" Foreground="#00E676" HorizontalAlignment="Right" FontSize="12"/>
                                        </Grid>

                                        <!-- Awareness Mode Toggle -->
                                        <Grid Margin="0,12,0,0">
                                            <StackPanel>
                                                <TextBlock Text="Enable Awareness" Foreground="White" FontSize="12"/>
                                                <TextBlock Text="Reacts to your activity" Foreground="#808080" FontSize="10"/>
                                            </StackPanel>
                                            <CheckBox x:Name="ChkAwarenessMode" Style="{StaticResource ToggleStyle}"
                                                      HorizontalAlignment="Right" VerticalAlignment="Center"
                                                      IsChecked="False"
                                                      Checked="ChkAwarenessMode_Changed" Unchecked="ChkAwarenessMode_Changed"/>
                                        </Grid>

                                        <!-- Privacy Warning -->
                                        <Border Background="#2A1A1A" CornerRadius="6" Padding="8" Margin="0,10,0,0" BorderBrush="#FF6B6B" BorderThickness="1">
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="âš ï¸" FontSize="12" VerticalAlignment="Center"/>
                                                        <TextBlock Text=" Privacy Notice" Foreground="#FF6B6B" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                    <Button x:Name="BtnPrivacySpoiler" Content="â–¶ Click to reveal"
                                                            Background="Transparent" Foreground="#808080" BorderThickness="0"
                                                            HorizontalAlignment="Right" FontSize="10" Cursor="Hand"
                                                            Click="BtnPrivacySpoiler_Click"/>
                                                </Grid>
                                                <TextBlock x:Name="TxtPrivacyDetails" Visibility="Collapsed"
                                                           TextWrapping="Wrap" Foreground="#CCCCCC" FontSize="10" Margin="0,8,0,0"
                                                           Text="This feature reads the name of the active window and browser tab, tracks how long you've been on that window, and uses this information to generate AI responses. Data is sent to our secure proxy server for processing. No data is stored permanently."/>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Awareness Settings (shown when enabled) -->
                        <Border x:Name="AwarenessSettingsPanel" Background="#1E1E3A" CornerRadius="8" Padding="15" Margin="0,0,0,10" Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock Text="Awareness Settings" Foreground="#FF69B4" FontSize="13" FontWeight="Bold" Margin="0,0,0,10"/>

                                <!-- Reaction Cooldown -->
                                <Border Background="#252542" CornerRadius="6" Padding="10">
                                    <StackPanel>
                                        <Grid>
                                            <TextBlock Text="Reaction Cooldown" Foreground="White" FontSize="11"/>
                                            <TextBlock x:Name="TxtAwarenessCooldown" Text="90s" Foreground="#FF69B4"
                                                       HorizontalAlignment="Right" FontSize="11" FontWeight="Bold"/>
                                        </Grid>
                                        <Slider x:Name="SliderAwarenessCooldown"
                                                Style="{StaticResource PinkSlider}"
                                                Minimum="10" Maximum="300" Value="90"
                                                Margin="0,8,0,0"
                                                ValueChanged="SliderAwarenessCooldown_ValueChanged"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Slut Mode (Patreon Only) -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,10,0,0">
                            <Grid>
                                <StackPanel>
                                    <TextBlock Text="Slut Mode" Foreground="#FF6B6B" FontSize="13" FontWeight="Bold"/>
                                    <TextBlock Text="Explicit AI responses (Patreon only)" Foreground="#808080" FontSize="11"/>
                                </StackPanel>
                                <CheckBox x:Name="ChkSlutMode" Style="{StaticResource ToggleStyle}"
                                          HorizontalAlignment="Right" VerticalAlignment="Center"
                                          Checked="ChkSlutMode_Changed" Unchecked="ChkSlutMode_Changed"/>
                                <!-- Lock overlay for non-patrons - covers the toggle -->
                                <Border x:Name="SlutModeLocked" Background="#F01A1A2E" CornerRadius="10"
                                        HorizontalAlignment="Right" VerticalAlignment="Center"
                                        Visibility="Collapsed" IsHitTestVisible="True"
                                        BorderBrush="#9B59B6" BorderThickness="1" Padding="8,3">
                                    <TextBlock Text="ðŸ”’ Patreon" Foreground="#9B59B6" FontSize="10"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Haptics Control - Two Side-by-Side Boxes -->
                        <Grid Margin="0,10,0,0">
                            <!-- Haptics Content (enabled for whitelisted testers) -->
                            <Grid x:Name="HapticsContentGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left Box: Connection Settings -->
                            <Grid Grid.Column="0">
                                <Border x:Name="HapticsConnectionBox" Background="#1E1E3A" CornerRadius="8" Padding="15"
                                        BorderBrush="#9B59B6" BorderThickness="1">
                                    <StackPanel>
                                    <Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Haptic Connection" Foreground="#9B59B6" FontSize="14" FontWeight="Bold"/>
                                            <TextBlock Text=" (Patreon)" Foreground="#9B59B6" FontSize="12" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkHapticsEnabled" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" VerticalAlignment="Center"
                                                  Checked="ChkHapticsEnabled_Changed" Unchecked="ChkHapticsEnabled_Changed"/>
                                    </Grid>
                                    <Grid Margin="0,4,0,0">
                                        <TextBlock Text="Connect to Lovense or Buttplug.io devices" Foreground="#808080" FontSize="11"/>
                                        <Button x:Name="BtnHapticsHelp" Content="Need help setting up?"
                                                HorizontalAlignment="Right" Background="Transparent"
                                                Foreground="#FF69B4" BorderThickness="0" FontSize="10"
                                                Cursor="Hand" Click="BtnHapticsHelp_Click" Padding="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <TextBlock Text="{TemplateBinding Content}"
                                                                           Foreground="{TemplateBinding Foreground}"
                                                                           FontSize="{TemplateBinding FontSize}"
                                                                           TextDecorations="Underline"/>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>

                                <!-- Provider Selection -->
                                <Grid Margin="0,12,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="Provider:" Foreground="White" FontSize="12" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="CmbHapticProvider" Grid.Column="1" Margin="10,0"
                                              Background="#252542" Foreground="Black" BorderThickness="0"
                                              SelectionChanged="CmbHapticProvider_SelectionChanged">
                                        <ComboBoxItem Content="Lovense Connect" Tag="Lovense" Foreground="Black"/>
                                        <ComboBoxItem Content="Buttplug.io (Intiface)" Tag="Buttplug" Foreground="Black"/>
                                    </ComboBox>
                                    <Button x:Name="BtnHapticConnect" Grid.Column="2" Content="Connect"
                                            Background="#FF69B4" Foreground="White"
                                            BorderThickness="0" Padding="12,6"
                                            FontSize="11" Cursor="Hand"
                                            Click="BtnHapticConnect_Click"/>
                                </Grid>
<!-- URL Input with Tooltip Guide -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="URL:" Foreground="White" FontSize="11" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtHapticUrl" Grid.Column="1" Margin="10,0,0,0"
                                             Background="#FFFFFF" Foreground="Black" BorderThickness="1"
                                             BorderBrush="#404060" Padding="8,4" FontSize="11"
                                             TextChanged="TxtHapticUrl_TextChanged">
                                        <TextBox.ToolTip>
                                            <ToolTip Background="#1E1E3A" BorderBrush="#9B59B6" BorderThickness="1" Padding="12">
                                                <StackPanel MaxWidth="280">
                                                    <TextBlock Text="Connection Guide" Foreground="#FF69B4" FontSize="13" FontWeight="Bold" Margin="0,0,0,8"/>

                                                    <TextBlock Text="Lovense Connect:" Foreground="#9B59B6" FontSize="11" FontWeight="Bold"/>
                                                    <TextBlock Foreground="#CCCCCC" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,6">
                                                        <Run Text="1."/><Run Text=" Open Lovense Remote app" Foreground="White"/>
                                                        <LineBreak/><Run Text="2."/><Run Text=" Go to Settings â†’ Game Mode" Foreground="White"/>
                                                        <LineBreak/><Run Text="3."/><Run Text=" Enable Game Mode, note the IP" Foreground="White"/>
                                                        <LineBreak/><Run Text="4."/><Run Text=" Enter: http://[IP]:30010" Foreground="#FF69B4"/>
                                                    </TextBlock>

                                                    <TextBlock Text="Buttplug.io (Intiface):" Foreground="#9B59B6" FontSize="11" FontWeight="Bold"/>
                                                    <TextBlock Foreground="#CCCCCC" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,0">
                                                        <Run Text="1."/><Run Text=" Open Intiface Central" Foreground="White"/>
                                                        <LineBreak/><Run Text="2."/><Run Text=" Click 'Start Server'" Foreground="White"/>
                                                        <LineBreak/><Run Text="3."/><Run Text=" Click 'Start Scanning' for devices" Foreground="White"/>
                                                        <LineBreak/><Run Text="4."/><Run Text=" Use: ws://localhost:12345" Foreground="#FF69B4"/>
                                                    </TextBlock>
                                                </StackPanel>
                                            </ToolTip>
                                        </TextBox.ToolTip>
                                    </TextBox>
                                </Grid>
                                <TextBlock x:Name="TxtHapticUrlHint"
                                           Text="Lovense: Enter IP from Lovense Remote â†’ Settings â†’ Game Mode"
                                           Foreground="#808080" FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap"/>

                                <!-- Connection Status -->
                                <Border Background="#252542" CornerRadius="6" Padding="10" Margin="0,10,0,0">
                                    <StackPanel>
                                        <Grid>
                                            <TextBlock Text="Status:" Foreground="#808080" FontSize="11"/>
                                            <TextBlock x:Name="TxtHapticStatus" Text="Disconnected"
                                                       Foreground="#FF6B6B" FontSize="11" HorizontalAlignment="Right"/>
                                        </Grid>
                                        <TextBlock x:Name="TxtHapticDevices" Text="No devices"
                                                   Foreground="#606060" FontSize="10" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Intensity Slider -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Intensity:" Foreground="White" FontSize="11" VerticalAlignment="Center"/>
                                    <Slider x:Name="SliderHapticIntensity" Grid.Column="1"
                                            Style="{StaticResource PinkSlider}"
                                            Minimum="0" Maximum="100" Value="70" Margin="10,0"
                                            ValueChanged="SliderHapticIntensity_ValueChanged"/>
                                    <TextBlock x:Name="TxtHapticIntensity" Grid.Column="2" Text="70%"
                                               Foreground="#FF69B4" FontSize="11" FontWeight="Bold"/>
                                </Grid>

                                <!-- Test Button -->
                                <Button x:Name="BtnHapticTest" Content="Test Vibration"
                                        Background="#252542" Foreground="White"
                                        BorderBrush="#9B59B6" BorderThickness="1"
                                        Padding="12,6" Margin="0,10,0,0"
                                        HorizontalAlignment="Left" FontSize="11" Cursor="Hand"
                                        Click="BtnHapticTest_Click"/>
                                    </StackPanel>
                                </Border>
                                <!-- Lock Overlay for Left Box -->
                                <Border x:Name="HapticsConnectionLock" Background="#80000000" CornerRadius="8" Visibility="Collapsed">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ”’" FontSize="32" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Patreon Only" Foreground="#9B59B6" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Right Box: Feature Sliders -->
                            <Grid Grid.Column="2">
                                <Border x:Name="HapticsFeatureBox" Background="#1E1E3A" CornerRadius="8" Padding="15"
                                        BorderBrush="#9B59B6" BorderThickness="1">
                                    <StackPanel>
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Feature Intensity" Foreground="#9B59B6" FontSize="14" FontWeight="Bold"/>
                                        <TextBlock Text=" (Patreon)" Foreground="#9B59B6" FontSize="12" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                                <TextBlock Text="Adjust vibration strength per feature" Foreground="#808080" FontSize="11" Margin="0,4,0,8"/>

                                        <!-- Bubble Pop -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticBubble" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Bubble"/>
                                            <TextBlock Grid.Column="1" Text="Bubbles" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticBubble" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Bubble"/>
                                            <TextBlock x:Name="TxtHapticBubble" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticBubbleMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Bubble">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Flash Display -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticFlashDisplay" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="FlashDisplay"/>
                                            <TextBlock Grid.Column="1" Text="Flash Show" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticFlashDisplay" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="FlashDisplay"/>
                                            <TextBlock x:Name="TxtHapticFlashDisplay" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticFlashDisplayMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="FlashDisplay">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Flash Click -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticFlashClick" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="FlashClick"/>
                                            <TextBlock Grid.Column="1" Text="Flash Click" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticFlashClick" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="FlashClick"/>
                                            <TextBlock x:Name="TxtHapticFlashClick" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticFlashClickMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="FlashClick">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Video -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticVideo" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Video"/>
                                            <TextBlock Grid.Column="1" Text="Videos" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticVideo" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Video"/>
                                            <TextBlock x:Name="TxtHapticVideo" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticVideoMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Video">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Target Hit (video attention targets) -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticTargetHit" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="TargetHit"/>
                                            <TextBlock Grid.Column="1" Text="Target Hit" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticTargetHit" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="70" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="TargetHit"/>
                                            <TextBlock x:Name="TxtHapticTargetHit" Grid.Column="3" Text="70%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticTargetHitMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="TargetHit">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Subliminal -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticSubliminal" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Subliminal"/>
                                            <TextBlock Grid.Column="1" Text="Subliminals" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticSubliminal" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Subliminal"/>
                                            <TextBlock x:Name="TxtHapticSubliminal" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticSubliminalMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Subliminal">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Level Up -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticLevelUp" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="LevelUp"/>
                                            <TextBlock Grid.Column="1" Text="Level Up" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticLevelUp" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="LevelUp"/>
                                            <TextBlock x:Name="TxtHapticLevelUp" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticLevelUpMode" Grid.Column="4" SelectedIndex="4" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="LevelUp">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Achievement -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticAchievement" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Achievement"/>
                                            <TextBlock Grid.Column="1" Text="Achievements" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticAchievement" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Achievement"/>
                                            <TextBlock x:Name="TxtHapticAchievement" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticAchievementMode" Grid.Column="4" SelectedIndex="3" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Achievement">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>
                                        <!-- Bouncing Text -->
                                        <Grid Margin="0,3">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticBouncingText" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="BouncingText"/>
                                            <TextBlock Grid.Column="1" Text="Bounce Text" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticBouncingText" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="BouncingText"/>
                                            <TextBlock x:Name="TxtHapticBouncingText" Grid.Column="3" Text="50%" Foreground="#808080" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticBouncingTextMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="#252542" Foreground="#FF69B4" BorderBrush="#9B59B6"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="BouncingText">
                                                <ComboBoxItem Content="Constant" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Pulse" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Wave" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Escalate" Foreground="#FF69B4"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="#FF69B4"/>
                                            </ComboBox>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!-- Lock Overlay for Right Box -->
                                <Border x:Name="HapticsFeatureLock" Background="#80000000" CornerRadius="8" Visibility="Collapsed">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ”’" FontSize="32" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Patreon Only" Foreground="#9B59B6" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                            </Grid>

                            <!-- Patreon Only Overlay (hidden for Patreon supporters) -->
                            <Border x:Name="HapticsComingSoonOverlay" Background="#CC1A1A2E" CornerRadius="8">
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock Text="Patreon Only" Foreground="#FF69B4" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="#FF69B4" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                    <TextBlock Text="Unlock haptic feedback by supporting on Patreon"
                                               Foreground="#AAAAAA" FontSize="13" HorizontalAlignment="Center" Margin="0,8,0,0"/>
                                    <TextBlock Text="Lovense &amp; Buttplug.io support"
                                               Foreground="#9B59B6" FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Bambi Takeover - Two Side-by-Side Boxes (like Haptics) -->
                        <Grid Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left Box: Controls -->
                            <Grid Grid.Column="0">
                                <Border Background="#1E1E3A" CornerRadius="8" Padding="12" BorderBrush="#FF69B4" BorderThickness="1">
                                    <Grid>
                                        <!-- Locked State -->
                                        <StackPanel x:Name="AutonomyLocked" Visibility="Visible">
                                            <Grid>
                                                <TextBlock Text="ðŸ¤– Bambi Takeover" Foreground="#666666" FontWeight="Bold" FontSize="14"/>
                                                <TextBlock x:Name="TxtAutonomyLockStatus" Text="ðŸ”’ Patreon Only" Foreground="#9B59B6" HorizontalAlignment="Right" FontSize="11"/>
                                            </Grid>
                                            <TextBlock x:Name="TxtAutonomyLockMessage" Text="Support on Patreon to unlock" Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,4,0,0"/>
                                        </StackPanel>

                                        <!-- Unlocked State -->
                                        <StackPanel x:Name="AutonomyUnlocked" Visibility="Collapsed">
                                            <!-- Header -->
                                            <Grid>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¤– Bambi Takeover" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="14"/>
                                                    <Border Background="#2A1A3A" CornerRadius="4" Padding="6,2" Margin="8,0,0,0" BorderBrush="#FF69B4" BorderThickness="1">
                                                        <TextBlock Text="No engine needed" Foreground="#FF69B4" FontSize="9"/>
                                                    </Border>
                                                </StackPanel>
                                            </Grid>

                                            <StackPanel x:Name="AutonomySettings" Margin="0,8,0,0">
                                                <!-- Sliders: 2x2 grid -->
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="6"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <StackPanel Grid.Row="0" Grid.Column="0">
                                                        <Grid><TextBlock Text="Interval" Foreground="#AAA" FontSize="10"/><TextBlock x:Name="TxtAutonomyInterval" Text="60s" Foreground="#FF69B4" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyInterval" Minimum="30" Maximum="300" Value="60" Height="18" ValueChanged="SliderAutonomyInterval_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="0" Grid.Column="2">
                                                        <Grid><TextBlock Text="Cooldown" Foreground="#AAA" FontSize="10"/><TextBlock x:Name="TxtAutonomyCooldown" Text="30s" Foreground="#FF69B4" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyCooldown" Minimum="10" Maximum="300" Value="30" Height="18" ValueChanged="SliderAutonomyCooldown_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="2" Grid.Column="0">
                                                        <Grid><TextBlock Text="Intensity" Foreground="#AAA" FontSize="10"/><TextBlock x:Name="TxtAutonomyIntensity" Text="5" Foreground="#FF69B4" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyIntensity" Minimum="1" Maximum="10" Value="5" Height="18" ValueChanged="SliderAutonomyIntensity_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="2" Grid.Column="2">
                                                        <Grid><TextBlock Text="Announce" Foreground="#AAA" FontSize="10"/><TextBlock x:Name="TxtAutonomyAnnounce" Text="50%" Foreground="#FF69B4" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyAnnounce" Minimum="0" Maximum="100" Value="50" Height="18" ValueChanged="SliderAutonomyAnnounce_Changed"/>
                                                    </StackPanel>
                                                </Grid>

                                                <!-- Checkboxes: 3 columns -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <!-- Triggers -->
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Triggers" Foreground="#FF69B4" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Idle" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyIdle" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyIdle_Changed" Unchecked="ChkAutonomyIdle_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Random" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyRandom" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyRandom_Changed" Unchecked="ChkAutonomyRandom_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Time-Aware" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyTimeAware" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyTimeAware_Changed" Unchecked="ChkAutonomyTimeAware_Changed"/></Grid>
                                                    </StackPanel>
                                                    <!-- Basic -->
                                                    <StackPanel Grid.Column="2">
                                                        <TextBlock Text="Basic" Foreground="#FF69B4" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Flashes" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyFlash" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Videos" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyVideo" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Subliminals" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomySubliminal" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Comments" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyComment" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                    </StackPanel>
                                                    <!-- Advanced -->
                                                    <StackPanel Grid.Column="4">
                                                        <TextBlock Text="Advanced" Foreground="#FF69B4" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Bubbles" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyBubbles" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Pink Filter" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyPinkFilter" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Lock Cards" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyLockCard" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Bouncing" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyBouncingText" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Mindwipe" FontSize="10" Foreground="#CCC"/><CheckBox x:Name="ChkAutonomyMindWipe" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                    </StackPanel>
                                                </Grid>

                                                <!-- Buttons -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Button x:Name="BtnAutonomyStartStop" Grid.Column="0" Content="â–¶ Start" Background="#2A1A3A" Foreground="#90EE90"
                                                            FontWeight="Bold" FontSize="12" Padding="12,6"
                                                            Click="BtnAutonomyStartStop_Click" ToolTip="Start/Stop Bambi Takeover"/>
                                                    <Button Grid.Column="2" Content="Test" Background="#FF69B4" Foreground="White" FontWeight="Bold" FontSize="11"
                                                            Padding="12,6" Click="BtnTestAutonomy_Click" ToolTip="Test action"/>
                                                </Grid>

                                                <!-- Hidden elements -->
                                                <CheckBox x:Name="ChkAutonomySpiral" Visibility="Collapsed" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/>
                                                <CheckBox x:Name="ChkAutonomyBubbleCount" Visibility="Collapsed" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/>
                                                <Button x:Name="BtnForceStartAutonomy" Visibility="Collapsed" Click="BtnForceStartAutonomy_Click"/>
                                                <CheckBox x:Name="ChkAutonomyEnabled" Visibility="Collapsed" Checked="ChkAutonomyEnabled_Changed" Unchecked="ChkAutonomyEnabled_Changed"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </Grid>

                            <!-- Right Box: Feature Image -->
                            <Grid Grid.Column="2">
                                <Border Background="#1E1E3A" CornerRadius="8" Padding="12" BorderBrush="#FF69B4" BorderThickness="1">
                                    <StackPanel>
                                        <TextBlock Text="Let Her Take Control" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="She will autonomously trigger effects based on your settings"
                                                   Foreground="#808080" FontSize="11" TextWrapping="Wrap" TextAlignment="Center" Margin="0,4,0,12"/>
                                        <Border Background="#151528" CornerRadius="8" Padding="8">
                                            <Image Source="pack://application:,,,/Resources/features/bambi takeover.png"
                                                   Stretch="Uniform" MaxHeight="200"
                                                   ToolTip="Bambi Takeover - Let her take control~"/>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Grid>

                        <!-- Patreon Info Box -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,10,0,0"
                                BorderBrush="#9B59B6" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="Support Development" Foreground="#9B59B6" FontSize="14" FontWeight="Bold"/>
                                <TextBlock TextWrapping="Wrap" Foreground="#808080" FontSize="12" Margin="0,8,0,0">
                                    <Run Text="Patreon unlocks:"/> <Run Text="AI Chat, Window Awareness, Slut Mode, Bambi Takeover" Foreground="White"/>
                                </TextBlock>
                                <Button x:Name="BtnVisitPatreon" Content="Visit Patreon"
                                        Background="#9B59B6" Foreground="White"
                                        BorderThickness="0" Padding="15,8" Margin="0,12,0,0"
                                        HorizontalAlignment="Left" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnVisitPatreon_Click"/>
                            </StackPanel>
                        </Border>

                        <!-- Discord Sharing Settings -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,10,0,0"
                                BorderBrush="#5865F2" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="Discord Community Sharing" Foreground="#5865F2" FontSize="14" FontWeight="Bold"/>
                                <TextBlock Text="Share achievements and level milestones to the community Discord" Foreground="#808080" FontSize="11" Margin="0,4,0,10"/>

                                <!-- Sharing Options -->
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0">
                                        <CheckBox x:Name="ChkShareAchievements" Style="{StaticResource ToggleStyle}"
                                                  Checked="ChkShareAchievements_Changed" Unchecked="ChkShareAchievements_Changed"/>
                                        <TextBlock Text="Share Achievements" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <CheckBox x:Name="ChkShareLevelUps" Style="{StaticResource ToggleStyle}"
                                                  Checked="ChkShareLevelUps_Changed" Unchecked="ChkShareLevelUps_Changed"/>
                                        <TextBlock Text="Share Level Milestones" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Privacy Options -->
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0">
                                        <CheckBox x:Name="ChkUseAnonymousName" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                  Checked="ChkUseAnonymousName_Changed" Unchecked="ChkUseAnonymousName_Changed"/>
                                        <TextBlock Text="Use Display Name" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                                   ToolTip="Use your display name instead of Discord username for privacy"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <CheckBox x:Name="ChkShowLevelInPresence" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                  Checked="ChkShowLevelInPresence_Changed" Unchecked="ChkShowLevelInPresence_Changed"/>
                                        <TextBlock Text="Show Level in Status" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                                   ToolTip="Show your level in Discord Rich Presence status"/>
                                    </StackPanel>
                                </Grid>

                                <TextBlock Text="All sharing is opt-in. Nothing is shared without your consent."
                                           Foreground="#5865F2" FontSize="10" FontStyle="Italic"/>
                            </StackPanel>
                        </Border>

                        <!-- Patreon Status -->
                        <Border Background="#1A1A2E" CornerRadius="8" Padding="15" Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="Connection Status" Foreground="#FF69B4" FontSize="14" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtAiStatus" Text="Not connected" Foreground="#808080" FontSize="12" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Leaderboard Tab -->
        <Grid x:Name="LeaderboardTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <Border CornerRadius="12">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1A1A2E" Offset="0"/>
                        <GradientStop Color="#252542" Offset="0.5"/>
                        <GradientStop Color="#1A1A2E" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header with sort dropdown and refresh -->
                    <Border Grid.Row="0" Background="#20FF69B4" CornerRadius="12,12,0,0" Padding="20,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Big LEADERBOARD title with stroke effect -->
                            <Grid Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <!-- Shadow/outline layer -->
                                <TextBlock Text="LEADERBOARD" FontSize="38" FontWeight="ExtraBold" FontFamily="Segoe Print"
                                           Foreground="#80000000" Margin="2,2,0,0"/>
                                <!-- Main text -->
                                <TextBlock Text="LEADERBOARD" FontSize="38" FontWeight="ExtraBold" FontFamily="Segoe Print"
                                           Foreground="#FF69B4"/>
                            </Grid>

                            <StackPanel Grid.Column="2" Orientation="Horizontal">
                                <TextBlock x:Name="TxtLeaderboardStatus" Foreground="#FF69B4" VerticalAlignment="Center"
                                           Margin="0,0,15,0" FontSize="13"/>
                                <Button x:Name="BtnRefreshLeaderboard" Content="Refresh" Padding="15,8"
                                        Background="#FF69B4" Foreground="White" FontSize="13" FontWeight="SemiBold"
                                        Click="BtnRefreshLeaderboard_Click" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#FF85C1"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Leaderboard list -->
                    <ListView x:Name="LstLeaderboard" Grid.Row="1" Background="Transparent"
                              BorderThickness="0" Margin="10,5,10,10" Foreground="#FF69B4"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                              FontSize="21" FontFamily="Segoe Print" FontWeight="ExtraBold"
                              GridViewColumnHeader.Click="LeaderboardColumnHeader_Click">
                        <ListView.Resources>
                            <!-- Header style for dark theme - clickable for sorting -->
                            <Style TargetType="GridViewColumnHeader">
                                <Setter Property="Background" Value="#352545"/>
                                <Setter Property="Foreground" Value="#FF69B4"/>
                                <Setter Property="FontWeight" Value="ExtraBold"/>
                                <Setter Property="FontSize" Value="18"/>
                                <Setter Property="FontFamily" Value="Segoe Print"/>
                                <Setter Property="Padding" Value="12,10"/>
                                <Setter Property="BorderThickness" Value="0,0,1,2"/>
                                <Setter Property="BorderBrush" Value="#FF69B4"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#452555"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.Resources>
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Rank" Width="80" DisplayMemberBinding="{Binding Rank}"/>
                                <GridViewColumn Header="Name" Width="280" DisplayMemberBinding="{Binding DisplayName}"/>
                                <GridViewColumn Header="Level" Width="100" DisplayMemberBinding="{Binding Level}"/>
                                <GridViewColumn Header="XP" Width="100" DisplayMemberBinding="{Binding XpDisplay}"/>
                                <GridViewColumn Header="Bubbles" Width="120" DisplayMemberBinding="{Binding BubblesPopped}"/>
                                <GridViewColumn Header="GIFs" Width="110" DisplayMemberBinding="{Binding GifsSpawned}"/>
                                <GridViewColumn Header="Video Min" Width="120">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <TextBlock Text="{Binding VideoMinutes, StringFormat={}{0:F1}}" HorizontalAlignment="Center"/>
                                                <TextBlock Text="min" FontSize="11" Foreground="#B0B0B0" HorizontalAlignment="Center" Margin="0,-3,0,0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Lock Cards" Width="130" DisplayMemberBinding="{Binding LockCardsCompleted}"/>
                                <GridViewColumn Header="Achievements" Width="130" DisplayMemberBinding="{Binding AchievementsDisplay}"/>
                                <GridViewColumn Header="Online" Width="80">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Ellipse Width="18" Height="18" HorizontalAlignment="Center">
                                                <Ellipse.Style>
                                                    <Style TargetType="Ellipse">
                                                        <Setter Property="Fill" Value="#353545"/>
                                                        <Setter Property="Stroke" Value="#454560"/>
                                                        <Setter Property="StrokeThickness" Value="2"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsOnline}" Value="True">
                                                                <Setter Property="Fill" Value="#FF69B4"/>
                                                                <Setter Property="Stroke" Value="#FF85C1"/>
                                                                <Setter Property="Effect">
                                                                    <Setter.Value>
                                                                        <DropShadowEffect Color="#FF69B4" BlurRadius="12" ShadowDepth="0"/>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Ellipse.Style>
                                            </Ellipse>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Foreground" Value="#FF69B4"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Padding" Value="8"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="FontSize" Value="21"/>
                                <Setter Property="FontWeight" Value="ExtraBold"/>
                                <Setter Property="FontFamily" Value="Segoe Print"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#40FF69B4"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#50FF69B4"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </Grid>
            </Border>
        </Grid>

        <!-- Assets & Packs Tab -->
        <Grid x:Name="AssetsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" MaxHeight="340"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header with title and actions -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <TextBlock Text="ðŸ“¦ Assets &amp; Content Packs" Style="{StaticResource SectionHeader}"
                           FontSize="18" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="BtnRefreshPacks" Content="ðŸ”„ Refresh"
                            Style="{StaticResource OutlineButton}" Margin="0,0,8,0" Padding="12,6"
                            Click="BtnRefreshPacks_Click" ToolTip="Refresh available packs"/>
                    <Button x:Name="BtnOpenAssetsFolder" Content="ðŸ“‚ Open Folder"
                            Style="{StaticResource OutlineButton}" Padding="12,6"
                            Click="BtnOpenAssetsFolder_Click" ToolTip="Open assets folder in Explorer"/>
                </StackPanel>
            </Grid>

            <!-- TOP: Content Packs Section -->
            <Border Grid.Row="1" Style="{StaticResource SectionPanel}" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header with bandwidth bar -->
                    <Grid Grid.Row="0" Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="ðŸŽ Community Content Packs"
                                   Style="{StaticResource SectionHeader}"/>

                        <!-- Bandwidth usage bar -->
                        <StackPanel x:Name="BandwidthPanel" Grid.Column="1" Orientation="Horizontal"
                                    HorizontalAlignment="Right" VerticalAlignment="Center"
                                    Visibility="Collapsed">
                            <TextBlock x:Name="TxtBandwidthLabel" Text="Bandwidth:"
                                       Foreground="#888" FontSize="11" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <Border Background="#1A1A2E" CornerRadius="4" Width="150" Height="16" VerticalAlignment="Center">
                                <Grid>
                                    <ProgressBar x:Name="BandwidthProgressBar"
                                                 Minimum="0" Maximum="100" Value="0"
                                                 Foreground="#FF69B4" Background="Transparent"
                                                 BorderThickness="0"/>
                                    <TextBlock x:Name="TxtBandwidthUsage" Text="0 / 10 GB"
                                               Foreground="White" FontSize="10" FontWeight="SemiBold"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <!-- Horizontal scrolling pack cards -->
                    <ScrollViewer x:Name="PacksScrollViewer" Grid.Row="2"
                                  HorizontalScrollBarVisibility="Auto"
                                  VerticalScrollBarVisibility="Disabled"
                                  PreviewMouseWheel="PacksScrollViewer_PreviewMouseWheel"
                                  Padding="0,0,0,8"
                                  MaxHeight="340">
                        <StackPanel Orientation="Horizontal">
                            <!-- Dynamic Pack Cards -->
                            <ItemsControl x:Name="PackCardsItemsControl">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Width="240" Height="300" Margin="0,0,12,0" CornerRadius="8"
                                                Background="#252542" BorderBrush="#404060" BorderThickness="1">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="90"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <!-- Preview Image (rotating for installed packs, static otherwise) -->
                                                <Border Grid.Row="0" CornerRadius="8,8,0,0" ClipToBounds="True" Background="#1A1A2E">
                                                    <Grid>
                                                        <!-- Rotating preview image from pack content (for installed packs with loaded previews) -->
                                                        <Image Source="{Binding CurrentPreviewImage}"
                                                               Stretch="UniformToFill" RenderOptions.BitmapScalingMode="HighQuality"
                                                               Visibility="{Binding HasPreviewImages, Converter={StaticResource BoolToVisibility}}"/>
                                                        <!-- Static preview image from URL (fallback when no dynamic previews) -->
                                                        <Image Source="{Binding PreviewImageUrl, TargetNullValue={x:Null}}"
                                                               Stretch="UniformToFill" RenderOptions.BitmapScalingMode="HighQuality"
                                                               Visibility="{Binding HasPreviewImages, Converter={StaticResource InverseBoolToVisibility}}"/>
                                                        <!-- "No Preview" text shows only when no dynamic or static preview exists -->
                                                        <TextBlock Text="No Preview" FontSize="14" Foreground="#666"
                                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                   Visibility="{Binding HasAnyPreview, Converter={StaticResource InverseBoolToVisibility}}"/>
                                                        <!-- Size badge -->
                                                        <Border Background="#FF69B4" CornerRadius="4" Padding="8,3"
                                                                HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="6">
                                                            <TextBlock Text="{Binding SizeDisplay}" FontSize="11" FontWeight="Bold" Foreground="White"/>
                                                        </Border>
                                                        <!-- Installed badge -->
                                                        <Border Background="#4CAF50" CornerRadius="4" Padding="6,2"
                                                                HorizontalAlignment="Right" VerticalAlignment="Top" Margin="6"
                                                                Visibility="{Binding IsDownloaded, Converter={StaticResource BoolToVisibility}}">
                                                            <TextBlock Text="INSTALLED" FontSize="8" FontWeight="Bold" Foreground="White"/>
                                                        </Border>
                                                    </Grid>
                                                </Border>

                                                <!-- Info section -->
                                                <Grid Grid.Row="1" Margin="8,4,8,4">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <TextBlock Grid.Row="0" Text="{Binding Name}" FontWeight="Bold"
                                                               Foreground="{StaticResource TextLightBrush}" FontSize="12"
                                                               Margin="0,0,0,2"/>
                                                    <TextBlock Grid.Row="1" Text="{Binding Description}"
                                                               Foreground="{StaticResource TextMutedBrush}" FontSize="10"
                                                               TextWrapping="Wrap" TextTrimming="CharacterEllipsis"
                                                               MaxHeight="92"
                                                               VerticalAlignment="Top"
                                                               ToolTip="{Binding Description}"/>
                                                    <TextBlock Grid.Row="2" Foreground="#FF69B4" FontSize="9" Margin="0,2,0,4" FontWeight="SemiBold">
                                                        <TextBlock.Text>
                                                            <MultiBinding StringFormat="{}{0} images, {1} videos">
                                                                <Binding Path="ImageCount"/>
                                                                <Binding Path="VideoCount"/>
                                                            </MultiBinding>
                                                        </TextBlock.Text>
                                                    </TextBlock>

                                                    <!-- Action Button -->
                                                    <Button Grid.Row="3" Content="{Binding DownloadButtonText}"
                                                            Tag="{Binding}"
                                                            Style="{StaticResource SmallPinkButton}"
                                                            Padding="8,4" Click="BtnPackDownload_Click"
                                                            IsEnabled="{Binding IsNotDownloading}"/>

                                                    <!-- Progress bar -->
                                                    <ProgressBar Grid.Row="4" Height="4" Margin="0,6,0,0"
                                                                 Minimum="0" Maximum="100" Value="{Binding DownloadProgress}"
                                                                 Foreground="#FF69B4" Background="#1A1A2E"
                                                                 Visibility="{Binding IsDownloading, Converter={StaticResource BoolToVisibility}}"/>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Creator Card: Join Discord -->
                            <Border Width="220" Height="300" Margin="0,0,12,0" CornerRadius="8"
                                    Background="#252542" BorderBrush="#5865F2" BorderThickness="2">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="90"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <!-- Discord Preview -->
                                    <Border Grid.Row="0" CornerRadius="8,8,0,0" ClipToBounds="True" Background="#5865F2">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <Image Source="pack://application:,,,/Resources/discord.png"
                                                   Width="48" Height="48" Stretch="Uniform"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Info section -->
                                    <Grid Grid.Row="1" Margin="8,4,8,4">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Text="Create Your Own Pack!" FontWeight="Bold"
                                                   Foreground="{StaticResource TextLightBrush}" FontSize="12"
                                                   Margin="0,0,0,2"/>
                                        <TextBlock Grid.Row="1" Text="Are you a content creator? Join our Discord to submit your pack and reach thousands of users!"
                                                   Foreground="{StaticResource TextMutedBrush}" FontSize="10"
                                                   TextWrapping="Wrap" MaxHeight="52" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Row="2" Foreground="#5865F2" FontSize="9" Margin="0,2,0,4" FontWeight="SemiBold">
                                            Get featured in the app
                                        </TextBlock>

                                        <!-- Button -->
                                        <Button Grid.Row="3" Content="Join Discord"
                                                Background="#5865F2" Foreground="White" BorderThickness="0"
                                                Padding="8,4" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                                                Click="BtnCreatorDiscord_Click">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}"
                                                                        CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Row="2" Height="5" HorizontalAlignment="Stretch"
                          Background="Transparent" Cursor="SizeNS"/>

            <!-- BOTTOM: Interactive File Browser -->
            <Border Grid.Row="3" Style="{StaticResource SectionPanel}" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <Grid Grid.Row="0" Margin="0,0,0,8">
                        <TextBlock Text="ðŸ“‚ Asset Browser" Style="{StaticResource SectionHeader}"/>
                        <TextBlock x:Name="TxtAssetCounts" Text="0 images, 0 videos"
                                   Foreground="{StaticResource TextMutedBrush}" FontSize="12"
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Action bar with preset selector -->
                    <Grid Grid.Row="1" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left: Select/Deselect buttons -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <Button Content="Select All" Style="{StaticResource OutlineButton}"
                                    Padding="10,4" FontSize="11" Margin="0,0,6,0" Click="BtnSelectAllAssets_Click"/>
                            <Button Content="Deselect All" Style="{StaticResource OutlineButton}"
                                    Padding="10,4" FontSize="11" Click="BtnDeselectAllAssets_Click"/>
                        </StackPanel>

                        <!-- Right: Preset selector -->
                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                            <TextBlock Text="Preset:" Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="11" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <ComboBox x:Name="CmbAssetPresets" Width="180" FontSize="11"
                                      DisplayMemberPath="DisplayText"
                                      SelectedValuePath="Id"
                                      SelectionChanged="CmbAssetPresets_SelectionChanged"/>
                            <Button x:Name="BtnSaveAssetPreset" Content="Save As"
                                    Style="{StaticResource SmallPinkButton}"
                                    Padding="8,4" FontSize="11" Margin="6,0,0,0"
                                    ToolTip="Save current selection as a new preset"
                                    Click="BtnSaveAssetPreset_Click"/>
                            <Button x:Name="BtnUpdateAssetPreset" Content="Update"
                                    Style="{StaticResource OutlineButton}"
                                    Padding="8,4" FontSize="11" Margin="4,0,0,0"
                                    ToolTip="Update selected preset with current selection"
                                    Click="BtnUpdateAssetPreset_Click"/>
                            <Button x:Name="BtnDeleteAssetPreset" Content="Delete"
                                    Style="{StaticResource OutlineButton}"
                                    Padding="8,4" FontSize="11" Margin="4,0,0,0"
                                    ToolTip="Delete selected preset"
                                    Click="BtnDeleteAssetPreset_Click"/>
                        </StackPanel>
                    </Grid>

                    <!-- Split view: TreeView on left, Thumbnails on right -->
                    <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="280"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- LEFT: Folder TreeView -->
                        <Border Grid.Column="0" Background="#1A1A2E" CornerRadius="6" Padding="4">
                            <TreeView x:Name="AssetTreeView" Background="Transparent" BorderThickness="0"
                                      SelectedItemChanged="AssetTreeView_SelectedItemChanged"
                                      VirtualizingPanel.IsVirtualizing="True">
                                <TreeView.Resources>
                                    <Style TargetType="TreeViewItem">
                                        <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                        <Setter Property="FontSize" Value="12"/>
                                        <Setter Property="Padding" Value="2"/>
                                        <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#40FF69B4"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#20FF69B4"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TreeView.Resources>
                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                        <StackPanel Orientation="Horizontal" Margin="2">
                                            <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                      IsThreeState="False"
                                                      Checked="FolderCheckBox_Changed"
                                                      Unchecked="FolderCheckBox_Changed"
                                                      VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <TextBlock Text="ðŸ“" FontSize="12" Margin="0,0,4,0" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding FileCountDisplay}"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                        </Border>

                        <!-- Splitter -->
                        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                                      Background="Transparent" Cursor="SizeWE"/>

                        <!-- RIGHT: Thumbnail Preview Grid -->
                        <Border Grid.Column="2" Background="#1A1A2E" CornerRadius="6" Padding="4">
                            <Grid>
                                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                    <ItemsControl x:Name="ThumbnailsItemsControl">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="100" Height="120" Margin="4" CornerRadius="6"
                                                        Background="#252542" BorderBrush="#404060" BorderThickness="2" Cursor="Hand"
                                                        MouseLeftButtonDown="ThumbnailItem_Click">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>

                                                        <!-- Thumbnail image -->
                                                        <Border Grid.Row="0" CornerRadius="6,6,0,0" ClipToBounds="True" Background="#1A1A2E">
                                                            <Grid>
                                                                <!-- Video placeholder icon (shows when IsVideo and no thumbnail) -->
                                                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                            Visibility="{Binding IsVideo, Converter={StaticResource BoolToVisibility}}">
                                                                    <TextBlock Text="ðŸŽ¬" FontSize="32" HorizontalAlignment="Center"/>
                                                                    <TextBlock Text="VIDEO" FontSize="9" Foreground="#888" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                                <!-- Image thumbnail (for images, or video if we had one) -->
                                                                <Image Source="{Binding Thumbnail}" Stretch="UniformToFill"/>
                                                                <!-- Loading indicator -->
                                                                <TextBlock Text="â³" FontSize="14"
                                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                           Visibility="{Binding IsLoadingThumbnail, Converter={StaticResource BoolToVisibility}}"/>
                                                            </Grid>
                                                        </Border>

                                                        <!-- Checkbox overlay -->
                                                        <CheckBox Grid.Row="0" IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                                  HorizontalAlignment="Left" VerticalAlignment="Top"
                                                                  Margin="4" Checked="ThumbnailCheckBox_Changed"
                                                                  Unchecked="ThumbnailCheckBox_Changed"/>

                                                        <!-- Filename -->
                                                        <Border Grid.Row="1" Background="#303050" Padding="4,2">
                                                            <TextBlock Text="{Binding Name}" FontSize="9"
                                                                       Foreground="{StaticResource TextLightBrush}"
                                                                       TextTrimming="CharacterEllipsis"
                                                                       ToolTip="{Binding Name}"/>
                                                        </Border>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>

                                <!-- Empty state -->
                                <TextBlock x:Name="TxtThumbnailsEmpty"
                                           Text="Select a folder to view its contents"
                                           Foreground="{StaticResource TextMutedBrush}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- Global Bottom Bar: Start / Save / Exit (Always visible) -->
        <Border Grid.Row="5" Background="{StaticResource PanelBgBrush}" Margin="10,5,10,10" CornerRadius="10" Padding="15,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Status Text (overlaid on top of buttons, shown when running) -->
                <TextBlock x:Name="TxtPresetsStatus" Grid.ColumnSpan="2"
                           Text="" Foreground="#808090" FontSize="11"
                           HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,-20,0,0"/>

                <!-- START Button (with session timer display) -->
                <Grid Grid.Column="0" Margin="0,0,8,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="BtnStart" Grid.Column="0" Style="{StaticResource PinkButton}"
                            Height="50" FontSize="18" Click="BtnStart_Click"
                            ToolTip="Start/Stop the conditioning engine">
                        <StackPanel x:Name="StartButtonContent" Orientation="Horizontal" Height="24" VerticalAlignment="Center">
                            <TextBlock x:Name="TxtStartIcon" Text="â–¶" FontSize="16" Width="20" Margin="0,0,10,0" VerticalAlignment="Center" TextAlignment="Center"/>
                            <TextBlock x:Name="TxtStartLabel" Text="START" FontSize="18" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <!-- Pause Button (visible only during sessions) -->
                    <Button x:Name="BtnPauseSession" Grid.Column="1" Width="50" Height="50" Margin="5,0,0,0"
                            Visibility="Collapsed" Click="BtnPauseSession_Click"
                            ToolTip="Pause session (-100 XP penalty per pause)">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#FFA500"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FontSize" Value="20"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <TextBlock x:Name="TxtPauseIcon" Text="â¸" FontSize="20"/>
                    </Button>
                </Grid>
                
                <!-- Save / Exit (other half) -->
                <Grid Grid.Column="1" Margin="8,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" Content="ðŸ’¾ Save" Style="{StaticResource PinkButton}" 
                            Height="50" FontSize="16" Margin="0,0,5,0" Click="BtnSave_Click"
                            ToolTip="Save all settings to disk"/>
                    <Button Grid.Column="1" Content="ðŸšª Exit" Height="50" FontSize="16" Margin="5,0,0,0" Click="BtnExit_Click"
                            ToolTip="Exit the application completely">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#FF6B6B"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="20,10">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Grid>
        </Border>

        <!-- Global Drop Overlay (shown when dragging files anywhere) -->
        <Border x:Name="GlobalDropOverlay" Grid.RowSpan="5" Visibility="Collapsed" Background="#D0000000" IsHitTestVisible="False">
            <Border Background="#1E1E3A" CornerRadius="16" BorderBrush="#FF69B4" BorderThickness="3"
                    MaxWidth="450" MaxHeight="220" VerticalAlignment="Center" HorizontalAlignment="Center"
                    Padding="40,30">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="DropOverlayIcon" Text="ðŸ“‚" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="DropOverlayTitle" Text="Drop to Import" Foreground="#FF69B4" FontSize="20" FontWeight="Bold"
                               HorizontalAlignment="Center" Margin="0,15,0,5"/>
                    <TextBlock x:Name="DropOverlaySubtitle" Text="Images, Videos, ZIPs, Folders" Foreground="#909090" FontSize="14"
                               HorizontalAlignment="Center" TextWrapping="Wrap" TextAlignment="Center"/>
                </StackPanel>
            </Border>
        </Border>

        <!-- Main App Tutorial Overlay -->
        <Border x:Name="MainTutorialOverlay" Grid.RowSpan="5" Panel.ZIndex="1000" Visibility="Collapsed" Background="#E8000000">
            <Grid>
                <Border Background="Transparent" MouseLeftButtonDown="MainTutorial_Close"/>
                <Border Background="#1E1E3A" CornerRadius="12" BorderBrush="#FF69B4" BorderThickness="2"
                        MaxWidth="700" MaxHeight="600" VerticalAlignment="Center" HorizontalAlignment="Center"
                        Margin="40" MouseLeftButtonDown="MainTutorial_ContentClick">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Border Grid.Row="0" Background="#252542" CornerRadius="10,10,0,0" Padding="20,15">
                            <Grid>
                                <TextBlock Text="ðŸ“– How to Use the App" Foreground="#FF69B4" FontSize="18" FontWeight="Bold"
                                           HorizontalAlignment="Center"/>
                                <Button Content="âœ•" Click="MainTutorial_Close" HorizontalAlignment="Right" VerticalAlignment="Top"
                                        Background="Transparent" Foreground="#888" FontSize="14" BorderThickness="0" Cursor="Hand"
                                        Margin="0,-5,-5,0"/>
                            </Grid>
                        </Border>

                        <!-- Tutorial Content -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20,15">
                            <StackPanel>
                                <!-- Quick Tip -->
                                <Border Background="#3A2542" CornerRadius="8" Padding="12" Margin="0,0,0,15" BorderBrush="#FF69B4" BorderThickness="1">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ’¡" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Hover over any control for tooltips! Click a guide below to start an interactive tutorial."
                                                   Foreground="#D0B0C0" FontSize="12" TextWrapping="Wrap" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Getting Started -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸš€" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Getting Started" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Quick overview of the basics - START button, adding content, essential tips" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialGettingStarted_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Settings Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="âš™ï¸" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Settings Tab" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Flash images, videos, subliminals, overlays, audio, and all effect settings" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialSettings_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Presets Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ’¾" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Presets &amp; Sessions" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Save configurations, run timed sessions, create custom sessions with the editor" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialPresets_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Progression Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ“Š" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Progression" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="XP system, level unlocks, scheduler, and intensity ramp settings" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialProgression_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Achievements Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ†" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Achievements" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Unlock achievements by reaching milestones and using features" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialAchievements_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Companion Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ’¬" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Companion Settings" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Speech bubbles, trigger messages, and AI personality configuration" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialCompanion_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Patreon Tab -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ’Ž" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Patreon Exclusives" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="AI chat, window awareness, slut mode, and premium features" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialPatreon_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Avatar -->
                                <Border Background="#252542" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="ðŸ’—" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Avatar Companion" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Interacting, detaching, resizing, evolution stages, and animations" Foreground="#808080" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialAvatar_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Pro Tips -->
                                <Border Background="#3A2542" CornerRadius="8" Padding="12" BorderBrush="#FF69B4" BorderThickness="1" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ’¡ Pro Tips" Foreground="#FF69B4" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                        <TextBlock Foreground="#D0B0C0" FontSize="11" TextWrapping="Wrap">
                                            <Run Text="â€¢"/><Run Text=" assets/images" FontWeight="SemiBold"/><Run Text=" - Add your flash images here"/>
                                        </TextBlock>
                                        <TextBlock Foreground="#D0B0C0" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text="â€¢"/><Run Text=" assets/videos" FontWeight="SemiBold"/><Run Text=" - Add your videos here"/>
                                        </TextBlock>
                                        <TextBlock Foreground="#D0B0C0" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text="â€¢ Use Borderless Windowed mode in games for best results"/>
                                        </TextBlock>
                                        <TextBlock Foreground="#D0B0C0" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text="â€¢ Right-click on features for additional options"/>
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Footer -->
                        <Border Grid.Row="2" Background="#252542" CornerRadius="0,0,10,10" Padding="20,15">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="Start Interactive Tutorial" Click="BtnStartTutorial_Click" Margin="0,0,15,0"
                                        Background="Transparent" Foreground="#FF69B4" BorderBrush="#FF69B4" BorderThickness="1"
                                        Padding="20,10" FontWeight="SemiBold" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#20FF69B4"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Content="Got it!" Style="{StaticResource PinkButton}"
                                        Click="MainTutorial_Close" Padding="40,10"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Border>
        </Grid>
    </Viewbox>
</Window>
