<Window x:Class="ConditioningControlPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Conditioning Control Panel"
        Height="943" Width="1385"
        MinHeight="620" MinWidth="978"
        Background="{StaticResource WindowBackgroundBrush}"
        WindowStartupLocation="Manual"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResizeWithGrip"
        AllowDrop="True"
        Drop="Window_Drop"
        DragEnter="Window_DragEnter"
        DragLeave="Window_DragLeave"
        DragOver="Window_DragOver">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" 
                      ResizeBorderThickness="5"
                      GlassFrameThickness="0"
                      CornerRadius="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- Note: BoolToVisibility and InverseBoolToVisibility converters are defined in
             Application.Resources (Converters.xaml) to ensure availability in all DataTemplates -->

        <!-- Custom Tooltip Style -->
        <Style TargetType="ToolTip">
            <Setter Property="Background" Value="{StaticResource DarkerBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Placement" Value="Mouse"/>
            <Setter Property="HasDropShadow" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToolTip">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="8" Opacity="0.5" ShadowDepth="2"/>
                            </Border.Effect>
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Style (for header navigation) -->
        <Style x:Key="TabButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="7,5"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Active Style -->
        <Style x:Key="TabButtonActive" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="7,5"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TabButtonHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Small Pink Button Style (for tutorial guide buttons) -->
        <Style x:Key="SmallPinkButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SmallPinkButtonBackgroundBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SmallPinkButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SmallPinkButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Outline Button Style -->
        <Style x:Key="OutlineButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Shared template for expandable icon buttons -->
        <ControlTemplate x:Key="ExpandableIconTemplate" TargetType="Button">
            <Border x:Name="ButtonBorder" Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="6" Padding="8,6" MinWidth="42">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="IconText" Text="{TemplateBinding Content}"
                               FontSize="{TemplateBinding FontSize}" VerticalAlignment="Center"/>
                    <TextBlock x:Name="LabelText" Text="{TemplateBinding Tag}"
                               FontSize="12" FontWeight="Bold" VerticalAlignment="Center"
                               Margin="0" Visibility="Collapsed" Opacity="1"/>
                </StackPanel>
            </Border>
        </ControlTemplate>

        <!-- Base style with shared behavior (animated Width handled in code-behind) -->
        <Style x:Key="ExpandableIconButtonBase" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="MinWidth" Value="42"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Template" Value="{StaticResource ExpandableIconTemplate}"/>
            <EventSetter Event="MouseEnter" Handler="ExpandableIcon_MouseEnter"/>
            <EventSetter Event="MouseLeave" Handler="ExpandableIcon_MouseLeave"/>
        </Style>

        <!-- Default (pink-outline) variant -->
        <Style x:Key="ExpandableIconButton" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Active (pink filled) variant -->
        <Style x:Key="ExpandableIconButtonActive" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource TabButtonHoverBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Patreon (purple) variant -->
        <Style x:Key="ExpandableIconButtonPatreon" TargetType="Button" BasedOn="{StaticResource ExpandableIconButtonBase}">
            <Setter Property="Background" Value="{StaticResource PatreonPurpleBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource PatreonLightPurpleBrush}"/>
            <Setter Property="FontSize" Value="18"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource PatreonDarkPurpleBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Window Control Button Style -->
        <Style x:Key="WindowControlButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource TransparentWhiteBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Window Close Button Style -->
        <Style x:Key="WindowCloseButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource DangerBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Session Action Button Style (small icon buttons for Edit/Export/Delete) -->
        <Style x:Key="SessionActionButton" TargetType="Button">
            <Setter Property="Width" Value="26"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="Background" Value="{StaticResource SessionButtonBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource SessionButtonForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Session Delete Button Style (red hover) -->
        <Style x:Key="SessionDeleteButton" TargetType="Button" BasedOn="{StaticResource SessionActionButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource SessionDeleteButtonHoverBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Slider Style -->
        <Style x:Key="PinkSlider" TargetType="Slider">
            <Setter Property="Minimum" Value="0"/>
            <Setter Property="Maximum" Value="100"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border Height="4" Background="{StaticResource SliderTrackBackgroundBrush}" CornerRadius="2" VerticalAlignment="Center"/>
                            <Track x:Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="Slider.DecreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Height="4" Background="{StaticResource PinkBrush}" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="Slider.IncreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="Transparent"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate>
                                                <Ellipse Width="16" Height="16" Fill="White" Cursor="Hand"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Slider" BasedOn="{StaticResource PinkSlider}" />

        <!-- Simple, minimal girly ScrollBar + Utilities -->
        <!-- Invisible RepeatButton for ScrollBar -->
        <Style x:Key="InvisibleRepeatButton" TargetType="RepeatButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border Background="Transparent" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="IsTabStop" Value="False"/>
        </Style>

        <!-- Thumb for controlling ScrollBar -->
        <Style x:Key="SimpleCuteThumb" TargetType="Thumb">
            <Setter Property="MinWidth" Value="12"/>
            <Setter Property="MinHeight" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border x:Name="Bd"
                                CornerRadius="6"
                                Background="{StaticResource PinkBrush}"
                                Opacity="0.85"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                SnapsToDevicePixels="True"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="0.85" ScaleY="1.0"/>
                            </Border.RenderTransform>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Opacity" Value="1"/>
                                <Setter TargetName="Bd" Property="Background" Value="{StaticResource DarkPinkBrush}"/>
                                <Setter TargetName="Bd" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.92" ScaleY="1.0"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsDragging" Value="True">
                                <Setter TargetName="Bd" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.95" ScaleY="1.0"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Background="Transparent" SnapsToDevicePixels="True">
                            <Border x:Name="TrackBg"
                                    Background="{StaticResource SliderTrackBackgroundBrush}"
                                    CornerRadius="6"
                                    Opacity="0.4"
                                    Margin="1"/>
                            <Track x:Name="PART_Track"
                                   Orientation="{TemplateBinding Orientation}"
                                   IsDirectionReversed="true">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource InvisibleRepeatButton}" Command="ScrollBar.LineUpCommand"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource InvisibleRepeatButton}" Command="ScrollBar.LineDownCommand"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource SimpleCuteThumb}"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Orientation" Value="Horizontal">
                                <Setter Property="Height" Value="14"/>
                                <Setter TargetName="TrackBg" Property="CornerRadius" Value="7"/>
                            </Trigger>
                            <Trigger Property="Orientation" Value="Vertical">
                                <Setter Property="Width" Value="14"/>
                                <Setter TargetName="TrackBg" Property="CornerRadius" Value="7"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="TrackBg" Property="Opacity" Value="0.2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Custom TreeView style with bigger scrollbars -->
        <Style TargetType="TreeView">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TreeView">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer Focusable="False"
                                          CanContentScroll="False"
                                          Padding="{TemplateBinding Padding}"
                                          HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Auto">
                                <ItemsPresenter/>
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section Panel Style -->
        <Style x:Key="SectionPanel" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource PanelBgTransparentBrush}"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="9"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="SettingLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Value Label Style -->
        <Style x:Key="ValueLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- Achievement Tile Style -->
        <Style x:Key="AchievementTile" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource AchievementTileBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="MinHeight" Value="100"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
        
        <!-- Feature Image Style -->
        <Style x:Key="FeatureImageBorder" TargetType="Border">
            <Setter Property="Width" Value="180"/>
            <Setter Property="Height" Value="180"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="Background" Value="{StaticResource DarkerBgBrush}"/>
            <Setter Property="Margin" Value="10,0,0,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Rounded Image Rectangle Style -->
        <Style x:Key="RoundedFeatureImage" TargetType="Rectangle">
            <Setter Property="Width" Value="180"/>
            <Setter Property="Height" Value="180"/>
            <Setter Property="RadiusX" Value="15"/>
            <Setter Property="RadiusY" Value="15"/>
            <Setter Property="Margin" Value="10,0,0,0"/>
        </Style>

        <!-- Help Button Style - Small circular (?) icon for section help -->
        <Style x:Key="HelpButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="18"/>
            <Setter Property="Height" Value="18"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource HelpButtonForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource HelpButtonBorderBrush}"/>
            <Setter Property="Cursor" Value="Help"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="8,0,0,0"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="100"/>
            <Setter Property="ToolTipService.ShowDuration" Value="60000"/>
            <Setter Property="ToolTipService.BetweenShowDelay" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="9"
                                Width="18" Height="18">
                            <TextBlock Text="?"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{TemplateBinding Foreground}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Margin="0,-1,0,0"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="{StaticResource DarkerBgBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource DarkerBgBrush}"/>
                                <Setter TargetName="border" Property="Background" Value="{StaticResource HelpButtonHoverBackgroundBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Enhanced Help Tooltip Style -->
        <Style x:Key="HelpTooltipStyle" TargetType="ToolTip">
            <Setter Property="Background" Value="{StaticResource HelpTooltipBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="MaxWidth" Value="380"/>
            <Setter Property="Placement" Value="Right"/>
            <Setter Property="HorizontalOffset" Value="10"/>
            <Setter Property="HasDropShadow" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToolTip">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Animated Gradient Panel Style with Particles (using ContentControl) -->
        <Style x:Key="AnimatedGradientPanel" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContentControl">
                        <Border x:Name="OuterBorder" CornerRadius="15"
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                                ClipToBounds="True">
                            <Grid>
                                <!-- Animated Gradient Background -->
                                <Rectangle RadiusX="15" RadiusY="15" Fill="{StaticResource AnimatedGradientBackgroundBrush}"/>

                                <!-- Radial Glow Effect (pulsing) -->
                                <Ellipse x:Name="GlowPink" Width="200" Height="200" Opacity="0.15"
                                         HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-50,-50,0,0">
                                    <Ellipse.Fill>
                                        <RadialGradientBrush>
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                            <GradientStop Color="Transparent" Offset="1"/>
                                        </RadialGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>
                                <Ellipse x:Name="GlowPurple" Width="180" Height="180" Opacity="0.12"
                                         HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,-40,-40">
                                    <Ellipse.Fill>
                                        <RadialGradientBrush>
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                            <GradientStop Color="Transparent" Offset="1"/>
                                        </RadialGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>

                                <!-- Floating Particles -->
                                <Canvas IsHitTestVisible="False">
                                    <!-- Particle 1 -->
                                    <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="20" Canvas.Top="80">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle1Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <!-- Particle 2 -->
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.35" Canvas.Left="80" Canvas.Top="120">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle2Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <!-- Particle 3 -->
                                    <Ellipse Width="5" Height="5" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.3" Canvas.Left="150" Canvas.Top="60">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle3Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <!-- Particle 4 -->
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticleLavenderBrush}" Opacity="0.35" Canvas.Left="220" Canvas.Top="100">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle4Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <!-- Particle 5 -->
                                    <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.3" Canvas.Left="280" Canvas.Top="40">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle5Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <!-- Particle 6 -->
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="50" Canvas.Top="150">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle6Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                </Canvas>

                                <!-- Content -->
                                <Border Padding="20">
                                    <ContentPresenter/>
                                </Border>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsVisible" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard x:Name="PanelAnimationStoryboard">
                                        <Storyboard RepeatBehavior="Forever">
                                            <!-- Particle floating animations -->
                                            <DoubleAnimation Storyboard.TargetName="Particle1Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-60" Duration="0:0:8" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle1Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="15" Duration="0:0:6" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle2Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-50" Duration="0:0:10" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle2Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-10" Duration="0:0:7" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle3Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-70" Duration="0:0:12" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle3Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="20" Duration="0:0:9" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle4Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-55" Duration="0:0:9" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle4Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-15" Duration="0:0:11" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle5Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-65" Duration="0:0:11" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle5Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="12" Duration="0:0:8" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle6Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-45" Duration="0:0:7" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle6Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-8" Duration="0:0:10" AutoReverse="True"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <StopStoryboard BeginStoryboardName="PanelAnimationStoryboard"/>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Animated Gradient Panel for Roadmap (wider, less padding) -->
        <Style x:Key="AnimatedGradientPanelWide" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContentControl">
                        <Border x:Name="OuterBorder" CornerRadius="10"
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                                ClipToBounds="True">
                            <Grid>
                                <!-- Animated Gradient Background -->
                                <Rectangle RadiusX="10" RadiusY="10">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush x:Name="GradientFill" StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop x:Name="Stop1" Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop x:Name="Stop2" Color="{StaticResource GridDarkPurpleColor}" Offset="0.5"/>
                                            <GradientStop x:Name="Stop3" Color="{StaticResource DarkerBgColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <!-- Radial Glow Effect (pulsing) -->
                                <Ellipse x:Name="GlowPink" Width="250" Height="150" Opacity="0.12"
                                         HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-80,-40,0,0">
                                    <Ellipse.Fill>
                                        <RadialGradientBrush>
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                            <GradientStop Color="Transparent" Offset="1"/>
                                        </RadialGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>
                                <Ellipse x:Name="GlowPurple" Width="200" Height="120" Opacity="0.1"
                                         HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,-60,-30">
                                    <Ellipse.Fill>
                                        <RadialGradientBrush>
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                            <GradientStop Color="Transparent" Offset="1"/>
                                        </RadialGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>

                                <!-- Floating Particles (more spread out for wider panel) -->
                                <Canvas IsHitTestVisible="False">
                                    <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="30" Canvas.Top="60">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle1Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.35" Canvas.Left="120" Canvas.Top="100">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle2Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <Ellipse Width="5" Height="5" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.3" Canvas.Left="250" Canvas.Top="40">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle3Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticleLavenderBrush}" Opacity="0.35" Canvas.Left="380" Canvas.Top="80">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle4Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.3" Canvas.Left="500" Canvas.Top="50">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle5Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="180" Canvas.Top="120">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform x:Name="Particle6Transform"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                </Canvas>

                                <!-- Content -->
                                <Border Padding="10">
                                    <ContentPresenter/>
                                </Border>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsVisible" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard x:Name="WideAnimationStoryboard">
                                        <Storyboard RepeatBehavior="Forever">
                                            <!-- Particle animations -->
                                            <DoubleAnimation Storyboard.TargetName="Particle1Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-40" Duration="0:0:8" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle1Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="15" Duration="0:0:6" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle2Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-35" Duration="0:0:10" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle2Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-10" Duration="0:0:7" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle3Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-50" Duration="0:0:12" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle3Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="20" Duration="0:0:9" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle4Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-45" Duration="0:0:9" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle4Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-15" Duration="0:0:11" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle5Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-55" Duration="0:0:11" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle5Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="12" Duration="0:0:8" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle6Transform" Storyboard.TargetProperty="Y"
                                                             From="0" To="-30" Duration="0:0:7" AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Particle6Transform" Storyboard.TargetProperty="X"
                                                             From="0" To="-8" Duration="0:0:10" AutoReverse="True"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <StopStoryboard BeginStoryboardName="WideAnimationStoryboard"/>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Full-Tab Animated Background (no padding, covers entire tab area) -->
        <ControlTemplate x:Key="AnimatedTabBackground" TargetType="ContentControl">
            <Border CornerRadius="12" ClipToBounds="True">
                <Grid>
                    <!-- Animated Gradient Background -->
                    <Rectangle RadiusX="12" RadiusY="12" Fill="{StaticResource AnimatedGradientBackgroundBrush}"/>

                    <!-- Multiple Radial Glow Effects spread across tab -->
                    <Ellipse x:Name="GlowPink1" Width="400" Height="300" Opacity="0.1"
                             HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-100,-80,0,0">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Ellipse x:Name="GlowPurple1" Width="350" Height="250" Opacity="0.08"
                             HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,-80,-60">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Ellipse x:Name="GlowPink2" Width="300" Height="200" Opacity="0.06"
                             HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,-50,-50,0">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Ellipse x:Name="GlowPurple2" Width="280" Height="180" Opacity="0.07"
                             HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="-60,0,0,-40">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>

                    <!-- Floating Particles spread across entire tab -->
                    <Canvas IsHitTestVisible="False">
                        <!-- Row 1 - Top -->
                        <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="50" Canvas.Top="40">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P1"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.35" Canvas.Left="200" Canvas.Top="60">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P2"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="5" Height="5" Fill="{StaticResource ParticleLavenderBrush}" Opacity="0.3" Canvas.Left="400" Canvas.Top="30">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P3"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.35" Canvas.Left="600" Canvas.Top="50">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P4"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.3" Canvas.Left="800" Canvas.Top="40">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P5"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <!-- Row 2 - Middle -->
                        <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.4" Canvas.Left="100" Canvas.Top="150">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P6"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="4" Height="4" Fill="{StaticResource ParticleLavenderBrush}" Opacity="0.35" Canvas.Left="300" Canvas.Top="180">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P7"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.3" Canvas.Left="500" Canvas.Top="160">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P8"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="5" Height="5" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.35" Canvas.Left="700" Canvas.Top="140">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P9"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <!-- Row 3 - Lower -->
                        <Ellipse Width="4" Height="4" Fill="{StaticResource ParticlePurpleBrush}" Opacity="0.4" Canvas.Left="150" Canvas.Top="280">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P10"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="3" Height="3" Fill="{StaticResource ParticlePinkBrush}" Opacity="0.3" Canvas.Left="350" Canvas.Top="300">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P11"/></Ellipse.RenderTransform>
                        </Ellipse>
                        <Ellipse Width="4" Height="4" Fill="{StaticResource ParticleLavenderBrush}" Opacity="0.35" Canvas.Left="550" Canvas.Top="260">
                            <Ellipse.RenderTransform><TranslateTransform x:Name="P12"/></Ellipse.RenderTransform>
                        </Ellipse>
                    </Canvas>

                    <!-- Content -->
                    <ContentPresenter/>
                </Grid>
            </Border>
            <ControlTemplate.Triggers>
                <!-- Start animation when visible, stop when hidden (saves resources) -->
                <Trigger Property="IsVisible" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard x:Name="TabAnimationStoryboard">
                            <Storyboard RepeatBehavior="Forever">
                                <!-- Glow pulses -->
                                <DoubleAnimation Storyboard.TargetName="GlowPink1" Storyboard.TargetProperty="Opacity"
                                                 From="0.1" To="0.18" Duration="0:0:4" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="GlowPurple1" Storyboard.TargetProperty="Opacity"
                                                 From="0.08" To="0.15" Duration="0:0:5" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="GlowPink2" Storyboard.TargetProperty="Opacity"
                                                 From="0.06" To="0.12" Duration="0:0:6" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="GlowPurple2" Storyboard.TargetProperty="Opacity"
                                                 From="0.07" To="0.14" Duration="0:0:4.5" AutoReverse="True"/>
                                <!-- Particle animations - varied speeds and directions -->
                                <DoubleAnimation Storyboard.TargetName="P1" Storyboard.TargetProperty="Y" From="0" To="-50" Duration="0:0:9" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P1" Storyboard.TargetProperty="X" From="0" To="20" Duration="0:0:7" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P2" Storyboard.TargetProperty="Y" From="0" To="-40" Duration="0:0:11" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P2" Storyboard.TargetProperty="X" From="0" To="-15" Duration="0:0:8" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P3" Storyboard.TargetProperty="Y" From="0" To="-60" Duration="0:0:13" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P3" Storyboard.TargetProperty="X" From="0" To="25" Duration="0:0:10" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P4" Storyboard.TargetProperty="Y" From="0" To="-45" Duration="0:0:10" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P4" Storyboard.TargetProperty="X" From="0" To="-18" Duration="0:0:12" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P5" Storyboard.TargetProperty="Y" From="0" To="-55" Duration="0:0:12" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P5" Storyboard.TargetProperty="X" From="0" To="15" Duration="0:0:9" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P6" Storyboard.TargetProperty="Y" From="0" To="-35" Duration="0:0:8" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P6" Storyboard.TargetProperty="X" From="0" To="-12" Duration="0:0:11" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P7" Storyboard.TargetProperty="Y" From="0" To="-50" Duration="0:0:14" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P7" Storyboard.TargetProperty="X" From="0" To="22" Duration="0:0:10" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P8" Storyboard.TargetProperty="Y" From="0" To="-40" Duration="0:0:10" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P8" Storyboard.TargetProperty="X" From="0" To="-20" Duration="0:0:13" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P9" Storyboard.TargetProperty="Y" From="0" To="-55" Duration="0:0:11" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P9" Storyboard.TargetProperty="X" From="0" To="18" Duration="0:0:8" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P10" Storyboard.TargetProperty="Y" From="0" To="-45" Duration="0:0:9" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P10" Storyboard.TargetProperty="X" From="0" To="-16" Duration="0:0:12" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P11" Storyboard.TargetProperty="Y" From="0" To="-35" Duration="0:0:12" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P11" Storyboard.TargetProperty="X" From="0" To="14" Duration="0:0:9" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P12" Storyboard.TargetProperty="Y" From="0" To="-50" Duration="0:0:10" AutoReverse="True"/>
                                <DoubleAnimation Storyboard.TargetName="P12" Storyboard.TargetProperty="X" From="0" To="-22" Duration="0:0:14" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <StopStoryboard BeginStoryboardName="TabAnimationStoryboard"/>
                    </Trigger.ExitActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!-- Custom ScrollBar Style for Skill Tree (Larger horizontal scrollbar) -->
        <Style x:Key="SkillTreeScrollBarStyle" TargetType="ScrollBar">
            <Setter Property="Background" Value="{StaticResource DarkerBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
            <Style.Triggers>
                <!-- Horizontal scrollbar -->
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Height" Value="20"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ScrollBar">
                                <Grid>
                                    <Track x:Name="PART_Track" IsDirectionReversed="False">
                                        <Track.Thumb>
                                            <Thumb>
                                                <Thumb.Style>
                                                    <Style TargetType="Thumb">
                                                        <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Thumb">
                                                                    <Border Background="{TemplateBinding Background}"
                                                                            CornerRadius="8"
                                                                            Margin="2"/>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource GridLightPinkAccentBrush}"/>
                                                            </Trigger>
                                                            <Trigger Property="IsDragging" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource GridDeepPinkAccentBrush}"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Thumb.Style>
                                            </Thumb>
                                        </Track.Thumb>
                                    </Track>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ScrollViewer Style for Skill Tree -->
        <Style x:Key="SkillTreeScrollViewerStyle" TargetType="ScrollViewer">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" Grid.Row="0"/>
                            <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.Row="1"
                                      Orientation="Horizontal"
                                      Style="{StaticResource SkillTreeScrollBarStyle}"
                                      Value="{TemplateBinding HorizontalOffset}"
                                      Maximum="{TemplateBinding ScrollableWidth}"
                                      ViewportSize="{TemplateBinding ViewportWidth}"
                                      Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- TO-DO: Change to brushes -->
        <!-- Default ComboBoxItem style: black text on dropdown so items are readable -->
        <Style TargetType="ComboBoxItem">
            <Setter Property="Foreground" Value="Black"/>
        </Style>

        <!-- Dark theme ComboBox style for code-behind usage -->
        <Style x:Key="DarkComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton x:Name="ToggleButton"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          Focusable="False" ClickMode="Press">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Background="{StaticResource ToggleButtonBackgroundBrush}" BorderBrush="{StaticResource ToggleButtonBorderBrush}" BorderThickness="1" CornerRadius="3" Cursor="Hand">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="16"/>
                                                </Grid.ColumnDefinitions>
                                                <Path Grid.Column="1" Fill="{StaticResource ComboBoxTextBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                      Data="M 0 0 L 3.5 3.5 L 7 0 Z"/>
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <ContentPresenter IsHitTestVisible="False"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              Margin="6,3,18,3" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <ContentPresenter.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                            <Popup x:Name="PART_Popup" IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom" AllowsTransparency="True" Focusable="False"
                                   PopupAnimation="Slide">
                                <Border Background="{StaticResource ToggleButtonBackgroundBrush}" BorderBrush="{StaticResource ToggleButtonBorderBrush}" BorderThickness="1" CornerRadius="3" Margin="0,1,0,0"
                                        MinWidth="{TemplateBinding ActualWidth}">
                                    <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Foreground" Value="{StaticResource ComboBoxItemTextBrush}"/>
                        <Setter Property="Background" Value="{StaticResource ComboBoxItemBackgroundBrush}"/>
                        <Setter Property="Padding" Value="6,4"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBoxItem">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsHighlighted" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{StaticResource ComboBoxItemBackgroundHighLightedBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <!-- Viewbox scales all content proportionally with window size -->
    <Viewbox Stretch="Fill">
        <!-- Design canvas at reference size - wider to fit all header buttons -->
        <Grid Width="1405" Height="901">
            <Grid.RowDefinitions>
                <RowDefinition Height="36"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Border x:Name="TitleBarBorder" Grid.Row="0" Background="{StaticResource PinkBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Icon and Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,0,0">
                    <TextBlock Text="" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtTitleBarVersion" Text="Conditioning Control Panel" Foreground="White" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Window Control Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="BtnMinimize" Content="" Width="46" Height="36" 
                            Click="BtnMinimize_Click" Style="{StaticResource WindowControlButton}"/>
                    <Button x:Name="BtnMaximize" Content="" Width="46" Height="36" 
                            Click="BtnMaximize_Click" Style="{StaticResource WindowControlButton}"/>
                    <Button x:Name="BtnClose" Content="" Width="46" Height="36" 
                            Click="BtnClose_Click" Style="{StaticResource WindowCloseButton}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Header Bar - Row 1 -->
        <Border Grid.Row="1" Background="{StaticResource PanelBgBrush}" Padding="15,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title + Player Title + App Name + Version -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Content Mode Toggle (BS/SH) -->
                    <Border x:Name="ContentModeToggleBorder" Background="{StaticResource ContentModeToggleBackgroundBrush}" CornerRadius="8" Padding="6,3" Margin="0,0,10,0"
                            VerticalAlignment="Center" ToolTip="Switch between Bambi Sleep and Sissy Hypno content modes">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="TxtModeBS" Text="BS" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"
                                       Foreground="{StaticResource PinkBrush}" Margin="0,0,4,0"/>
                            <CheckBox x:Name="ChkContentMode" VerticalAlignment="Center" Margin="0"
                                      Checked="ChkContentMode_Changed" Unchecked="ChkContentMode_Changed">
                                <CheckBox.Template>
                                    <ControlTemplate TargetType="CheckBox">
                                        <Border x:Name="track" Width="28" Height="14" Background="{StaticResource SliderTrackBackgroundBrush}" CornerRadius="7" Cursor="Hand">
                                            <Ellipse x:Name="thumb" Width="10" Height="10" Fill="White" HorizontalAlignment="Left" Margin="2,0,0,0"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="track" Property="Background" Value="{StaticResource PatreonPurpleBrush}"/>
                                                <Setter TargetName="thumb" Property="HorizontalAlignment" Value="Right"/>
                                                <Setter TargetName="thumb" Property="Margin" Value="0,0,2,0"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </CheckBox.Template>
                            </CheckBox>
                            <TextBlock x:Name="TxtModeSH" Text="EAR" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"
                                       Foreground="{StaticResource HelpButtonForegroundBrush}" Margin="4,0,0,0"/>
                        </StackPanel>
                    </Border>
                    <TextBlock x:Name="TxtPlayerTitle" Text="Basic Bimbo" Foreground="{StaticResource PinkBrush}"
                               FontSize="18" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,12,0">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="8" ShadowDepth="0" Opacity="0.6"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <Border Background="{StaticResource PinkBrush}" CornerRadius="12" Padding="10,4" Margin="0,0,20,0">
                        <TextBlock x:Name="TxtLevel" Text="Lvl 1" Foreground="White" FontWeight="Bold" FontSize="12"/>
                    </Border>
                    <TextBlock x:Name="TxtHeaderVersion" Text="" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Normal"
                               VerticalAlignment="Bottom" Margin="6,0,0,2"/>
                    <!-- Streak Fire Icon (unlocked by Good Girl Streak skill) -->
                    <StackPanel x:Name="StreakFirePill" Orientation="Horizontal" VerticalAlignment="Center"
                                Margin="10,0,0,0" Visibility="Collapsed"
                                ToolTip="Daily login streak (Good Girl Streak skill)">
                        <TextBlock Text="" FontFamily="Segoe UI Emoji" FontSize="14" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtStreakFireCount" Text="0" Foreground="{StaticResource OrangeAccentBrush}" FontSize="14"
                                   FontWeight="Bold" VerticalAlignment="Center" Margin="2,0,0,0"/>
                        <TextBlock x:Name="TxtStreakShieldIcon" Text="" FontFamily="Segoe UI Emoji" FontSize="12"
                                   VerticalAlignment="Center" Margin="4,0,0,0" Visibility="Collapsed"
                                   ToolTip="Streak shield available  protects your streak if you miss a day"/>
                    </StackPanel>
                </StackPanel>

                <!-- Row 1 Tab Buttons: Settings, Presets, Progression, Assets -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="BtnSettings" Tag="Settings" Style="{StaticResource TabButtonActive}"
                            Margin="3,0" Click="BtnSettings_Click" ToolTip="Dashboard">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Dashboard" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnPresets" Tag="Presets" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnPresets_Click" ToolTip="Presets &amp; Sessions">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Presets" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnProgression" Tag="Progression" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnProgression_Click" ToolTip="Level &amp; Progression">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Progression" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnQuests" Tag="Quests" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnQuests_Click" ToolTip="Daily &amp; Weekly Quests">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Quests" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnEnhancements" Tag="Enhancements" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnEnhancements_Click" ToolTip="Bimbo Enhancement Tree">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Enhancements" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnOpenAssetsTop" Tag="Assets" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnAssets_Click" ToolTip="Assets &amp; Content Packs">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="Assets" FontSize="11"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnLab" Tag="Lab" Style="{StaticResource TabButton}"
                            Margin="3,0" Click="BtnLab_Click" ToolTip="The Lab  Experimental Features">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0"/>
                            <TextBlock Text="The Lab" FontSize="11"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Right side: Latest Version Button -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <ComboBox x:Name="CmbPresets" Width="160" Margin="0,0,10,0" Visibility="Collapsed"
                              SelectionChanged="CmbPresets_SelectionChanged"
                              ToolTip="Select a preset configuration">
                        <ComboBox.Style>
                            <Style TargetType="ComboBox">
                                <Setter Property="Background" Value="{StaticResource ComboBoxBackgroundBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Padding" Value="8,6"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ComboBox">
                                            <Grid>
                                                <ToggleButton x:Name="ToggleButton"
                                                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                              Focusable="False" ClickMode="Press">
                                                    <ToggleButton.Template>
                                                        <ControlTemplate TargetType="ToggleButton">
                                                            <Border Background="{StaticResource ComboBoxBackgroundBrush}" BorderBrush="{StaticResource PinkBrush}"
                                                                    BorderThickness="1" CornerRadius="4" Cursor="Hand">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="20"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <Path Grid.Column="1" Fill="{StaticResource ComboBoxDropDownArrowBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                          Data="M 0 0 L 4 4 L 8 0 Z"/>
                                                                </Grid>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </ToggleButton.Template>
                                                </ToggleButton>
                                                <ContentPresenter x:Name="ContentSite" IsHitTestVisible="False"
                                                                  Content="{TemplateBinding SelectionBoxItem}"
                                                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                                  Margin="8,6,25,6" VerticalAlignment="Center" HorizontalAlignment="Left">
                                                    <ContentPresenter.Resources>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                                        </Style>
                                                    </ContentPresenter.Resources>
                                                </ContentPresenter>
                                                <TextBlock x:Name="Watermark" Text="Preset" Foreground="{StaticResource ComboBoxWatermarkBrush}"
                                                           Margin="8,6,25,6" VerticalAlignment="Center" IsHitTestVisible="False"
                                                           Visibility="Collapsed"/>
                                                <Popup x:Name="PART_Popup" IsOpen="{TemplateBinding IsDropDownOpen}"
                                                       Placement="Bottom" AllowsTransparency="True" Focusable="False"
                                                       PopupAnimation="Slide">
                                                    <Border Background="{StaticResource ComboBoxBackgroundBrush}" BorderBrush="{StaticResource PinkBrush}"
                                                            BorderThickness="1" CornerRadius="4" Margin="0,2,0,0"
                                                            MinWidth="{TemplateBinding ActualWidth}">
                                                        <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                                            <ItemsPresenter/>
                                                        </ScrollViewer>
                                                    </Border>
                                                </Popup>
                                            </Grid>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="SelectedItem" Value="{x:Null}">
                                                    <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ComboBox.Style>
                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="ComboBoxItem">
                                <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                <Setter Property="Background" Value="{StaticResource ComboBoxBackgroundBrush}"/>
                                <Setter Property="Padding" Value="8,6"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ComboBoxItem">
                                            <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource TransparentPinkBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ComboBox.ItemContainerStyle>
                    </ComboBox>
                    <Button x:Name="BtnUpdateAvailable" Content=" v5.5.15 IS OUT! "
                            Click="BtnUpdateAvailable_Click" ToolTip="v5.5.15 - Remote Control Improvements"
                            FontSize="11" FontWeight="Bold" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{StaticResource UpdateButtonBackgroundBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="MinWidth" Value="110"/>
                                <Setter Property="Height" Value="32"/>
                                <Setter Property="Padding" Value="12,6"/>
                                <Setter Property="Tag" Value="NoUpdate"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="6" BorderThickness="1" BorderBrush="{StaticResource UpdateButtonBorderBrush}"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource UpdateButtonHoverBackgroundBrush}"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource UpdateButtonHoverBorderBrush}"/>
                                                </Trigger>
                                                <Trigger Property="Tag" Value="UpdateAvailable">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource DarkPinkBrush}"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                    <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontSize" Value="13"/>
                                                </Trigger>
                                                <!-- Server-controlled urgent update - bright red -->
                                                <Trigger Property="Tag" Value="UrgentUpdate">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource DangerBrush}"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource WarningRedBackgroundBrush}"/>
                                                    <Setter TargetName="border" Property="BorderThickness" Value="3"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontSize" Value="12"/>
                                                    <Setter Property="FontWeight" Value="ExtraBold"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Row 2: Banner + Second row buttons + Patreon Login -->
        <Border Grid.Row="2" Background="{StaticResource PanelBgBrush}" Padding="10,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.85*"/>
                    <ColumnDefinition Width="1.15*"/>
                </Grid.ColumnDefinitions>

                <!-- Banner -->
                <Border Grid.Column="0" Background="{StaticResource AchievementTileBackgroundBrush}" CornerRadius="8" Padding="12,8" Margin="0,0,6,0">
                    <Grid>
                        <TextBlock x:Name="TxtBannerPrimary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="1">
                            <Run Text="If you love the project please "/>
                            <Run Text="consider supporting it" FontWeight="Bold"/>
                            <Run Text=" "/>
                            <Hyperlink NavigateUri="https://linktr.ee/CodeBambi" RequestNavigate="HandleHyperlinkClick">
                                <Run Text="https://linktr.ee/CodeBambi"/>
                            </Hyperlink>
                        </TextBlock>
                        <TextBlock x:Name="TxtBannerSecondary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="0" IsHitTestVisible="False"
                                   Text="Welcome back!"/>
                        <TextBlock x:Name="TxtBannerTertiary" Foreground="{StaticResource PinkBrush}"
                                   FontSize="14" FontStyle="Italic" FontWeight="Bold"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   TextAlignment="Center" Opacity="0" IsHitTestVisible="False">
                            <Hyperlink NavigateUri="https://www.patreon.com/c/PlatinumPuppets" RequestNavigate="HandleHyperlinkClick">
                                <Run Text="A special thanks to Platinum Puppets for providing the audios "/>
                            </Hyperlink>
                        </TextBlock>
                    </Grid>
                </Border>

                <!-- Right side: Achievements, Leaderboard, Companion, Assets buttons + Patreon Login + Help -->
                <Grid Grid.Column="1" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1.1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1.2*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" x:Name="BtnAchievements" Tag="Achievements" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnAchievements_Click" ToolTip="Achievements">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="10" Margin="0,0,3,0"/>
                            <TextBlock Text="Achievements" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="1" x:Name="BtnLeaderboard" Tag="Leaderboard" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnLeaderboard_Click" ToolTip="Leaderboard">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="10" Margin="0,0,3,0"/>
                            <TextBlock Text="Leaderboard" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="2" x:Name="BtnCompanion" Tag="Companion" Style="{StaticResource TabButton}"
                            Margin="2,0" Click="BtnCompanion_Click" ToolTip="Companion Settings">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="10" Margin="0,0,3,0"/>
                            <TextBlock Text="Companion" FontSize="10"/>
                        </StackPanel>
                    </Button>

                    <Button Grid.Column="3" x:Name="BtnDiscordTab" Tag="Profile" Click="BtnDiscordTab_Click"
                            ToolTip="Profile" Cursor="Hand" Height="32" Margin="2,0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{StaticResource DiscordBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FontSize" Value="10"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="6" BorderThickness="2" BorderBrush="{StaticResource DiscordDarkBrush}"
                                                    Padding="7,3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource DiscordDarkBrush}"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource DiscordBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="10" Margin="0,0,3,0"/>
                            <TextBlock Text="Profile" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="4" x:Name="BtnPatreonExclusives" Tag="Patreon" Click="BtnPatreonExclusives_Click"
                            ToolTip="View Patreon exclusive features" Cursor="Hand" Height="32" Margin="2,0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{StaticResource PatreonBrandBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FontSize" Value="10"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="6" BorderThickness="2" BorderBrush="{StaticResource PatreonBrandDarkBrush}"
                                                    Padding="7,3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource PatreonBrandDarkBrush}"/>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PatreonBrandBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="10" Margin="0,0,3,0"/>
                            <TextBlock Text="Exclusives" FontSize="10"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnMainHelp" Grid.Column="5" Content="?" Click="BtnMainHelp_Click"
                            Width="26" Height="26" ToolTip="How to use the app" Margin="3,0">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{StaticResource PinkBrush}" CornerRadius="13" Width="26" Height="26" Cursor="Hand">
                                    <TextBlock Text="?" Foreground="White" FontWeight="Bold" FontSize="16"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.85"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Grid>
        </Border>

        <!-- XP Progress Bar + Stat Pills - Row 3 -->
        <Grid Grid.Row="3" Margin="15,10,15,5">
            <!-- Main content with XP bar and stat pills -->
            <Grid x:Name="XPBarContent">
                <Grid.ColumnDefinitions>
                    <!-- XP Bar section (fills remaining space) -->
                    <ColumnDefinition Width="*"/>
                    <!-- Bonuses + Stat Pills (shrinks to fit content) -->
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- LEFT SIDE: XP Bar -->
                <Grid Grid.Column="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="TxtLevelLabel" Grid.Column="0" Text="LVL 1" Foreground="{StaticResource PinkBrush}"
                               FontWeight="Bold" FontSize="12" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <Border Grid.Column="1" Background="{StaticResource XPBarBackgroundBrush}" CornerRadius="4" Height="8" Margin="0,0,10,0">
                        <Border x:Name="XPBar" Background="{StaticResource PinkBrush}" CornerRadius="4"
                                HorizontalAlignment="Left" Width="100"/>
                    </Border>
                    <TextBlock x:Name="TxtXP" Grid.Column="2" Text="0 / 70 XP" Foreground="{StaticResource TextMutedBrush}"
                               FontSize="11" VerticalAlignment="Center" Margin="0,0,15,0"/>
                </Grid>

                <!-- RIGHT SIDE: Active Bonuses + Stat Pills -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <!-- Active XP Bonus Chips (dynamically populated) -->
                    <StackPanel x:Name="XPBarBonusList" Orientation="Horizontal"/>

                    <!-- Pink Hours Stat: Total Conditioning Time (Unlocks at 5 points) -->
                    <Border x:Name="PillConditioningTime" Background="{StaticResource PillBackgroundBrush}" CornerRadius="10" Padding="10,4" Margin="0,0,8,0"
                            Visibility="Collapsed" ToolTip="Total conditioning time (Pink Hours skill)">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="TxtPillConditioningTime" Text="0h 0m" Foreground="{StaticResource TextMutedBrush}" FontSize="11" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Hive Mind Stat: Online Users (Unlocks at 60 points total) -->
                    <Border x:Name="PillOnlineUsers" Background="{StaticResource PillBackgroundBrush}" CornerRadius="10" Padding="10,4" Margin="0,0,8,0"
                            Visibility="Collapsed" ToolTip="Bimbos online now (Hive Mind skill)">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="TxtPillOnlineUsers" Text="0" Foreground="{StaticResource SuccessBrush}" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Popular Girl Stat: Rank Percentile (Unlocks at 130 points total) -->
                    <Border x:Name="PillRankPercentile" Background="{StaticResource PillBackgroundBrush}" CornerRadius="10" Padding="10,4"
                            Visibility="Collapsed" ToolTip="Your rank percentile (Popular Girl skill)">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="" FontSize="12" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="TxtPillRankPercentile" Text="Top 0%" Foreground="{StaticResource GoldBrush}" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- Login overlay - shown when not logged in -->
            <Border x:Name="XPBarLoginOverlay" Background="{StaticResource XPBarOverlayBrush}" CornerRadius="4" Visibility="Collapsed">
                <TextBlock Text="Login with Discord or Patreon to track your XP!"
                           Foreground="{StaticResource PinkBrush}" FontSize="11" FontWeight="SemiBold"
                           HorizontalAlignment="Center" VerticalAlignment="Center"
                           Opacity="0.9"/>
            </Border>
        </Grid>

        <!-- Main Content - Settings Tab -->
        <ContentControl x:Name="SettingsTab" Grid.Row="4" Margin="10,5,10,2" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="330"/>
                <ColumnDefinition Width="360"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- LEFT COLUMN -->
            <ScrollViewer Grid.Column="0" Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5">
                <StackPanel>
                    
                    <!-- Flash Images Section -->
                    <Border x:Name="FlashSection" CornerRadius="10" Padding="10,6" Margin="0,0,0,6" BorderThickness="1"
                            Background="{StaticResource SectionBackgroundBrush}"
                            BorderBrush="{StaticResource SectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid Margin="0,0,0,2">
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Flash Images" Margin="0"/>
                                <Button x:Name="HelpBtnFlash" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="FlashImages"/>
                            </Grid>
                            
                            <!-- Enable / Clickable / Hydra in one row -->
                            <Grid Margin="0,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0"
                                            ToolTip="Turn flash images on or off">
                                    <CheckBox x:Name="ChkFlashEnabled" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                              Checked="ChkFlashEnabled_Changed" Unchecked="ChkFlashEnabled_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,10,0"
                                            ToolTip="When enabled, clicking an image dismisses it.&#x0a;When disabled, images are click-through.">
                                    <CheckBox x:Name="ChkClickable" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                              Checked="ChkClickable_Changed" Unchecked="ChkClickable_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Click" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Orientation="Horizontal"
                                            ToolTip="Hydra Mode: Clicking an image spawns&#x0a;two more images instead of dismissing it.&#x0a;Creates an escalating challenge!">
                                    <CheckBox x:Name="ChkCorruption" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkCorruption_Changed" Unchecked="ChkCorruption_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Hydra" Margin="5,0,0,0" FontSize="11"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Per Hour / Images in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="How many flash events occur per hour.&#x0a;Higher values = more frequent flashes.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour" FontSize="11"/><TextBlock x:Name="TxtPerMin" Style="{StaticResource ValueLabel}" Text="10" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderPerMin" Minimum="1" Maximum="180" Value="10" Margin="0,1" ValueChanged="SliderPerMin_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="Number of images shown per flash event.&#x0a;Multiple images appear simultaneously.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Images" FontSize="11"/><TextBlock x:Name="TxtImages" Style="{StaticResource ValueLabel}" Text="5" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderImages" Minimum="1" Maximum="15" Value="5" Margin="0,1" ValueChanged="SliderImages_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Max On Screen -->
                            <Grid Margin="0,2,0,0" ToolTip="Maximum images displayed at once.&#x0a;Limits screen clutter during Hydra mode.">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Max On Screen" FontSize="11"/>
                                <TextBlock x:Name="TxtMaxOnScreen" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="20"/>
                            </Grid>
                            <Slider x:Name="SliderMaxOnScreen" Minimum="5" Maximum="20" Value="20" Margin="0,1" ValueChanged="SliderMaxOnScreen_Changed"/>
                        </StackPanel>
                    </Border>

                    <!-- Visuals Section -->
                    <Border x:Name="VisualsSection" CornerRadius="10" Padding="10,6" Margin="0,0,0,6" BorderThickness="1"
                            Background="{StaticResource AudioSectionBackgroundBrush}"
                            BorderBrush="{StaticResource AudioSectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid Margin="0,0,0,2">
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Visuals" Margin="0"/>
                                <Button x:Name="HelpBtnVisuals" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Visuals"/>
                            </Grid>
                            
                            <!-- Size / Opacity in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="Scale of flash images.&#x0a;100% = original size, 200% = double size.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Size" FontSize="11"/><TextBlock x:Name="TxtSize" Style="{StaticResource ValueLabel}" Text="100%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSize" Minimum="50" Maximum="250" Value="100" Margin="0,1" ValueChanged="SliderSize_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="Transparency of flash images.&#x0a;Lower = more see-through, 100% = fully solid.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Opacity" FontSize="11"/><TextBlock x:Name="TxtOpacity" Style="{StaticResource ValueLabel}" Text="100%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderOpacity" Minimum="10" Maximum="100" Value="100" Margin="0,1" ValueChanged="SliderOpacity_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Fade / Duration in two columns -->
                            <Grid Margin="0,2,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" ToolTip="Fade in/out animation speed.&#x0a;0% = instant appear/disappear.&#x0a;100% = slow smooth fade.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Fade" FontSize="11"/><TextBlock x:Name="TxtFade" Style="{StaticResource ValueLabel}" Text="50%" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFade" Minimum="0" Maximum="100" Value="50" Margin="0,1" ValueChanged="SliderFade_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" ToolTip="How long images stay on screen.&#x0a;Only used when audio is disabled.">
                                    <Grid><TextBlock Style="{StaticResource SettingLabel}" Text="Duration" FontSize="11"/><TextBlock x:Name="TxtFlashDuration" Style="{StaticResource ValueLabel}" Text="5s" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFlashDuration" Minimum="1" Maximum="30" Value="5" Margin="0,1" ValueChanged="SliderFlashDuration_Changed"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Link to Audio -->
                            <Border Background="{StaticResource AudioPanelBackgroundBrush}" CornerRadius="5" Padding="8,6" Margin="0,5,0,0"
                                    ToolTip="When enabled, flash duration matches audio length.&#x0a;Disable to use manual duration slider.&#x0a;Audio disabled automatically above 60 flashes/hour.">
                                <Grid>
                                    <CheckBox x:Name="ChkFlashAudio" IsChecked="True" Checked="ChkFlashAudio_Changed" Unchecked="ChkFlashAudio_Changed">
                                        <TextBlock Text=" Link to Audio Trigger" FontSize="12" FontWeight="SemiBold"/>
                                    </CheckBox>
                                    <TextBlock x:Name="TxtAudioWarning" Text=" Max 30/h" Foreground="{StaticResource OrangeAccentBrush}" FontSize="10" 
                                               HorizontalAlignment="Right" VerticalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Logo (Clickable for Neon Obsession achievement + Easter Egg) -->
                    <Border Background="{StaticResource TransparentBlackBrush}" Padding="0" Height="260" Margin="0,0,0,8"
                            Cursor="Hand" MouseLeftButtonDown="ImgLogo_MouseLeftButtonDown"
                            ToolTip="Click me rapidly! ">
                        <Border CornerRadius="20" ClipToBounds="True">
                            <Image x:Name="ImgLogo" Stretch="Uniform"
                                   HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                        </Border>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- MIDDLE COLUMN -->
            <ScrollViewer Grid.Column="1" Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5">
                <StackPanel>
                    
                    <!-- Mandatory Video Section -->
                    <Border x:Name="VideoSection" CornerRadius="10" Padding="10,7" Margin="0,0,0,6" BorderThickness="1"
                            Background="{StaticResource VideoSectionBackgroundBrush}"
                            BorderBrush="{StaticResource VideoSectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Mandatory Video"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button x:Name="HelpBtnVideo" Style="{StaticResource HelpButtonStyle}" Tag="Video" Margin="0,0,8,0"/>
                                    <Button x:Name="BtnTestVideo" Content=" Test" Style="{StaticResource OutlineButton}"
                                            Padding="10,4" Click="BtnTestVideo_Click"
                                            ToolTip="Play a random video now to test"/>
                                </StackPanel>
                            </Grid>

                            <!-- Enable + Strict + Per Hour -->
                            <Grid Margin="0,5,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="30"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Orientation="Horizontal" ToolTip="Turn mandatory videos on or off">
                                    <CheckBox x:Name="ChkVideoEnabled" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkVideoEnabled_Changed" Unchecked="ChkVideoEnabled_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" Margin="6,0,15,0"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" ToolTip="Strict mode: videos cannot be skipped, must watch entirely">
                                    <CheckBox x:Name="ChkStrictLock" Style="{StaticResource ToggleStyle}" Checked="ChkStrictLock_Checked" Unchecked="ChkStrictLock_Unchecked"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text=" Strict" Foreground="{StaticResource OrangeAccentBrush}" Margin="6,0,15,0"/>
                                </StackPanel>
                                <Slider Grid.Column="2" x:Name="SliderPerHour" Minimum="1" Maximum="20" Value="2" ValueChanged="SliderPerHour_Changed"
                                        ToolTip="Videos per hour"/>
                                <TextBlock x:Name="TxtPerHour" Grid.Column="3" Style="{StaticResource ValueLabel}" Text="2" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Mini-Game Sub-Section -->
                            <Border Background="{StaticResource MiniGameBackgroundBrush}" CornerRadius="6" Padding="10,7" Margin="0,7,0,0">
                                <StackPanel>
                                    <Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text=" Mini-Game" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                            <Button x:Name="HelpBtnMiniGame" Style="{StaticResource HelpButtonStyle}" Tag="MiniGame"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkMiniGameEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"
                                                  Checked="ChkMiniGameEnabled_Changed" Unchecked="ChkMiniGameEnabled_Changed"
                                                  ToolTip="Enable attention check targets"/>
                                    </Grid>

                                    <!-- Targets / Duration / Size -->
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0" Margin="0,0,6,0" ToolTip="Number of targets to click per video">
                                            <Grid>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Targets" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/>
                                                    <CheckBox x:Name="ChkRandomizeTargets" Margin="6,0,0,0" VerticalAlignment="Center"
                                                              ToolTip="Randomize target count (1 to max)"
                                                              Checked="ChkRandomizeTargets_Changed" Unchecked="ChkRandomizeTargets_Changed">
                                                        <TextBlock Text="" FontSize="9" ToolTip="Randomize"/>
                                                    </CheckBox>
                                                </StackPanel>
                                                <TextBlock x:Name="TxtTargets" Text="3" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/>
                                            </Grid>
                                            <Slider x:Name="SliderTargets" Minimum="1" Maximum="10" Value="3" Margin="0,3,0,0" ValueChanged="SliderTargets_Changed"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Margin="3,0" ToolTip="Seconds each target stays visible">
                                            <Grid><TextBlock Text="Duration" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/><TextBlock x:Name="TxtDuration" Text="5" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/></Grid>
                                            <Slider x:Name="SliderDuration" Minimum="1" Maximum="15" Value="5" Margin="0,3,0,0" ValueChanged="SliderDuration_Changed"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2" Margin="6,0,0,0" ToolTip="Target button size in pixels">
                                            <Grid><TextBlock Text="Size" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/><TextBlock x:Name="TxtTargetSize" Text="70" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/></Grid>
                                            <Slider x:Name="SliderTargetSize" Minimum="30" Maximum="150" Value="70" Margin="0,3,0,0" ValueChanged="SliderTargetSize_Changed"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,7,0,0">
                                        <Button Content=" Phrases" Style="{StaticResource PinkButton}" Padding="8,5" Click="BtnManageAttention_Click"
                                                ToolTip="Edit attention check phrases"/>
                                        <Button Content=" Style" Style="{StaticResource OutlineButton}" Margin="8,0,0,0" Padding="8,5" Click="BtnAttentionStyle_Click"
                                                ToolTip="Customize target appearance (colors, border, font)"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Subliminals Section -->
                    <Border x:Name="SubliminalSection" CornerRadius="10" Padding="10,7" Margin="0,0,0,6" BorderThickness="1"
                            Background="{StaticResource AudioSectionBackgroundBrush}"
                            BorderBrush="{StaticResource AudioSectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Subliminals"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button x:Name="HelpBtnSubliminals" Style="{StaticResource HelpButtonStyle}" Tag="Subliminals" Margin="0,0,8,0"/>
                                    <Button Content="" Style="{StaticResource OutlineButton}" Padding="6,3" Click="BtnManageMessages_Click" Margin="0,0,4,0"
                                            ToolTip="Edit subliminal messages"/>
                                    <Button Content="" Style="{StaticResource OutlineButton}" Padding="6,3" Click="BtnSubliminalSettings_Click" Margin="0,0,8,0"
                                            ToolTip="Advanced subliminal visual settings"/>
                                    <CheckBox x:Name="ChkSubliminalEnabled" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkSubliminalEnabled_Changed" Unchecked="ChkSubliminalEnabled_Changed"
                                              ToolTip="Enable/disable subliminal messages"/>
                                </StackPanel>
                            </Grid>

                            <!-- Per Min / Frames / Opacity in 3 columns -->
                            <Grid Margin="0,6,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0" Margin="0,0,6,0" ToolTip="Messages shown per minute">
                                    <Grid><TextBlock Text="Per Min" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/><TextBlock x:Name="TxtSubPerMin" Text="5" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSubPerMin" Minimum="1" Maximum="30" Value="5" Margin="0,3,0,0" ValueChanged="SliderSubPerMin_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="3,0" ToolTip="Display duration in frames.&#x0a;Lower = faster flash, harder to read.">
                                    <Grid><TextBlock Text="Frames" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/><TextBlock x:Name="TxtFrames" Text="2" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderFrames" Minimum="1" Maximum="10" Value="2" Margin="0,3,0,0" ValueChanged="SliderFrames_Changed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Margin="6,0,0,0" ToolTip="Text visibility. Lower = more subtle.">
                                    <Grid><TextBlock Text="Opacity" FontSize="11" Foreground="{StaticResource MutedLavenderBrush}"/><TextBlock x:Name="TxtSubOpacity" Text="80%" FontSize="11" Foreground="{StaticResource TextLightBrush}" HorizontalAlignment="Right"/></Grid>
                                    <Slider x:Name="SliderSubOpacity" Minimum="10" Maximum="100" Value="80" Margin="0,3,0,0" ValueChanged="SliderSubOpacity_Changed"/>
                                </StackPanel>
                            </Grid>

                            <!-- Audio Whispers -->
                            <Grid Margin="0,6,0,0" ToolTip="Play whispered audio when subliminal messages appear.">
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox x:Name="ChkAudioWhispers" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkAudioWhispers_Changed" Unchecked="ChkAudioWhispers_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text=" Audio Whispers" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Slider x:Name="SliderWhisperVol" Minimum="0" Maximum="100" Value="50" Width="100" ValueChanged="SliderWhisperVol_Changed"/>
                                    <TextBlock x:Name="TxtWhisperVol" Style="{StaticResource ValueLabel}" Text="50%" Width="40"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- System Section -->
                    <Border x:Name="SystemSection" CornerRadius="10" Padding="10,7" Margin="0,0,0,6" BorderThickness="1"
                            Background="{StaticResource SectionBackgroundBrush}"
                            BorderBrush="{StaticResource SectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" System"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button x:Name="HelpBtnSystem" Style="{StaticResource HelpButtonStyle}" Tag="System" Margin="0,0,8,0"/>
                                    <Button Content="" Style="{StaticResource OutlineButton}"
                                            Padding="6,3" Click="BtnPickAssetsFolder_Click" Margin="0,0,4,0"
                                            ToolTip="Set custom assets folder"/>
                                    <Button Content=" Assets" Style="{StaticResource OutlineButton}"
                                            Padding="8,3" Click="BtnOpenAssetsFolder_Click"
                                            ToolTip="Open assets folder (images, videos, sounds)"/>
                                </StackPanel>
                            </Grid>

                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Show content on all connected monitors (2, 3, or more)">
                                    <CheckBox x:Name="ChkDualMon" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkDualMon_Changed" Unchecked="ChkDualMon_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Multi Mon" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Launch automatically when Windows starts">
                                    <CheckBox x:Name="ChkWinStart" Style="{StaticResource ToggleStyle}" Click="ChkWinStart_Click"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Win Start" Margin="6,0,0,0"/>
                                </StackPanel>

                                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Play a mandatory video when app opens">
                                    <CheckBox x:Name="ChkVidLaunch" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Vid Launch" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Start the engine automatically on launch">
                                    <CheckBox x:Name="ChkAutoRun" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Auto Run" Margin="6,0,0,0"/>
                                </StackPanel>

                                <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Start minimized to system tray">
                                    <CheckBox x:Name="ChkStartHidden" Style="{StaticResource ToggleStyle}" Click="ChkStartHidden_Click"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Start Hidden" Margin="6,0,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,3"
                                            ToolTip=" DANGER: Completely disables panic key!&#x0a;You won't be able to emergency stop.&#x0a;Use with extreme caution.">
                                    <CheckBox x:Name="ChkNoPanic" Style="{StaticResource ToggleStyle}" Checked="ChkNoPanic_Checked" Unchecked="ChkNoPanic_Unchecked"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text=" No Panic" Margin="6,0,0,0" Foreground="{StaticResource WarningBrush}"/>
                                </StackPanel>

                                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Margin="0,3"
                                            ToolTip="Disable all network features (updates, AI, leaderboard).&#x0a;App runs completely offline with no external connections.">
                                    <CheckBox x:Name="ChkOfflineMode" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkOfflineMode_Changed" Unchecked="ChkOfflineMode_Changed"/>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Offline Mode" Margin="6,0,0,0"/>
                                </StackPanel>
                            </Grid>

                            <!-- Startup Video Selection -->
                            <StackPanel Orientation="Horizontal" Margin="0,5,0,0"
                                        ToolTip="Select a specific video to play on startup (when Vid Launch is enabled)">
                                <TextBlock Text="Startup Video:" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center" Width="75"/>
                                <TextBlock x:Name="TxtStartupVideo" Text="(Random)" Foreground="{StaticResource TextLightBrush}" FontSize="10"
                                           VerticalAlignment="Center" Width="90" TextTrimming="CharacterEllipsis"/>
                                <Button Content="" Background="{StaticResource TransparentWhiteBrush}" Foreground="White" BorderThickness="0"
                                        Padding="5,1" Margin="4,0,0,0" Cursor="Hand" Click="BtnSelectStartupVideo_Click"
                                        ToolTip="Browse for startup video"/>
                                <Button Content="" Background="{StaticResource TransparentDangerBrush}" Foreground="White" BorderThickness="0"
                                        Padding="5,1" Margin="4,0,0,0" Cursor="Hand" Click="BtnClearStartupVideo_Click"
                                        ToolTip="Clear selection (use random)"/>
                            </StackPanel>

                            <!-- Gaming Tip -->
                            <Grid Margin="0,5,0,0">
                                <TextBlock Text=" Use Borderless Windowed for overlays" Foreground="{StaticResource HelpButtonForegroundBrush}" FontSize="10" VerticalAlignment="Center"
                                           ToolTip="Exclusive fullscreen games block overlays.&#x0a;Use Borderless Windowed mode instead."/>
                                <Button x:Name="BtnPanicKey" Content=" Escape" Style="{StaticResource OutlineButton}"
                                        HorizontalAlignment="Right" Padding="10,4" Click="BtnPanicKey_Click" ToolTip="Click to change panic key"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- RIGHT COLUMN -->
            <Grid Grid.Column="2" Grid.Row="0" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Browser Section -->
                <Border Grid.Row="0" CornerRadius="10" Padding="9" Margin="0,0,0,5" BorderThickness="1"
                        Background="{StaticResource SectionBackgroundBrush}"
                        BorderBrush="{StaticResource SectionBorderBrush}">
                    <Border.Effect>
                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                    </Border.Effect>
                    <StackPanel>
                        <!-- Browser Header - single row with title, tabs, status, pop out -->
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Browser" Margin="0"/>
                                <Button x:Name="HelpBtnBrowser" Style="{StaticResource HelpButtonStyle}" Tag="Browser"/>
                            </StackPanel>
                            <!-- Site Toggle - inline -->
                            <Border Grid.Column="1" Background="{StaticResource ContentModeToggleBackgroundBrush}" CornerRadius="10" Padding="2" Margin="10,0,0,0" VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton x:Name="RbBambiCloud" Content="BambiCloud" GroupName="BrowserSite"
                                                 IsChecked="True" Checked="BrowserSiteToggle_Changed"
                                                 Foreground="{StaticResource TextLightBrush}" FontSize="10" Cursor="Hand" Margin="2,1">
                                        <RadioButton.Template>
                                            <ControlTemplate TargetType="RadioButton">
                                                <Border x:Name="border" Background="Transparent" CornerRadius="8" Padding="8,3">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="{StaticResource PinkBrush}"/>
                                                        <Setter Property="Foreground" Value="White"/>
                                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                                    </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource RadioButtonHoverBrush}"/>
                                                </Trigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsChecked" Value="True"/>
                                                        <Condition Property="IsMouseOver" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource RadioButtonCheckedHoverBrush}"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </RadioButton.Template>
                                </RadioButton>
                                <RadioButton x:Name="RbHypnoTube" Content="GiveInToMe" GroupName="BrowserSite"
                                             Checked="BrowserSiteToggle_Changed"
                                             Foreground="{StaticResource TextLightBrush}" FontSize="10" Cursor="Hand" Margin="2,1">
                                    <RadioButton.Template>
                                        <ControlTemplate TargetType="RadioButton">
                                            <Border x:Name="border" Background="Transparent" CornerRadius="8" Padding="8,3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource PinkBrush}"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource RadioButtonHoverBrush}"/>
                                                </Trigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsChecked" Value="True"/>
                                                        <Condition Property="IsMouseOver" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource RadioButtonCheckedHoverBrush}"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </RadioButton.Template>
                                </RadioButton>
                                </StackPanel>
                            </Border>
                            <!-- Status indicator -->
                            <TextBlock Grid.Column="3" x:Name="TxtBrowserStatus" Text=" Loading..."
                                       Foreground="{StaticResource PinkBrush}" FontSize="10"
                                       VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <!-- Pop Out button -->
                            <Button Grid.Column="4" x:Name="BtnPopOutBrowser" Content=" Pop Out"
                                    Click="BtnPopOutBrowser_Click"
                                    ToolTip="Pop out browser to resizable window"
                                    FontSize="9" Padding="6,3" VerticalAlignment="Center">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="{StaticResource BrowserPopOutButtonBackgroundBrush}"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource BrowserPopOutButtonHoverBrush}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource BrowserPopOutButtonPressedBrush}"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <!-- Browser Container -->
                        <Border Background="{StaticResource BrowserBackgroundBrush}" CornerRadius="6" ClipToBounds="True" Height="365">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Audio Sync Controls (shown when audio sync enabled) -->
                                <Border x:Name="AudioSyncLatencyPanel" Grid.Row="0" Background="{StaticResource BrowserAudioSyncPanelBackgroundBrush}" Padding="6,3" Visibility="Collapsed">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="8"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Delay Slider (left half) -->
                                        <Grid Grid.Column="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="40"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Delay:" Foreground="{StaticResource TextSilverBrush}" FontSize="9" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <Slider x:Name="SliderAudioSyncLatency" Grid.Column="1" Minimum="-600" Maximum="600" Value="0"
                                                    VerticalAlignment="Center" ValueChanged="SliderAudioSyncLatency_Changed"
                                                    ToolTip="Adjust haptic timing: positive = earlier, negative = later"/>
                                            <TextBlock x:Name="TxtAudioSyncLatency" Grid.Column="2" Text="0ms" Foreground="{StaticResource PinkBrush}" FontSize="9"
                                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                        </Grid>

                                        <!-- Intensity Slider (right half) -->
                                        <Grid Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Power:" Foreground="{StaticResource TextSilverBrush}" FontSize="9" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <Slider x:Name="SliderAudioSyncIntensity" Grid.Column="1" Minimum="0" Maximum="100" Value="100"
                                                    VerticalAlignment="Center" ValueChanged="SliderAudioSyncIntensity_Changed"
                                                    ToolTip="Live intensity control - reduce if vibration is too strong"/>
                                            <TextBlock x:Name="TxtAudioSyncIntensity" Grid.Column="2" Text="100%" Foreground="{StaticResource PinkBrush}" FontSize="9"
                                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                        </Grid>
                                    </Grid>
                                </Border>

                                <Grid x:Name="BrowserContainer" Grid.Row="1">
                                    <!-- WebView2 will be added here programmatically -->
                                    <TextBlock x:Name="BrowserLoadingText"
                                               Text=" Connecting to Bambi Cloud..."
                                               Foreground="{StaticResource TextMutedBrush}" FontSize="12"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Audio Section + Quick Actions -->
                <Grid Grid.Row="1" Margin="0,5,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Audio Section (left half) -->
                    <Border x:Name="AudioSection" Grid.Column="0" CornerRadius="10" Padding="9" Margin="0,0,0,6" BorderThickness="1" VerticalAlignment="Stretch"
                            Background="{StaticResource AudioSectionBackgroundBrush}"
                            BorderBrush="{StaticResource AudioSectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid>
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Audio" FontSize="12"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <Button x:Name="HelpBtnAudio" Style="{StaticResource HelpButtonStyle}" Tag="Audio" Margin="0,0,8,0"/>
                                    <TextBlock Text="Duck" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                    <CheckBox x:Name="ChkAudioDuck" Style="{StaticResource ToggleStyle}"
                                              IsChecked="True"
                                              Checked="ChkAudioDuck_Changed" Unchecked="ChkAudioDuck_Changed"
                                              ToolTip="Automatically reduce other app volumes during videos"/>
                                </StackPanel>
                            </Grid>

                            <!-- Master Volume -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Master" FontSize="10"
                                           ToolTip="Master volume for all audio"/>
                                <Slider Grid.Column="1" x:Name="SliderMaster" Minimum="0" Maximum="100" Value="50"
                                        Margin="4,0" ValueChanged="SliderMaster_Changed"
                                        ToolTip="Overall audio volume level"/>
                                <TextBlock x:Name="TxtMaster" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="50%" FontSize="10"/>
                            </Grid>

                            <!-- Video Volume -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Video" FontSize="10"
                                           ToolTip="Volume for mandatory videos"/>
                                <Slider Grid.Column="1" x:Name="SliderVideoVolume" Minimum="0" Maximum="100" Value="50"
                                        Margin="4,0" ValueChanged="SliderVideoVolume_Changed"
                                        ToolTip="Separate volume control for videos"/>
                                <TextBlock x:Name="TxtVideoVolume" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="50%" FontSize="10"/>
                            </Grid>

                            <!-- Duck % -->
                            <Grid Margin="0,4,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="32"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource SettingLabel}" Text="Duck" FontSize="10"
                                           ToolTip="How much to reduce other audio"/>
                                <Slider Grid.Column="1" x:Name="SliderDuck" Minimum="0" Maximum="100" Value="80"
                                        Margin="4,0" ValueChanged="SliderDuck_Changed"
                                        ToolTip="Ducking percentage (80% = reduce other audio to 20%)"/>
                                <TextBlock x:Name="TxtDuck" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="80%" FontSize="10"/>
                            </Grid>

                            <!-- Exclude BambiCloud from ducking -->
                            <CheckBox x:Name="ChkExcludeBambiCloudDucking" Margin="0,4,0,0"
                                      Content="Don't duck browser"
                                      IsChecked="True"
                                      Checked="ChkExcludeBambiCloudDucking_Changed"
                                      Unchecked="ChkExcludeBambiCloudDucking_Changed"
                                      ToolTip="When enabled, audio from the integrated BambiCloud browser won't be reduced during ducking"
                                      Foreground="{StaticResource LightPinkBrush}" FontSize="9"/>
                        </StackPanel>
                    </Border>

                    <!-- Quick Actions (right half) -->
                    <Border Grid.Column="2" CornerRadius="10" Padding="9" Margin="0,0,0,6" BorderThickness="1" VerticalAlignment="Stretch"
                            Background="{StaticResource SectionBackgroundBrush}"
                            BorderBrush="{StaticResource SectionBorderBrush}">
                        <Border.Effect>
                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                        </Border.Effect>
                        <StackPanel>
                            <Grid Margin="0,0,0,6">
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Quick Links" FontSize="12" Margin="0"/>
                                <Button x:Name="HelpBtnQuickLinks" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="QuickLinks"/>
                            </Grid>

                            <!-- Unified Login Button -->
                            <Button x:Name="BtnUnifiedLogin" Content=" Login"
                                    Click="BtnUnifiedLogin_Click"
                                    Padding="8,12" Margin="0,0,0,6"
                                    ToolTip="Login with Discord or Patreon">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                        <Setter Property="FontSize" Value="12"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource GridDeepPinkBrush}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource GridDarkPinkBrush}"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!-- Logged In Status (shown when logged in) -->
                            <Border x:Name="LoggedInStatusPanel" Visibility="Collapsed"
                                    Background="{StaticResource PanelBgBrush}" CornerRadius="6" Padding="10,8" Margin="0,0,0,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock x:Name="TxtLoggedInAs" Text="Logged in as"
                                                   Foreground="{StaticResource TextMutedBrush}" FontSize="10"/>
                                        <TextBlock x:Name="TxtLoggedInName" Text="Username"
                                                   Foreground="White" FontWeight="Bold" FontSize="12"/>
                                    </StackPanel>
                                    <Button x:Name="BtnQuickLogout" Grid.Column="1" Content="Logout"
                                            Click="BtnQuickLogout_Click"
                                            Padding="10,5" Background="{StaticResource DarkPurpleBrush}" Foreground="{StaticResource PinkBrush}"
                                            BorderThickness="0" FontSize="10" Cursor="Hand"/>
                                </Grid>
                            </Border>

                            <!-- Discord Join Button + Rich Presence -->
                            <Grid Margin="0,4,0,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Click="BtnDiscord_Click"
                                        ToolTip="Join the Discord community" Cursor="Hand"
                                        HorizontalAlignment="Stretch">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="BorderThickness" Value="0"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{StaticResource DiscordBrush}" CornerRadius="5"
                                                                Padding="0,4" HorizontalAlignment="Stretch">
                                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                                <TextBlock Text="" FontSize="11" VerticalAlignment="Center"/>
                                                                <TextBlock Text="Join Discord" Foreground="White" FontSize="10" FontWeight="Bold"
                                                                           VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                            </StackPanel>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="{StaticResource GridMutedBlueAccentBrush}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="6,0,0,0">
                                    <StackPanel.ToolTip>
                                        <ToolTip Background="{StaticResource DeepBlueBrush}" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1" Padding="10">
                                            <StackPanel MaxWidth="280">
                                                <TextBlock Text="Discord Rich Presence" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold" Margin="0,0,0,6"/>
                                                <TextBlock Foreground="{StaticResource LightGrayBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,8">
                                                    Shows "Playing Conditioning Control Panel" in your Discord status, along with your current level and session time.
                                                </TextBlock>
                                                <TextBlock Text="Who can see this?" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,4"/>
                                                <TextBlock Foreground="{StaticResource TextSilverBrush}" FontSize="10" TextWrapping="Wrap">
                                                    Only people who can already see your Discord activity status (friends, server members if enabled in your Discord privacy settings). This does NOT send notifications - it simply updates your "Currently Playing" status like any other game.
                                                </TextBlock>
                                            </StackPanel>
                                        </ToolTip>
                                    </StackPanel.ToolTip>
                                    <CheckBox x:Name="ChkQuickDiscordRichPresence" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkDiscordRichPresence_Changed" Unchecked="ChkDiscordRichPresence_Changed">
                                        <CheckBox.LayoutTransform>
                                            <ScaleTransform ScaleX="0.85" ScaleY="0.85"/>
                                        </CheckBox.LayoutTransform>
                                    </CheckBox>
                                    <TextBlock Text="RP" Foreground="{StaticResource TextMutedBrush}" FontSize="9"
                                               VerticalAlignment="Center" Margin="4,0,0,0"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>

            <!-- Scrolling Marquee Banner - spans all columns -->
            <Border x:Name="MarqueeBanner" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"
                    Background="{StaticResource MarqueeBannerBackgroundBrush}" BorderBrush="{StaticResource DarkPinkBrush}" BorderThickness="2"
                    CornerRadius="8" Height="48" Margin="5,5,5,0" ClipToBounds="True">
                <Border.Effect>
                    <DropShadowEffect Color="{StaticResource DarkPinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                </Border.Effect>
                <Canvas x:Name="MarqueeCanvas" ClipToBounds="True">
                    <TextBlock x:Name="MarqueeText"
                               Text="v5.2.1 IS OUT - THANKS TO ALL THE 100+ PATREONS AND TO ALL THE SUPPORTERS/TESTERS "
                               FontFamily="Impact" FontSize="28" FontWeight="Bold"
                               Foreground="{StaticResource PinkBrush}" Canvas.Top="8">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="{StaticResource DarkPinkColor}" BlurRadius="8" ShadowDepth="0" Opacity="0.8"/>
                        </TextBlock.Effect>
                        <TextBlock.RenderTransform>
                            <TranslateTransform x:Name="MarqueeTransform"/>
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </Canvas>
            </Border>
            </Grid>
        </ContentControl>

        <!-- Presets Tab (Hidden by default) -->
        <ContentControl x:Name="PresetsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <!-- Main Content -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="430" MinWidth="300" MaxWidth="700"/>
                </Grid.ColumnDefinitions>

                <!-- Left Side: Presets and Sessions -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Top Section: Preset Cards Row -->
                    <Border Grid.Row="0" Style="{StaticResource SectionPanel}" Margin="5,5,5,0" Padding="10">
                        <StackPanel>
                            <Grid Margin="0,0,0,8">
                                <TextBlock Style="{StaticResource SectionHeader}" Text=" Presets" Margin="0"/>
                                <Button x:Name="HelpBtnPresets" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Presets"/>
                            </Grid>
                            
                            <!-- Horizontal Scrolling Preset Cards -->
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                          PreviewMouseWheel="HorizontalScrollViewer_PreviewMouseWheel">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Preset Cards Container -->
                                    <StackPanel x:Name="PresetCardsPanel" Orientation="Horizontal">
                                        <!-- Preset cards will be generated here dynamically -->
                                </StackPanel>
                                
                                <!-- Fixed "New Preset" Card -->
                                <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="6" Padding="8" Margin="4,0,0,0" 
                                        Width="100" Height="70" Cursor="Hand"
                                        MouseLeftButtonUp="BtnNewPreset_Click"
                                        ToolTip="Create a new preset from current settings">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                    <Setter Property="Background" Value="{StaticResource GridHeaderBorderBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="" FontSize="20" HorizontalAlignment="Center" Foreground="{StaticResource PinkBrush}"/>
                                        <TextBlock Text="New" FontSize="10" FontWeight="Bold" 
                                                   Foreground="{StaticResource PinkBrush}" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- Bottom Section: Sessions -->
                <Border Grid.Row="1" Style="{StaticResource SectionPanel}" Margin="5,8,5,5" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="2*"/>
                            <RowDefinition Height="*" MinHeight="120"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" Margin="0,0,0,10">
                            <TextBlock Style="{StaticResource SectionHeader}" Text=" Sessions"/>
                            <Button x:Name="HelpBtnSessions" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Sessions"/>
                        </Grid>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="SessionsPanel">
                                <!-- Morning Drift - Available -->
                                <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionMorningDrift" MouseLeftButtonUp="SessionCard_Click" Tag="morning_drift">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text=" Morning Drift" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="30 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text=" Easy" Foreground="{StaticResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+400 XP" Foreground="{StaticResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Gentle subliminals &amp; bouncing text with gradual pink filter"
                                                       Foreground="{StaticResource TextSilverBrush}" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Edit Session"
                                                    Tag="morning_drift" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Export Session"
                                                    Tag="morning_drift" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Gamer Girl - Available -->
                                <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionGamerGirl" MouseLeftButtonUp="SessionCard_Click" Tag="gamer_girl">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text=" Gamer Girl" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="45 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text=" Medium" Foreground="{StaticResource GoldBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+800 XP" Foreground="{StaticResource GoldBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Non-intrusive conditioning with pink filter &amp; spiral overlay"
                                                       Foreground="{StaticResource TextSilverBrush}" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Edit Session"
                                                    Tag="gamer_girl" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Export Session"
                                                    Tag="gamer_girl" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- The Distant Doll - Available -->
                                <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionDistantDoll" MouseLeftButtonUp="SessionCard_Click" Tag="distant_doll">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text=" The Distant Doll" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="45 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text=" Easy" Foreground="{StaticResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+400 XP" Foreground="{StaticResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Large visuals for couch viewing, no audio ducking"
                                                       Foreground="{StaticResource TextSilverBrush}" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Edit Session"
                                                    Tag="distant_doll" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Export Session"
                                                    Tag="distant_doll" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Good Girls Don't Cum - Available -->
                                <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="8" Padding="16,14" Margin="0,0,0,8"
                                        Cursor="Hand" x:Name="SessionGoodGirls" MouseLeftButtonUp="SessionCard_Click" Tag="good_girls_dont_cum">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="{StaticResource PanelAccentBrush}"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text=" Good Girls Don't Cum" Foreground="White" FontWeight="SemiBold" FontSize="15"/>
                                                <Border Background="{StaticResource PinkBrush}" CornerRadius="3" Padding="8,3" Margin="10,0,0,0">
                                                    <TextBlock Text="60 MIN" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text=" Hard" Foreground="{StaticResource OrangeAccentBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                                <Border Background="{StaticResource PrimaryActionDarkGreenBrush}" CornerRadius="3" Padding="8,3" Margin="6,0,0,0">
                                                    <TextBlock Text="+1200 XP" Foreground="{StaticResource OrangeAccentBrush}" FontSize="10" FontWeight="Bold"/>
                                                </Border>
                                            </StackPanel>
                                            <TextBlock Text="Denial session with heavy conditioning and escalating intensity."
                                                       Foreground="{StaticResource TextSilverBrush}" FontSize="13" Margin="0,6,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Edit Session"
                                                    Tag="good_girls_dont_cum" Click="SessionBtn_Edit"/>
                                            <Button Style="{StaticResource SessionActionButton}" Content="" ToolTip="Export Session"
                                                    Tag="good_girls_dont_cum" Click="SessionBtn_Export"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Custom/Imported Sessions Section -->
                                <TextBlock x:Name="TxtCustomSessionsHeader" Text="Your Sessions:" Foreground="{StaticResource PinkBrush}"
                                           FontSize="13" FontWeight="SemiBold" Margin="0,16,0,10" Visibility="Collapsed"/>
                                <StackPanel x:Name="CustomSessionsPanel"/>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Drop Zone and Editor Panel -->
                        <Grid Grid.Row="2" Margin="0,8,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left: Drop Zone -->
                            <Border Grid.Column="0"
                                    x:Name="SessionDropZone"
                                    Background="{StaticResource DeepBlueBrush}"
                                    BorderBrush="{StaticResource PanelAccentBrush}"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Margin="0,0,4,0"
                                    AllowDrop="True"
                                    Drop="SessionDropZone_Drop"
                                    DragEnter="SessionDropZone_DragEnter"
                                    DragLeave="SessionDropZone_DragLeave"
                                    DragOver="SessionDropZone_DragOver">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="{StaticResource GridMutedPurpleBrush}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock x:Name="DropZoneIcon" Text="" FontSize="28" HorizontalAlignment="Center" Foreground="{StaticResource GridMutedLavenderBrush}"/>
                                    <TextBlock Text="Drag &amp; Drop" FontSize="13" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center" Margin="0,6,0,0"/>
                                    <TextBlock Text=".session.json" FontSize="11"
                                               Foreground="{StaticResource GridMutedDarkGrayBrush}" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    <TextBlock x:Name="DropZoneStatus" Text="" FontSize="10"
                                               Foreground="{StaticResource PinkBrush}" HorizontalAlignment="Center" Margin="0,6,0,0"
                                               Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- Right: Session Editor Panel -->
                            <Border Grid.Column="1"
                                    Background="{StaticResource DeepBlueBrush}"
                                    BorderBrush="{StaticResource PanelAccentBrush}"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Margin="4,0,0,0">
                                <Grid>
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="Session Editor" FontSize="13" FontWeight="SemiBold"
                                                   Foreground="{StaticResource PinkBrush}" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Create custom sessions" FontSize="11"
                                                   Foreground="{StaticResource GridMutedLavenderBrush}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,12,0,0">
                                            <Button x:Name="BtnCreateSession" Content="+ Create New"
                                                    Click="BtnCreateSession_Click"
                                                    Background="{StaticResource PinkBrush}" Foreground="White"
                                                    BorderThickness="0"
                                                    Padding="12,6" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                                                    Margin="0,0,8,0">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button x:Name="BtnExportSession" Content="Export"
                                                    Click="BtnExportSession_Click"
                                                    IsEnabled="False"
                                                    Background="{StaticResource PillBackgroundBrush}" Foreground="{StaticResource TextMutedBrush}"
                                                    BorderBrush="{StaticResource PanelAccentBrush}" BorderThickness="1"
                                                    Padding="12,6" FontSize="11" Cursor="Hand">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}"
                                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                                            CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                    </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsEnabled" Value="True">
                                                                <Setter Property="Foreground" Value="White"/>
                                                                <Setter Property="Background" Value="{StaticResource GridDeepBlueBgBrush}"/>
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource PinkBrush}"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>

                <!-- Splitter -->
                <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                              Background="{StaticResource PanelAccentBrush}" Cursor="SizeWE"/>

            <!-- Right Side: Details Panel -->
            <Border Grid.Column="2" Style="{StaticResource SectionPanel}" Margin="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,12">
                        <Grid>
                            <TextBlock x:Name="TxtDetailTitle" Text="Select a Preset"
                                       Foreground="{StaticResource PinkBrush}" FontSize="18" FontWeight="Bold"/>
                            <Button x:Name="HelpBtnSessionDetails" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="SessionDetails"/>
                        </Grid>
                        <TextBlock x:Name="TxtDetailSubtitle" Text="Click on a preset or session to see details"
                                   Foreground="{StaticResource TextMutedBrush}" FontSize="12" TextWrapping="Wrap" Margin="0,5,0,0"/>
                    </StackPanel>
                    
                    <!-- Details Content - Preset View -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" x:Name="PresetDetailScroller">
                        <StackPanel x:Name="DetailContentPanel">
                            <!-- Preset details will show here -->
                            <TextBlock Text=" Flash Images" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailFlash" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text=" Mandatory Videos" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailVideo" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text=" Subliminals" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailSubliminal" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text=" Audio" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailAudio" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text=" Overlays" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailOverlays" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                            
                            <TextBlock Text=" Advanced" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtDetailAdvanced" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,12"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Details Content - Session View (Spoiler-Free) -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" x:Name="SessionDetailScroller" Visibility="Collapsed">
                        <StackPanel x:Name="SessionDetailPanel">
                            <!-- Session Duration & Difficulty -->
                            <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                        <TextBlock Text=" Duration" Foreground="{StaticResource TextMutedBrush}" FontSize="10" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="TxtSessionDuration" Text="30 minutes" Foreground="White" 
                                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                        <TextBlock Text=" Reward" Foreground="{StaticResource TextMutedBrush}" FontSize="10" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="TxtSessionXP" Text="+50 XP" Foreground="{StaticResource SuccessBrush}" 
                                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Difficulty Badge -->
                            <Border x:Name="DifficultyBadge" Background="{StaticResource PillBackgroundBrush}" CornerRadius="6" Padding="8,4" 
                                    Margin="0,0,0,12" HorizontalAlignment="Center">
                                <TextBlock x:Name="TxtSessionDifficulty" Text=" Easy" Foreground="{StaticResource GoldBrush}" 
                                           FontSize="12" FontWeight="Bold"/>
                            </Border>
                            
                            <!-- Spoiler-Free Description -->
                            <TextBlock x:Name="TxtSessionDescription" TextWrapping="Wrap" Foreground="{StaticResource LightGrayBrush}" FontSize="12" 
                                       LineHeight="20" Margin="0,0,0,16"
                                       Text="Let the morning carry you away..."/>
                            
                            <!-- Corner GIF Option (shown for Gamer Girl session) -->
                            <Border x:Name="CornerGifOptionPanel" Background="{StaticResource CornerGifOptionPanelBackgroundBrush}" CornerRadius="6" Padding="10" 
                                    Margin="0,0,0,12" Visibility="Collapsed">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text=" Corner GIF" Foreground="{StaticResource PinkBrush}" 
                                                   FontWeight="Bold" FontSize="11"/>
                                        <CheckBox x:Name="ChkCornerGifEnabled" Style="{StaticResource ToggleStyle}" 
                                                  HorizontalAlignment="Right" Checked="ChkCornerGifEnabled_Changed" 
                                                  Unchecked="ChkCornerGifEnabled_Changed"/>
                                    </Grid>
                                    <TextBlock x:Name="TxtCornerGifDesc" Text="Place a subtle GIF in a screen corner" 
                                               Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap"/>
                                    
                                    <StackPanel x:Name="CornerGifSettings" Visibility="Collapsed" Margin="0,8,0,0">
                                        <Button x:Name="BtnSelectCornerGif" Content=" Select GIF" 
                                                Style="{StaticResource OutlineButton}" Padding="8,6" FontSize="10"
                                                Margin="0,0,0,8" Click="BtnSelectCornerGif_Click"/>
                                        <TextBlock Text="Position:" Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,0,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <RadioButton x:Name="RbCornerTL" Content=" Top-Left" Foreground="White"
                                                         GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                            <RadioButton x:Name="RbCornerTR" Grid.Column="1" Content=" Top-Right"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                            <RadioButton x:Name="RbCornerBL" Grid.Row="1" Content=" Bottom-Left"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10" IsChecked="True"/>
                                            <RadioButton x:Name="RbCornerBR" Grid.Row="1" Grid.Column="1" Content=" Bottom-Right"
                                                         Foreground="White" GroupName="CornerPos" Margin="0,2" FontSize="10"/>
                                        </Grid>

                                        <!-- Size Slider -->
                                        <TextBlock Text="Size:" Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,10,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="50"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider x:Name="SliderCornerGifSize" Minimum="100" Maximum="600" Value="300"
                                                    VerticalAlignment="Center" ValueChanged="SliderCornerGifSize_ValueChanged"/>
                                            <TextBlock x:Name="TxtCornerGifSize" Grid.Column="1" Text="300px"
                                                       Foreground="{StaticResource LightGrayBrush}" FontSize="10" VerticalAlignment="Center"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>

                                        <!-- Opacity Slider -->
                                        <TextBlock Text="Opacity:" Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,10,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="50"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider x:Name="SliderCornerGifOpacity" Minimum="5" Maximum="100" Value="20"
                                                    VerticalAlignment="Center" ValueChanged="SliderCornerGifOpacity_ValueChanged"/>
                                            <TextBlock x:Name="TxtCornerGifOpacity" Grid.Column="1" Text="20%"
                                                       Foreground="{StaticResource LightGrayBrush}" FontSize="10" VerticalAlignment="Center"
                                                       HorizontalAlignment="Right"/>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                            
                            <!-- Spoiler Warning -->
                            <Border Background="{StaticResource GridDeepVioletBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text=" Mystery Experience" Foreground="{StaticResource PinkBrush}" 
                                               FontWeight="Bold" FontSize="13" HorizontalAlignment="Center"/>
                                    <TextBlock Text="The magic works best when you don't know what's coming..." 
                                               Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextAlignment="Center" 
                                               Margin="0,6,0,0" FontStyle="Italic"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Reveal Spoilers Button -->
                            <Button x:Name="BtnRevealSpoilers" Content=" Reveal Details" 
                                    Style="{StaticResource OutlineButton}" Padding="12,8" FontSize="12"
                                    Click="BtnRevealSpoilers_Click" Margin="0,0,0,12"
                                    ToolTip=" This will show all session settings - spoils the surprise!"/>
                            
                            <!-- Spoiler Content (Hidden by default) -->
                            <StackPanel x:Name="SessionSpoilerPanel" Visibility="Collapsed">
                                <Border Background="{StaticResource GridDarkPurpleBrush}" CornerRadius="6" Padding="10" Margin="0,0,0,12">
                                    <TextBlock Text=" SPOILERS BELOW " Foreground="{StaticResource WarningBrush}" FontSize="12" 
                                               FontWeight="Bold" HorizontalAlignment="Center"/>
                                </Border>
                                
                                <TextBlock Text=" Flash Images" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionFlash" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text=" Subliminals" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionSubliminal" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10"/>
                                
                                <TextBlock Text=" Audio" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionAudio" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10"/>
                                
                                <TextBlock Text=" Overlays" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionOverlays" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text=" Extras" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionExtras" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                                
                                <TextBlock Text=" Timeline" Foreground="White" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,3"/>
                                <TextBlock x:Name="TxtSessionTimeline" Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Preset Action Buttons -->
                    <StackPanel Grid.Row="2" x:Name="PresetButtonsPanel" Margin="0,10,0,0">
                        <Button x:Name="BtnLoadPreset" Content=" Load Preset" Style="{StaticResource PinkButton}"
                                Margin="0,0,0,6" Padding="12,10" FontSize="13" Click="BtnLoadPreset_Click" IsEnabled="False"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button x:Name="BtnSaveOverPreset" Grid.Column="0" Content=" Save" 
                                    Style="{StaticResource OutlineButton}" Margin="0,0,3,0" Padding="10,8"
                                    Click="BtnSaveOverPreset_Click" IsEnabled="False" FontSize="12"/>
                            <Button x:Name="BtnDeletePreset" Grid.Column="1" Content=" Delete" 
                                    Style="{StaticResource OutlineButton}" Margin="3,0,0,0" Padding="10,8"
                                    Click="BtnDeletePreset_Click" IsEnabled="False" FontSize="12"/>
                        </Grid>
                    </StackPanel>
                    
                    <!-- Session Action Buttons -->
                    <StackPanel Grid.Row="2" x:Name="SessionButtonsPanel" Margin="0,10,0,0" Visibility="Collapsed">
                        <Button x:Name="BtnStartSession" Content=" Start Session" Style="{StaticResource PinkButton}"
                                Padding="12,12" FontSize="14" Click="BtnStartSession_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
            </Grid>
        </ContentControl>

        <!-- Progression Tab (Hidden by default) -->
        <ContentControl x:Name="ProgressionTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="280"/>
            </Grid.ColumnDefinitions>

            <!-- Unlockables -->
            <Border Grid.Column="0" Style="{StaticResource SectionPanel}" Margin="5"
                    ToolTip="Features that unlock as you level up.&#x0a;Keep conditioning to earn XP and unlock new features!">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <Grid>
                        <TextBlock Style="{StaticResource SectionHeader}" Text=" Unlockables" Margin="0"/>
                        <Button x:Name="HelpBtnUnlockables" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Unlockables"/>
                    </Grid>
                    
                    <!-- Spiral Overlay - Lvl 10 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Hypnotic spiral animation overlay.&#x0a;Covers all screens with customizable opacity.&#x0a;Unlocks at Level 10.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="SpiralLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Spiral Overlay" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Lvl 10" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 10 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="SpiralUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text=" Spiral Overlay" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Unlocked" Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable spiral overlay on all monitors"/>
                                    <CheckBox x:Name="ChkSpiralEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkSpiralEnabled_Changed" Unchecked="ChkSpiralEnabled_Changed"
                                              ToolTip="Show hypnotic spiral overlay"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Opacity"
                                               ToolTip="Spiral transparency level"/>
                                    <Slider Grid.Column="1" x:Name="SliderSpiralOpacity" Minimum="5" Maximum="50" Value="15" 
                                            Margin="10,0" ValueChanged="SliderSpiralOpacity_Changed"
                                            ToolTip="Spiral opacity (5% - 50%)"/>
                                    <TextBlock x:Name="TxtSpiralOpacity" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="15%"/>
                                </Grid>
                                <Button Content=" Select GIF" Style="{StaticResource OutlineButton}"
                                        Margin="0,10,0,0" Click="BtnSelectSpiral_Click"
                                        ToolTip="Choose a spiral GIF animation"/>
                                <TextBlock Text=" If you have display problems, try setting your monitor DPI scaling to the recommended settings"
                                           Foreground="{StaticResource OrangeAccentBrush}" FontSize="10" FontStyle="Italic" TextWrapping="Wrap"
                                           Margin="0,8,0,0" Opacity="0.8"/>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="SpiralFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/spiral_overlay.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Pink Filter - Lvl 10 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Pink color tint overlay for all screens.&#x0a;Subtle or intense, you choose!&#x0a;Unlocks at Level 10.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="PinkFilterLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Pink Filter" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Lvl 10" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 10 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="PinkFilterUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text=" Pink Filter" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Unlocked" Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable pink tint overlay"/>
                                    <CheckBox x:Name="ChkPinkFilterEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkPinkFilterEnabled_Changed" Unchecked="ChkPinkFilterEnabled_Changed"
                                              ToolTip="Apply pink color filter to all monitors"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Opacity"
                                               ToolTip="Pink filter intensity"/>
                                    <Slider Grid.Column="1" x:Name="SliderPinkOpacity" Minimum="5" Maximum="50" Value="10" 
                                            Margin="10,0" ValueChanged="SliderPinkOpacity_Changed"
                                            ToolTip="Filter opacity (5% - 50%)"/>
                                    <TextBlock x:Name="TxtPinkOpacity" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="10%"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="PinkFilterFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Pink_filter.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bubble Pop - Lvl 20 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Pop floating bubbles to earn XP!&#x0a;Fun mini-game that spawns periodically.&#x0a;Unlocks at Level 20.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="BubblesLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Bubble Pop" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Lvl 20" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 20 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="BubblesUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text=" Bubble Pop" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Unlocked" Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable bubble pop mini-game"/>
                                    <CheckBox x:Name="ChkBubblesEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBubblesEnabled_Changed" Unchecked="ChkBubblesEnabled_Changed"
                                              ToolTip="Pop bubbles to earn XP!"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Per Min"
                                               ToolTip="Bubbles spawned per minute"/>
                                    <Slider Grid.Column="1" x:Name="SliderBubbleFreq" Minimum="1" Maximum="15" Value="5" 
                                            Margin="10,0" ValueChanged="SliderBubbleFreq_Changed"
                                            ToolTip="Bubble spawn rate"/>
                                    <TextBlock x:Name="TxtBubbleFreq" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="5"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BubblePopFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Bubble_pop.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Lock Card - Lvl 35 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Screen lock that requires typing phrases.&#x0a;Reinforces conditioning through repetition.&#x0a;Unlocks at Level 35.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="LockCardLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Lock Card" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold"/>
                                    <TextBlock Text=" Lvl 35" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 35 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="LockCardUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <TextBlock Text=" Lock Card" Foreground="White" FontWeight="Bold"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content=" Test" Style="{StaticResource OutlineButton}" 
                                                Padding="10,4" FontSize="11" Margin="0,0,8,0"
                                                Click="BtnTestLockCard_Click"
                                                ToolTip="Test a lock card now"/>
                                        <TextBlock Text=" Unlocked" Foreground="{StaticResource SuccessBrush}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Enable"
                                               ToolTip="Enable/disable lock card popups"/>
                                    <CheckBox x:Name="ChkLockCardEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkLockCardEnabled_Changed" Unchecked="ChkLockCardEnabled_Changed"
                                              ToolTip="Show lock cards that require typing to dismiss"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour"
                                               ToolTip="Lock cards shown per hour"/>
                                    <Slider Grid.Column="1" x:Name="SliderLockCardFreq" Minimum="1" Maximum="10" Value="2" 
                                            Margin="10,0" ValueChanged="SliderLockCardFreq_Changed"
                                            ToolTip="Lock card frequency (1-10 per hour)"/>
                                    <TextBlock x:Name="TxtLockCardFreq" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="2"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Repeats"
                                               ToolTip="Times the phrase must be typed"/>
                                    <Slider Grid.Column="1" x:Name="SliderLockCardRepeats" Minimum="1" Maximum="10" Value="3" 
                                            Margin="10,0" ValueChanged="SliderLockCardRepeats_Changed"
                                            ToolTip="Number of times to type the phrase (1-10)"/>
                                    <TextBlock x:Name="TxtLockCardRepeats" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="3x"/>
                                </Grid>
                                <Grid Margin="0,8,0,0">
                                    <TextBlock Style="{StaticResource SettingLabel}" Text="Strict Lock"
                                               ToolTip="Prevent ESC key from closing the lock card"/>
                                    <CheckBox x:Name="ChkLockCardStrict" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right" Checked="ChkLockCardStrict_Checked" Unchecked="ChkLockCardStrict_Unchecked"
                                              ToolTip=" Cannot escape - must complete typing!"/>
                                </Grid>
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content=" Manage Phrases" Style="{StaticResource OutlineButton}" 
                                            Margin="0,0,5,0" Click="BtnManageLockCardPhrases_Click"
                                            ToolTip="Edit phrases that must be typed"/>
                                    <Button Grid.Column="1" Content="" Style="{StaticResource OutlineButton}" 
                                            Width="40" Click="BtnLockCardSettings_Click"
                                            ToolTip="Customize lock card colors"/>
                                </Grid>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="LockCardFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Phrase_Lock.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bubble Count Game - Lvl 50 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Count the bubbles challenge!&#x0a;Memory and attention test for bonus XP.&#x0a;Unlocks at Level 50.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="Level50Locked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Bubble Count" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold"/>
                                    <TextBlock Text=" Lvl 50" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 50 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="Level50Unlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text=" Bubble Count" Foreground="{StaticResource PinkBrush}" FontWeight="Bold"/>
                                        <TextBlock Text=" Lvl 50" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkBubbleCountEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBubbleCountEnabled_Changed" Unchecked="ChkBubbleCountEnabled_Changed"/>
                                </Grid>
                                
                                <StackPanel x:Name="BubbleCountSettings" Margin="0,10,0,0">
                                    <!-- Per Hour -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Per Hour"
                                                   ToolTip="How often the bubble count challenge appears"/>
                                        <TextBlock x:Name="TxtBubbleCountFreq" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="2"/>
                                    </Grid>
                                    <Slider x:Name="SliderBubbleCountFreq" Minimum="1" Maximum="10" Value="2" 
                                            Margin="0,1" ValueChanged="SliderBubbleCountFreq_Changed"
                                            ToolTip="Challenges per hour (1-10)"/>
                                    
                                    <!-- Difficulty -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Difficulty"/>
                                        <ComboBox x:Name="CmbBubbleCountDifficulty" Grid.Column="1" 
                                                  Width="100" Background="{StaticResource DeepBlueBrush}" Foreground="White"
                                                  SelectionChanged="CmbBubbleCountDifficulty_Changed">
                                            <ComboBoxItem Content="Easy" Tag="0"/>
                                            <ComboBoxItem Content="Medium" Tag="1" IsSelected="True"/>
                                            <ComboBoxItem Content="Hard" Tag="2"/>
                                        </ComboBox>
                                    </Grid>
                                    
                                    <!-- Strict Lock -->
                                    <Grid Margin="0,8,0,0">
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Strict Lock"
                                                   ToolTip="Prevent closing until correctly answered"/>
                                        <CheckBox x:Name="ChkBubbleCountStrict" Style="{StaticResource ToggleStyle}" 
                                                  HorizontalAlignment="Right"
                                                  Checked="ChkBubbleCountStrict_Changed" Unchecked="ChkBubbleCountStrict_Changed"/>
                                    </Grid>
                                    
                                    <!-- Test Button -->
                                    <Button Content=" Test Now" 
                                            Background="{StaticResource TransparentWhiteBrush}" Foreground="White" 
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnTestBubbleCount_Click"
                                            ToolTip="Trigger a bubble count challenge now"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BubbleCountFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Bubble_count.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Bouncing Text - Lvl 60 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="DVD screensaver-style bouncing text!&#x0a;Customizable phrases bounce across screen.&#x0a;Unlocks at Level 60.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="Level60Locked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Bouncing Text" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold"/>
                                    <TextBlock Text=" Lvl 60" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 60 to Unlock" Foreground="{StaticResource PinkBrush}" 
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                            
                            <!-- Unlocked State -->
                            <StackPanel x:Name="Level60Unlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text=" Bouncing Text" Foreground="{StaticResource PinkBrush}" FontWeight="Bold"/>
                                        <TextBlock Text=" Lvl 60" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkBouncingTextEnabled" Style="{StaticResource ToggleStyle}" 
                                              HorizontalAlignment="Right"
                                              Checked="ChkBouncingTextEnabled_Changed" Unchecked="ChkBouncingTextEnabled_Changed"/>
                                </Grid>
                                
                                <StackPanel x:Name="BouncingTextSettings" Margin="0,10,0,0">
                                    <!-- Speed -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Speed"
                                                   ToolTip="How fast the text bounces"/>
                                        <TextBlock x:Name="TxtBouncingTextSpeed" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="5"/>
                                    </Grid>
                                    <Slider x:Name="SliderBouncingTextSpeed" Minimum="1" Maximum="10" Value="5" 
                                            Margin="0,1" ValueChanged="SliderBouncingTextSpeed_Changed"
                                            ToolTip="Bounce speed (1=slow, 10=fast)"/>
                                    
                                    <!-- Size -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Size"
                                                   ToolTip="Text size (50% to 300%)"/>
                                        <TextBlock x:Name="TxtBouncingTextSize" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="100%"/>
                                    </Grid>
                                    <Slider x:Name="SliderBouncingTextSize" Minimum="50" Maximum="300" Value="100" 
                                            Margin="0,1" ValueChanged="SliderBouncingTextSize_Changed"
                                            ToolTip="Text size (50%=small, 100%=normal, 300%=huge)"/>
                                    
                                    <!-- XP Info -->
                                    <TextBlock Text=" +10 XP per bounce!" 
                                               Foreground="{StaticResource CompanionAccentGreenBrush}" FontSize="12" 
                                               HorizontalAlignment="Center" Margin="0,8,0,0"/>
                                    
                                    <!-- Edit Phrases -->
                                    <Button Content=" Edit Phrases" 
                                            Background="{StaticResource TransparentWhiteBrush}" Foreground="White" 
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnEditBouncingText_Click"
                                            ToolTip="Customize the bouncing text phrases"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>
                            
                            <!-- Feature Image -->
                            <Rectangle x:Name="BouncingTextFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/bouncing_text.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Brain Drain - DISABLED FOR REWORK -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5" Opacity="0.5"
                            ToolTip="This feature is temporarily disabled while we improve performance.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text=" Brain Drain" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                        <TextBlock Text=" REWORK" Foreground="{StaticResource OrangeAccentBrush}" HorizontalAlignment="Right" FontSize="13" FontWeight="Bold"/>
                                    </Grid>
                                    <Border Background="{StaticResource PillBackgroundBrush}" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                        <TextBlock Text="UP FOR REWORK - This feature is temporarily disabled while we optimize performance. Check back in a future update!"
                                                   Foreground="{StaticResource OrangeAccentBrush}" FontSize="11" TextWrapping="Wrap"/>
                                    </Border>
                                </StackPanel>

                                <!-- Hidden elements to prevent XAML binding errors -->
                                <StackPanel x:Name="BrainDrainLocked" Visibility="Collapsed"/>
                                <StackPanel x:Name="BrainDrainUnlocked" Visibility="Collapsed">
                                    <CheckBox x:Name="ChkBrainDrainEnabled" Visibility="Collapsed"/>
                                    <StackPanel x:Name="BrainDrainSettings" Visibility="Collapsed">
                                        <TextBlock x:Name="TxtBrainDrainIntensity"/>
                                        <Slider x:Name="SliderBrainDrainIntensity"/>
                                        <CheckBox x:Name="ChkBrainDrainHighRefresh"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!-- Feature Image (grayed out) -->
                            <Rectangle x:Name="BrainDrainFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}" Opacity="0.3">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/brain_drain.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <!-- Mind Wipe - Lvl 75 -->
                    <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="12" Margin="0,5"
                            ToolTip="Random mind wipe audio effects!&#x0a;Escalates in frequency during sessions.&#x0a;Unlocks at Level 75.">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                            <!-- Locked State -->
                            <StackPanel x:Name="MindWipeLocked" Visibility="Visible">
                                <Grid>
                                    <TextBlock Text=" Mind Wipe" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text=" Lvl 75" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="13"/>
                                </Grid>
                                <TextBlock Text="Reach Level 75 to Unlock" Foreground="{StaticResource PinkBrush}"
                                           FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>

                            <!-- Unlocked State -->
                            <StackPanel x:Name="MindWipeUnlocked" Visibility="Collapsed">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text=" Mind Wipe" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="14"/>
                                        <TextBlock Text=" Lvl 75" Foreground="{StaticResource PinkBrush}" Margin="8,0,0,0"/>
                                    </StackPanel>
                                    <CheckBox x:Name="ChkMindWipeEnabled" Style="{StaticResource ToggleStyle}"
                                              HorizontalAlignment="Right"
                                              Checked="ChkMindWipeEnabled_Changed" Unchecked="ChkMindWipeEnabled_Changed"/>
                                </Grid>

                                <StackPanel x:Name="MindWipeSettings" Margin="0,10,0,0">
                                    <!-- Frequency -->
                                    <Grid Margin="0,3,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Frequency"
                                                   ToolTip="How many times per hour (outside sessions)"/>
                                        <TextBlock x:Name="TxtMindWipeFreq" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="6/h"/>
                                    </Grid>
                                    <Slider x:Name="SliderMindWipeFreq" Minimum="1" Maximum="180" Value="6"
                                            Margin="0,1" ValueChanged="SliderMindWipeFreq_Changed"
                                            ToolTip="Mind wipe frequency (1-180 per hour)"/>

                                    <!-- Volume -->
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Style="{StaticResource SettingLabel}" Text="Volume"
                                                   ToolTip="Mind wipe audio volume (independent of other audio)"/>
                                        <TextBlock x:Name="TxtMindWipeVolume" Grid.Column="1" Style="{StaticResource ValueLabel}" Text="50%"/>
                                    </Grid>
                                    <Slider x:Name="SliderMindWipeVolume" Minimum="0" Maximum="100" Value="50"
                                            Margin="0,1" ValueChanged="SliderMindWipeVolume_Changed"
                                            ToolTip="Volume level (0-100%)"/>

                                    <!-- Loop Toggle -->
                                    <Grid Margin="0,10,0,0">
                                        <TextBlock Style="{StaticResource SettingLabel}" Text=" Loop in Background"
                                                   ToolTip="Continuously loop a single track instead of random triggers"/>
                                        <CheckBox x:Name="ChkMindWipeLoop" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right"
                                                  Checked="ChkMindWipeLoop_Changed" Unchecked="ChkMindWipeLoop_Changed"/>
                                    </Grid>

                                    <!-- Test Button -->
                                    <Button Content=" Test Now"
                                            Background="{StaticResource TransparentWhiteBrush}" Foreground="White"
                                            BorderThickness="0" Padding="10,5" Margin="0,10,0,0"
                                            Cursor="Hand" Click="BtnTestMindWipe_Click"
                                            ToolTip="Play a mind wipe sound now"/>
                                </StackPanel>
                            </StackPanel>
                            </Grid>

                            <!-- Feature Image -->
                            <Rectangle x:Name="MindWipeFeatureImage" Grid.Column="1" Style="{StaticResource RoundedFeatureImage}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="pack://application:,,,/Resources/features/Mind_Wipers.png" Stretch="UniformToFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Border>

                </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Right Column: Scheduler + Ramp + Community stacked -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                <!-- Scheduler Box -->
                <Border x:Name="SchedulerPanel" Style="{StaticResource SectionPanel}" Margin="5">
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource SectionHeader}" Text=" Scheduler" FontSize="14" Margin="0"/>
                            <Button x:Name="HelpBtnScheduler" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Scheduler"/>
                        </Grid>
                        
                        <!-- Enable -->
                        <Grid Margin="0,3">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" FontSize="12"/>
                            <CheckBox x:Name="ChkSchedulerEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Time Range -->
                        <Grid Margin="0,3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="TxtStartTime" Grid.Column="0" Text="16:00" Background="{StaticResource DeepBlueBrush}" 
                                     Foreground="White" BorderBrush="{StaticResource PinkBrush}" 
                                     Padding="6,4" FontSize="12" TextAlignment="Center"/>
                            <TextBlock Grid.Column="1" Text="?" Foreground="White" FontSize="12" Margin="5,0" VerticalAlignment="Center"/>
                            <TextBox x:Name="TxtEndTime" Grid.Column="2" Text="22:00" Background="{StaticResource DeepBlueBrush}" 
                                     Foreground="White" BorderBrush="{StaticResource PinkBrush}" 
                                     Padding="6,4" FontSize="12" TextAlignment="Center"/>
                        </Grid>
                        
                        <!-- Days -->
                        <WrapPanel Margin="0,3">
                            <CheckBox x:Name="ChkMon" Content="M" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkTue" Content="T" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkWed" Content="W" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkThu" Content="T" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkFri" Content="F" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkSat" Content="S" Foreground="White" Margin="0,0,6,0" IsChecked="True" FontSize="10"/>
                            <CheckBox x:Name="ChkSun" Content="S" Foreground="White" Margin="0,0,0,0" IsChecked="True" FontSize="10"/>
                        </WrapPanel>
                    </StackPanel>
                </Border>
                
                <!-- Intensity Ramp Box -->
                <Border x:Name="RampPanel" Style="{StaticResource SectionPanel}" Margin="5">
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource SectionHeader}" Text=" Intensity Ramp" FontSize="14" Margin="0"/>
                            <Button x:Name="HelpBtnRamp" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="IntensityRamp"/>
                        </Grid>
                        
                        <!-- Enable Ramp -->
                        <Grid Margin="0,3">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Enable" FontSize="12"/>
                            <CheckBox x:Name="ChkRampEnabled" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Duration -->
                        <Grid Margin="0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Duration" FontSize="11"/>
                            <Slider Grid.Column="1" x:Name="SliderRampDuration" Minimum="10" Maximum="180" Value="60" 
                                    Margin="5,0" ValueChanged="SliderRampDuration_Changed"/>
                            <TextBlock x:Name="TxtRampDuration" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="60 min" FontSize="11"/>
                        </Grid>
                        
                        <!-- Multiplier -->
                        <Grid Margin="0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource SettingLabel}" Text="Multiplier" FontSize="11"/>
                            <Slider Grid.Column="1" x:Name="SliderMultiplier" Minimum="1" Maximum="3" Value="1.5" 
                                    Margin="5,0" ValueChanged="SliderMultiplier_Changed"/>
                            <TextBlock x:Name="TxtMultiplier" Grid.Column="2" Style="{StaticResource ValueLabel}" Text="1.5x" FontSize="11"/>
                        </Grid>
                        
                        <!-- End at Ramp -->
                        <Grid Margin="0,2">
                            <TextBlock Style="{StaticResource SettingLabel}" Text="End at Complete" FontSize="11"/>
                            <CheckBox x:Name="ChkEndAtRamp" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Ramp Links -->
                        <TextBlock Text="Link to Ramp" Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,5,0,2"/>
                        <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="4" Padding="6,4">
                            <WrapPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkFlash" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Flash" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkSpiral" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Spiral" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkPink" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Pink" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,8,2">
                                    <CheckBox x:Name="ChkRampLinkMaster" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Master" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                                    <CheckBox x:Name="ChkRampLinkSubAudio" Style="{StaticResource ToggleStyle}"/>
                                    <TextBlock Text="Sub" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                            </WrapPanel>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- Community Discord -->
                <Border Style="{StaticResource SectionPanel}" Margin="5" Padding="10,8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0" Margin="0,0,0,8">
                            <TextBlock Text=" Community" Foreground="{StaticResource PinkBrush}"
                                       FontSize="13" FontWeight="Bold" VerticalAlignment="Center"/>
                            <Button x:Name="HelpBtnCommunity" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Tag="Community"/>
                        </Grid>

                        <!-- Discord Join Button - rectangular -->
                        <Button x:Name="BtnDiscord" Grid.Row="1" Click="BtnDiscord_Click" Cursor="Hand"
                                ToolTip="Click to join our Discord server!">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="discordBorder" Background="{StaticResource DiscordBrush}" CornerRadius="8" Padding="12,8">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Image Source="pack://application:,,,/Resources/discord.png"
                                                   Width="28" Height="28" Stretch="Uniform" VerticalAlignment="Center"/>
                                            <TextBlock Text="Join Discord" Foreground="White" FontSize="13" FontWeight="Bold"
                                                       VerticalAlignment="Center" Margin="10,0,0,0"/>
                                        </StackPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="discordBorder" Property="Background" Value="{StaticResource GridMutedBlueAccentBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Discord Rich Presence Toggle -->
                        <CheckBox x:Name="ChkDiscordRichPresence" Grid.Row="2"
                                  HorizontalAlignment="Center"
                                  Margin="0,8,0,2"
                                  Checked="ChkDiscordRichPresence_Changed"
                                  Unchecked="ChkDiscordRichPresence_Changed">
                            <CheckBox.ToolTip>
                                <ToolTip Background="{StaticResource DeepBlueBrush}" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1" Padding="10">
                                    <StackPanel MaxWidth="280">
                                        <TextBlock Text="Discord Rich Presence" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold" Margin="0,0,0,6"/>
                                        <TextBlock Foreground="{StaticResource LightGrayBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,8">
                                            Shows "Playing Conditioning Control Panel" in your Discord status, along with your current level and session time.
                                        </TextBlock>
                                        <TextBlock Text="Who can see this?" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,4"/>
                                        <TextBlock Foreground="{StaticResource TextSilverBrush}" FontSize="10" TextWrapping="Wrap">
                                            Only people who can already see your Discord activity status (friends, server members if enabled in your Discord privacy settings). This does NOT send notifications - it simply updates your "Currently Playing" status like any other game.
                                        </TextBlock>
                                    </StackPanel>
                                </ToolTip>
                            </CheckBox.ToolTip>
                            <CheckBox.Template>
                                <ControlTemplate TargetType="CheckBox">
                                    <StackPanel Orientation="Horizontal" Cursor="Hand">
                                        <Border x:Name="checkBorder" Width="14" Height="14"
                                                Background="{StaticResource GridHeaderBorderBrush}" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1.5"
                                                CornerRadius="3" VerticalAlignment="Center">
                                            <TextBlock x:Name="checkMark" Text="?" Foreground="{StaticResource PinkBrush}"
                                                       FontSize="10" FontWeight="Bold"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Visibility="Collapsed" Margin="0,-1,0,0"/>
                                        </Border>
                                        <TextBlock Text="Rich Presence" Foreground="{StaticResource TextSilverBrush}" FontSize="10"
                                                   VerticalAlignment="Center" Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                            <Setter TargetName="checkBorder" Property="Background" Value="{StaticResource GridDarkPurpleBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="checkBorder" Property="BorderBrush" Value="{StaticResource AnnouncementMutedPinkBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </CheckBox.Template>
                        </CheckBox>
                    </Grid>
                </Border>

                <!-- App Info / Updates -->
                <Border Style="{StaticResource SectionPanel}" Margin="5" Padding="10,8">
                    <Grid>
                        <Button x:Name="HelpBtnAppInfo" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,0,0,0" Tag="AppInfo"/>
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="App Info" Foreground="{StaticResource PinkBrush}"
                                       FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtVersion" Text="Version" Foreground="{StaticResource TextSecondaryBrush}"
                                   FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <Button x:Name="BtnCheckUpdates" Content="Check for Updates"
                                Click="BtnCheckUpdates_Click" Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="{StaticResource PanelBgBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="16,8"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="{TemplateBinding Background}"
                                                        CornerRadius="6" Padding="{TemplateBinding Padding}"
                                                        BorderBrush="{StaticResource PanelAccentBrush}" BorderThickness="1">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="{StaticResource GridMutedNavyBrush}"/>
                                                        <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsEnabled" Value="False">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                        </StackPanel>
                    </Grid>
                </Border>
            </StackPanel>
            </ScrollViewer>
            </Grid>
        </ContentControl>

        <!-- Quests Tab -->
        <ContentControl x:Name="QuestsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
            <Border Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <!-- Sub-tab Navigation -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <Button x:Name="BtnQuestSubDaily" Content="Daily/Weekly"
                                    Style="{StaticResource TabButtonActive}"
                                    Click="BtnQuestSubDaily_Click" Width="120"/>
                            <Button x:Name="BtnQuestSubRoadmap" Content="BIMBO JOURNAL"
                                    Style="{StaticResource TabButton}"
                                    Click="BtnQuestSubRoadmap_Click" Margin="10,0,0,0" Width="150"/>
                        </StackPanel>

                        <!-- Daily/Weekly Quests Panel -->
                        <StackPanel x:Name="DailyWeeklyPanel">
                            <!-- Season Title Banner -->
                            <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="12" Padding="20,14" Margin="0,0,0,18"
                                    BorderThickness="1" BorderBrush="{StaticResource GridBorderMutedBrush}">
                                <TextBlock x:Name="TxtSeasonTitle" Text="Fucked-up February"
                                           FontSize="28" FontWeight="ExtraBold" FontStyle="Italic"
                                           HorizontalAlignment="Center" TextAlignment="Center">
                                    <TextBlock.Foreground>
                                        <LinearGradientBrush x:Name="SeasonTitleBrush" StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop x:Name="SeasonGrad1" Color="{StaticResource PinkColor}" Offset="0.0"/>
                                            <GradientStop x:Name="SeasonGrad2" Color="{StaticResource OrchidColor}" Offset="0.25"/>
                                            <GradientStop x:Name="SeasonGrad3" Color="{StaticResource DarkPinkColor}" Offset="0.5"/>
                                            <GradientStop x:Name="SeasonGrad4" Color="{StaticResource OrchidColor}" Offset="0.75"/>
                                            <GradientStop x:Name="SeasonGrad5" Color="{StaticResource PinkColor}" Offset="1.0"/>
                                        </LinearGradientBrush>
                                    </TextBlock.Foreground>
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.6"/>
                                    </TextBlock.Effect>
                                    <TextBlock.Triggers>
                                        <EventTrigger RoutedEvent="Loaded">
                                            <BeginStoryboard>
                                                <Storyboard RepeatBehavior="Forever">
                                                    <!-- Shimmer: animate gradient start/end points -->
                                                    <PointAnimation Storyboard.TargetName="SeasonTitleBrush"
                                                                    Storyboard.TargetProperty="StartPoint"
                                                                    From="-1,0.5" To="1,0.5"
                                                                    Duration="0:0:3"/>
                                                    <PointAnimation Storyboard.TargetName="SeasonTitleBrush"
                                                                    Storyboard.TargetProperty="EndPoint"
                                                                    From="0,0.5" To="2,0.5"
                                                                    Duration="0:0:3"/>
                                                    <!-- Pulsing glow -->
                                                    <DoubleAnimation Storyboard.TargetName="TxtSeasonTitle"
                                                                     Storyboard.TargetProperty="(TextBlock.Effect).(DropShadowEffect.Opacity)"
                                                                     From="0.3" To="0.9"
                                                                     Duration="0:0:1.5"
                                                                     AutoReverse="True"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </TextBlock.Triggers>
                                </TextBlock>
                            </Border>

                            <!-- Header -->
                            <Grid Margin="0,0,0,20">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text=" QUESTS" Foreground="{StaticResource PinkBrush}" FontSize="18" FontWeight="Bold"/>
                                    <Button x:Name="HelpBtnQuests" Style="{StaticResource HelpButtonStyle}" Tag="Quests"/>
                                </StackPanel>
                                <TextBlock x:Name="TxtQuestStats" Text="0 completed this week"
                                           Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" HorizontalAlignment="Right"
                                           VerticalAlignment="Center"/>
                            </Grid>

                            <!-- Two-column layout for Daily and Weekly -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- DAILY QUEST CARD -->
                            <ContentControl Grid.Column="0" Style="{StaticResource AnimatedGradientPanel}"
                                    BorderThickness="2" BorderBrush="{StaticResource GoldBrush}">
                                <StackPanel>
                                    <!-- Card Header -->
                                    <Grid Margin="0,0,0,15">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="" FontSize="20"/>
                                            <TextBlock Text="DAILY QUEST" Foreground="{StaticResource GoldBrush}"
                                                       FontSize="16" FontWeight="Bold" Margin="8,0,0,0"
                                                       VerticalAlignment="Center"/>
                                            <!-- Daily quest counter badge -->
                                            <Border x:Name="DailyQuestCounterBadge" Background="{StaticResource GridBorderMutedBrush}" CornerRadius="8"
                                                    Padding="6,2" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock x:Name="TxtDailyQuestCounter" Text="0/3"
                                                           Foreground="{StaticResource GoldBrush}" FontSize="11" FontWeight="Bold"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="Resets at midnight" Foreground="{StaticResource DarkGrayBrush}"
                                                   FontSize="10" HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Quest Content -->
                                    <Border x:Name="DailyQuestCard" Background="{StaticResource PanelBgBrush}"
                                            CornerRadius="10" Padding="15" MinHeight="180">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                <TextBlock x:Name="TxtDailyQuestIcon" Text=""
                                                           FontSize="24" HorizontalAlignment="Left" Visibility="Collapsed"/>
                                                <TextBlock x:Name="TxtDailyQuestName" Text="Loading..."
                                                           Foreground="White" FontSize="16" FontWeight="Bold"
                                                           HorizontalAlignment="Left" Margin="0,0,0,5"/>
                                                <TextBlock x:Name="TxtDailyQuestDesc" Text=""
                                                           Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                           HorizontalAlignment="Left" TextWrapping="Wrap"
                                                           MaxWidth="180"/>

                                                <!-- Progress Bar -->
                                                <Grid Margin="0,12,0,0">
                                                    <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="4" Height="10">
                                                        <Border x:Name="DailyProgressFill" Background="{StaticResource GoldBrush}"
                                                                CornerRadius="4" HorizontalAlignment="Left" Width="0"/>
                                                    </Border>
                                                </Grid>
                                                <TextBlock x:Name="TxtDailyProgress" Text="0 / 0"
                                                           Foreground="{StaticResource GoldBrush}" FontSize="12" FontWeight="Bold"
                                                           HorizontalAlignment="Left" Margin="0,5,0,0"/>

                                                <!-- XP Reward -->
                                                <Border Background="{StaticResource GridBorderMutedBrush}" CornerRadius="5"
                                                        Padding="10,5" Margin="0,10,0,0"
                                                        HorizontalAlignment="Left">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock x:Name="TxtDailyXP" Text=" 0 XP"
                                                                   Foreground="{StaticResource PinkBrush}" FontSize="14"
                                                                   FontWeight="Bold"/>
                                                        <TextBlock x:Name="TxtDailyStreakBonus" Text=""
                                                                   Foreground="{StaticResource OrangeAccentBrush}" FontSize="12"
                                                                   FontWeight="Bold" Margin="6,1,0,0"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="Segoe UI Emoji"
                                                                   Visibility="Collapsed"/>
                                                        <TextBlock x:Name="TxtDailyRerollBonus" Text=""
                                                                   Foreground="{StaticResource GridSkyBlueBrush}" FontSize="12"
                                                                   FontWeight="Bold" Margin="6,1,0,0"
                                                                   VerticalAlignment="Center"
                                                                   Visibility="Collapsed"/>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                            <!-- Quest Image -->
                                            <Border Grid.Column="1" CornerRadius="12" Margin="10,0,0,0"
                                                    Width="150" Height="150" Background="{StaticResource DarkerBgBrush}">
                                                <Border.Clip>
                                                    <RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,150,150"/>
                                                </Border.Clip>
                                                <Grid>
                                                    <Image x:Name="ImgDailyQuest" Stretch="UniformToFill"/>
                                                    <!-- Checkmark overlay for completed state -->
                                                    <Border x:Name="DailyCompletedOverlay" Background="{StaticResource QuestCompleteOverlayBrush}"
                                                            Visibility="Collapsed">
                                                        <TextBlock Text="?" Foreground="{StaticResource SuccessBrush}" FontSize="64"
                                                                   FontWeight="Bold" HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center">
                                                            <TextBlock.Effect>
                                                                <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2"/>
                                                            </TextBlock.Effect>
                                                        </TextBlock>
                                                    </Border>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </Border>

                                    <!-- All Daily Quests Completed Message -->
                                    <Border x:Name="DailyAllCompletedMessage" Background="{StaticResource QuestCompleteBannerBackgroundBrush}" CornerRadius="10"
                                            Padding="15" MinHeight="180" Visibility="Collapsed">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <TextBlock Text="?" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                            <TextBlock Text="All daily quests completed!" Foreground="{StaticResource SuccessBrush}"
                                                       FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"
                                                       Margin="0,0,0,5"/>
                                            <TextBlock Text="Check back tomorrow for new quests" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="12" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Reroll Button -->
                                    <Button x:Name="BtnRerollDaily" Content=" Reroll"
                                            Style="{StaticResource OutlineButton}"
                                            Margin="0,15,0,0" Click="BtnRerollDaily_Click"
                                            ToolTip="Reroll for a different quest (once per day)"/>
                                </StackPanel>
                            </ContentControl>

                            <!-- WEEKLY QUEST CARD -->
                            <ContentControl Grid.Column="2" Style="{StaticResource AnimatedGradientPanel}"
                                    BorderThickness="2" BorderBrush="{StaticResource LightPurpleBrush}">
                                <StackPanel>
                                    <!-- Card Header -->
                                    <Grid Margin="0,0,0,15">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="" FontSize="20"/>
                                            <TextBlock Text="WEEKLY QUEST" Foreground="{StaticResource LightPurpleBrush}"
                                                       FontSize="16" FontWeight="Bold" Margin="8,0,0,0"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <TextBlock Text="Resets Sunday" Foreground="{StaticResource DarkGrayBrush}"
                                                   FontSize="10" HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Quest Content -->
                                    <Border x:Name="WeeklyQuestCard" Background="{StaticResource PanelBgBrush}"
                                            CornerRadius="10" Padding="15" MinHeight="180">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                <TextBlock x:Name="TxtWeeklyQuestIcon" Text=""
                                                           FontSize="24" HorizontalAlignment="Left" Visibility="Collapsed"/>
                                                <TextBlock x:Name="TxtWeeklyQuestName" Text="Loading..."
                                                           Foreground="White" FontSize="16" FontWeight="Bold"
                                                           HorizontalAlignment="Left" Margin="0,0,0,5"/>
                                                <TextBlock x:Name="TxtWeeklyQuestDesc" Text=""
                                                           Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                           HorizontalAlignment="Left" TextWrapping="Wrap"
                                                           MaxWidth="180"/>

                                                <!-- Progress Bar -->
                                                <Grid Margin="0,12,0,0">
                                                    <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="4" Height="10">
                                                        <Border x:Name="WeeklyProgressFill" Background="{StaticResource LightPurpleBrush}"
                                                                CornerRadius="4" HorizontalAlignment="Left" Width="0"/>
                                                    </Border>
                                                </Grid>
                                                <TextBlock x:Name="TxtWeeklyProgress" Text="0 / 0"
                                                           Foreground="{StaticResource LightPurpleBrush}" FontSize="12" FontWeight="Bold"
                                                           HorizontalAlignment="Left" Margin="0,5,0,0"/>

                                                <!-- XP Reward -->
                                                <Border Background="{StaticResource GridBorderMutedBrush}" CornerRadius="5"
                                                        Padding="10,5" Margin="0,10,0,0"
                                                        HorizontalAlignment="Left">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock x:Name="TxtWeeklyXP" Text=" 0 XP"
                                                                   Foreground="{StaticResource PinkBrush}" FontSize="14"
                                                                   FontWeight="Bold"/>
                                                        <TextBlock x:Name="TxtWeeklyStreakBonus" Text=""
                                                                   Foreground="{StaticResource OrangeAccentBrush}" FontSize="12"
                                                                   FontWeight="Bold" Margin="6,1,0,0"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="Segoe UI Emoji"
                                                                   Visibility="Collapsed"/>
                                                        <TextBlock x:Name="TxtWeeklyRerollBonus" Text=""
                                                                   Foreground="{StaticResource GridSkyBlueBrush}" FontSize="12"
                                                                   FontWeight="Bold" Margin="6,1,0,0"
                                                                   VerticalAlignment="Center"
                                                                   Visibility="Collapsed"/>
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                            <!-- Quest Image -->
                                            <Border Grid.Column="1" CornerRadius="12" Margin="10,0,0,0"
                                                    Width="150" Height="150" Background="{StaticResource DarkerBgBrush}">
                                                <Border.Clip>
                                                    <RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,150,150"/>
                                                </Border.Clip>
                                                <Grid>
                                                    <Image x:Name="ImgWeeklyQuest" Stretch="UniformToFill"/>
                                                    <!-- Checkmark overlay for completed state -->
                                                    <Border x:Name="WeeklyCompletedOverlay" Background="{StaticResource QuestCompleteOverlayBrush}"
                                                            Visibility="Collapsed">
                                                        <TextBlock Text="?" Foreground="{StaticResource SuccessBrush}" FontSize="64"
                                                                   FontWeight="Bold" HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center">
                                                            <TextBlock.Effect>
                                                                <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2"/>
                                                            </TextBlock.Effect>
                                                        </TextBlock>
                                                    </Border>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </Border>

                                    <!-- Reroll Button -->
                                    <Button x:Name="BtnRerollWeekly" Content=" Reroll"
                                            Style="{StaticResource OutlineButton}"
                                            Margin="0,15,0,0" Click="BtnRerollWeekly_Click"
                                            ToolTip="Reroll for a different quest (once per week)"/>
                                </StackPanel>
                            </ContentControl>
                        </Grid>

                            <!-- Quest Complete Banner (shown briefly when quest completes) -->
                            <Border x:Name="QuestCompleteBanner" Background="{StaticResource QuestCompleteBannerBackgroundBrush}" CornerRadius="10"
                                    Padding="15" Margin="0,20,0,0" Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="?" FontSize="24"/>
                                    <TextBlock x:Name="TxtQuestComplete" Text="QUEST COMPLETE!"
                                               Foreground="{StaticResource SuccessBrush}" FontSize="18" FontWeight="Bold"
                                               Margin="10,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="?" FontSize="24"/>
                                </StackPanel>
                            </Border>

                            <!-- Quest Streak Calendar -->
                            <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="10" Padding="15,12" Margin="0,20,0,0">
                                <StackPanel>
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text=" Quest Streak" Foreground="White" FontSize="14" FontWeight="Bold" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TxtQuestStreakCount" Grid.Column="1" Text="" Foreground="{StaticResource GoldBrush}"
                                                   FontSize="13" FontWeight="SemiBold" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <Button x:Name="BtnFixStreak" Grid.Column="2" Content=" Fix Day"
                                                Style="{StaticResource OutlineButton}" Padding="8,3" FontSize="11"
                                                Click="BtnFixStreak_Click" Visibility="Collapsed" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Canvas x:Name="StreakCalendarCanvas" Height="50" ClipToBounds="True"
                                           SizeChanged="StreakCalendarCanvas_SizeChanged"/>
                                    <TextBlock x:Name="TxtFixStreakStatus" Text="" Foreground="{StaticResource PinkBrush}" FontSize="11"
                                               TextAlignment="Center" Margin="0,5,0,0" Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- Quest Statistics Section -->
                            <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="10" Padding="15" Margin="0,20,0,0">
                                <StackPanel>
                                    <Grid Margin="0,0,0,15">
                                        <TextBlock Text=" Quest Statistics" Foreground="White"
                                                   FontSize="14" FontWeight="Bold"/>
                                        <Button x:Name="HelpBtnQuestStats" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="QuestStats"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtTotalDailyCompleted" Text="0"
                                                       Foreground="{StaticResource GoldBrush}" FontSize="28" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Daily Completed" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtTotalWeeklyCompleted" Text="0"
                                                       Foreground="{StaticResource LightPurpleBrush}" FontSize="28" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Weekly Completed" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtTotalQuestXP" Text="0"
                                                       Foreground="{StaticResource PinkBrush}" FontSize="28" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Total XP Earned" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                        <!-- End Daily/Weekly Panel -->

                        <!-- Bimbo Journal Panel -->
                        <StackPanel x:Name="RoadmapPanel" Visibility="Collapsed">
                            <!-- Journal Header -->
                            <TextBlock Text="look how far you've come sweetie...."
                                       FontSize="26" FontStyle="Italic" FontWeight="Light"
                                       Foreground="{StaticResource GridAccentBorderBrush}" HorizontalAlignment="Center"
                                       Margin="0,0,0,8" TextAlignment="Center"/>

                            <!-- Journal Info Box -->
                            <Border Background="{StaticResource GoldButtonBackgroundBrush}" BorderBrush="{StaticResource GoldBorderBrush}" BorderThickness="1.5"
                                    CornerRadius="6" Padding="14,10" Margin="20,0,20,14" MaxWidth="700"
                                    HorizontalAlignment="Center">
                                <StackPanel>
                                    <TextBlock Text="  What is the Bimbo Journal?" Foreground="{StaticResource GoldBrush}" FontSize="14" FontWeight="Bold" Margin="0,0,0,6"/>
                                    <TextBlock TextWrapping="Wrap" Foreground="{StaticResource WhiteBrush}" FontSize="12" LineHeight="18">
                                        <Run Text="Each track has steps that ask you to take a photo as proof of your progress."/>
                                        <LineBreak/>
                                        <Run Text="Click a step, take the pic, and upload it to mark it complete and unlock the next one."/>
                                        <LineBreak/>
                                        <Run Text="Complete all steps in a track to unlock the next phase of your transformation."/>
                                    </TextBlock>
                                    <TextBlock Foreground="{StaticResource GoldBorderBrush}" FontSize="11" FontStyle="Italic" Margin="0,8,0,0"
                                               Text="All photos are stored locally on your PC only  nothing is ever uploaded or shared."/>
                                </StackPanel>
                            </Border>

                            <!-- Track Selector Tabs -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                <Button x:Name="BtnTrack1" Content="The Empty Doll"
                                        Style="{StaticResource TabButtonActive}"
                                        Click="BtnTrack_Click" Tag="EmptyDoll" Width="130"/>
                                <Button x:Name="BtnTrack2" Content="The Obedient Puppet"
                                        Style="{StaticResource TabButton}"
                                        Click="BtnTrack_Click" Tag="ObedientPuppet" Margin="10,0,0,0" Width="150"/>
                                <Button x:Name="BtnTrack3" Content="The Slutty Blowdoll"
                                        Style="{StaticResource TabButton}"
                                        Click="BtnTrack_Click" Tag="SluttyBlowdoll" Margin="10,0,0,0" Width="150"/>
                            </StackPanel>

                            <!-- Track Info Header -->
                            <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="10" Padding="15" Margin="0,0,0,15">
                                <Grid>
                                    <Button x:Name="HelpBtnRoadmap" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Top" Tag="Roadmap"/>
                                    <StackPanel>
                                        <TextBlock x:Name="TxtRoadmapTrackName" Text="The Empty Doll"
                                                   Foreground="{StaticResource PinkBrush}" FontSize="20" FontWeight="Bold"/>
                                        <TextBlock x:Name="TxtRoadmapTrackSubtitle" Text="Gateway Phase"
                                                   Foreground="{StaticResource TextSecondaryBrush}" FontSize="14"/>
                                        <TextBlock x:Name="TxtRoadmapTrackProgress" Text="0 / 7 steps completed"
                                                   Foreground="{StaticResource TextSilverBrush}" FontSize="12" Margin="0,5,0,0"/>
                                    </StackPanel>
                                    <!-- Badge indicator for final track -->
                                    <StackPanel x:Name="BadgeIndicator" Orientation="Horizontal"
                                                HorizontalAlignment="Right" VerticalAlignment="Center"
                                                Visibility="Collapsed">
                                        <TextBlock Text="" FontSize="24"/>
                                        <TextBlock Text="Badge Earned!" Foreground="{StaticResource GoldBrush}" FontSize="14"
                                                   FontWeight="Bold" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Locked Track Overlay -->
                            <Border x:Name="TrackLockedOverlay" Background="{StaticResource XPBarOverlayBrush}" CornerRadius="10"
                                    Padding="40" Visibility="Collapsed">
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock Text="" FontSize="48" HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TxtLockReason" Text="Complete the previous track to unlock"
                                               Foreground="White" FontSize="16" Margin="0,15,0,0"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>

                            <!-- Horizontal Scrolling Roadmap -->
                            <ContentControl x:Name="RoadmapScrollContainer" Style="{StaticResource AnimatedGradientPanelWide}"
                                    MinHeight="220">
                                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                              PreviewMouseWheel="HorizontalScrollViewer_PreviewMouseWheel">
                                    <StackPanel x:Name="RoadmapNodesPanel" Orientation="Horizontal" Margin="10,15"/>
                                </ScrollViewer>
                            </ContentControl>

                            <!-- Roadmap Statistics -->
                            <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="10" Padding="15" Margin="0,15,0,0">
                                <StackPanel>
                                    <Grid Margin="0,0,0,15">
                                        <TextBlock Text=" Transformation Progress" Foreground="White"
                                                   FontSize="14" FontWeight="Bold"/>
                                        <Button x:Name="HelpBtnRoadmapStats" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="RoadmapStats"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtRoadmapTotalSteps" Text="0 / 21"
                                                       Foreground="{StaticResource PinkBrush}" FontSize="24" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Steps Completed" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtRoadmapPhotos" Text="0"
                                                       Foreground="{StaticResource LightPurpleBrush}" FontSize="24" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Photos Submitted" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                            <TextBlock x:Name="TxtRoadmapJourneyDays" Text="--"
                                                       Foreground="{StaticResource GoldBrush}" FontSize="24" FontWeight="Bold"
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="Days on Journey" Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="11" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                        <!-- End Roadmap Panel -->
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Login Required Overlay -->
            <Border x:Name="QuestsLoginOverlay" Background="{StaticResource GridDarkestBgBrush}" CornerRadius="12" Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="40">
                    <TextBlock Text="" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,15"/>
                    <TextBlock Text="Login Required" Foreground="{StaticResource PinkBrush}" FontSize="22" FontWeight="Bold"
                               HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <TextBlock Text="Log in with Discord or Patreon to access Quests and Streaks!"
                               Foreground="{StaticResource MutedPurplePinkBrush}" FontSize="14" HorizontalAlignment="Center"
                               TextAlignment="Center" TextWrapping="Wrap" MaxWidth="350"/>
                </StackPanel>
            </Border>
            </Grid>
        </ContentControl>

        <!-- Achievements Tab -->
        <ContentControl x:Name="AchievementsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed"
                Template="{StaticResource AnimatedTabBackground}">
            <Border Style="{StaticResource SectionPanel}">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <Grid Margin="0,0,0,10">
                        <TextBlock Style="{StaticResource SectionHeader}" Text=" Achievements" Margin="0"/>
                        <Button x:Name="HelpBtnAchievements" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Achievements"/>
                    </Grid>
                    <TextBlock Text="Complete challenges to unlock achievements! Locked achievements are blurred until earned." 
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0,0,0,15"/>
                    
                    <!-- Achievement Grid (populated in code-behind) -->
                    <UniformGrid x:Name="AchievementGrid" Columns="7" Margin="0,5" />

                    <TextBlock x:Name="TxtAchievementCount" Text="0 / 25 Achievements Unlocked" Foreground="{StaticResource TextSecondaryBrush}" FontSize="14"
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </ScrollViewer>
            </Border>
        </ContentControl>

        <!-- Companion Tab (v5.5 - Revamped with outlined sections) -->
        <ContentControl x:Name="CompanionTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Border Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">

                        <!-- Tab Header -->
                        <Grid Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text="Companion" Foreground="White" FontSize="22" FontWeight="Bold">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBlock Text="Manage your AI companion, personalities, and controls" Foreground="{StaticResource GridMutedDarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Grid>

                        <!-- ROW 1: Companions + Community Prompts -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- COMPANIONS BOX -->
                            <Border Grid.Column="0" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                                </Border.Effect>
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="COMPANIONS" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold"/>
                                            <Border Background="{StaticResource WarningBrush}" CornerRadius="3" Padding="5,1" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock Text="BETA" Foreground="White" FontSize="9" FontWeight="Bold"/>
                                            </Border>
                                        </StackPanel>
                                        <Button x:Name="HelpBtnCompanions" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="Companions"/>
                                    </Grid>

                                    <!-- Companion Cards 3x2 -->
                                    <UniformGrid Rows="3" Columns="2" Margin="0,0,0,12">
                                        <Border x:Name="CompanionCard0" CornerRadius="8" Margin="0,0,5,5"
                                                Padding="12,10" Cursor="Hand" MouseLeftButtonDown="CompanionCard_Click" Tag="0"
                                                BorderThickness="2" BorderBrush="Transparent">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="{StaticResource DeepPanelColor}" Offset="0"/>
                                                    <GradientStop Color="{StaticResource GridDeepPurpleColor}" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Synthetic Blowdoll" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock x:Name="TxtCompanion0Lock" Text=" [50]" Foreground="{StaticResource GoldBrush}" FontSize="9"
                                                                   VerticalAlignment="Center" Visibility="Collapsed"/>
                                                    </StackPanel>
                                                    <TextBlock x:Name="TxtCompanion0Level" Text="Lv.1" Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                                <TextBlock Text="Pink filter XP bonus" Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                    <Button x:Name="BtnCompanion0Personality" Content="" FontSize="10" Padding="4,1"
                                                            Background="{StaticResource DarkerBgBrush}" Foreground="{StaticResource TextSecondaryBrush}" BorderThickness="0" Cursor="Hand"
                                                            PreviewMouseLeftButtonDown="BtnCompanionPersonality_Click" Tag="0" ToolTip="Assign AI personality"/>
                                                    <TextBlock x:Name="TxtCompanion0Prompt" Text="" Foreground="{StaticResource DarkGrayBrush}" FontSize="9"
                                                               VerticalAlignment="Center" Margin="4,0,0,0" TextTrimming="CharacterEllipsis"
                                                               MaxWidth="80"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="CompanionCard1" CornerRadius="8" Margin="5,0,0,5"
                                                Padding="12,10" Cursor="Hand" MouseLeftButtonDown="CompanionCard_Click" Tag="1"
                                                BorderThickness="2" BorderBrush="Transparent">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="{StaticResource DeepPanelColor}" Offset="0"/>
                                                    <GradientStop Color="{StaticResource GridDeepPurpleColor}" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Perfect Fuckpuppet" Foreground="{StaticResource LightPurpleBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock x:Name="TxtCompanion1Lock" Text=" [100]" Foreground="{StaticResource GoldBrush}" FontSize="9"
                                                                   VerticalAlignment="Center" Visibility="Collapsed"/>
                                                    </StackPanel>
                                                    <TextBlock x:Name="TxtCompanion1Level" Text="Lv.1" Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                                <TextBlock Text="Autonomy XP bonus" Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                    <Button x:Name="BtnCompanion1Personality" Content="" FontSize="10" Padding="4,1"
                                                            Background="{StaticResource DarkerBgBrush}" Foreground="{StaticResource TextSecondaryBrush}" BorderThickness="0" Cursor="Hand"
                                                            PreviewMouseLeftButtonDown="BtnCompanionPersonality_Click" Tag="1" ToolTip="Assign AI personality"/>
                                                    <TextBlock x:Name="TxtCompanion1Prompt" Text="" Foreground="{StaticResource DarkGrayBrush}" FontSize="9"
                                                               VerticalAlignment="Center" Margin="4,0,0,0" TextTrimming="CharacterEllipsis"
                                                               MaxWidth="80"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="CompanionCard2" CornerRadius="8" Margin="0,5,5,0"
                                                Padding="12,10" Cursor="Hand" MouseLeftButtonDown="CompanionCard_Click" Tag="2"
                                                BorderThickness="2" BorderBrush="Transparent">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="{StaticResource DeepPanelColor}" Offset="0"/>
                                                    <GradientStop Color="{StaticResource GridDeepPurpleColor}" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Brainwashed Slavedoll" Foreground="{StaticResource CompanionAccentGreenBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock x:Name="TxtCompanion2Lock" Text=" [125]" Foreground="{StaticResource GoldBrush}" FontSize="9"
                                                                   VerticalAlignment="Center" Visibility="Collapsed"/>
                                                    </StackPanel>
                                                    <TextBlock x:Name="TxtCompanion2Level" Text="Lv.1" Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                                <TextBlock Text="Constant XP drain" Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                    <Button x:Name="BtnCompanion2Personality" Content="" FontSize="10" Padding="4,1"
                                                            Background="{StaticResource DarkerBgBrush}" Foreground="{StaticResource TextSecondaryBrush}" BorderThickness="0" Cursor="Hand"
                                                            PreviewMouseLeftButtonDown="BtnCompanionPersonality_Click" Tag="2" ToolTip="Assign AI personality"/>
                                                    <TextBlock x:Name="TxtCompanion2Prompt" Text="" Foreground="{StaticResource DarkGrayBrush}" FontSize="9"
                                                               VerticalAlignment="Center" Margin="4,0,0,0" TextTrimming="CharacterEllipsis"
                                                               MaxWidth="80"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="CompanionCard3" CornerRadius="8" Margin="5,5,0,0"
                                                Padding="12,10" Cursor="Hand" MouseLeftButtonDown="CompanionCard_Click" Tag="3"
                                                BorderThickness="2" BorderBrush="Transparent">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="{StaticResource DeepPanelColor}" Offset="0"/>
                                                    <GradientStop Color="{StaticResource GridDeepPurpleColor}" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Platinum Puppet" Foreground="{StaticResource WarningBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock x:Name="TxtCompanion3Lock" Text=" [150]" Foreground="{StaticResource GoldBrush}" FontSize="9"
                                                                   VerticalAlignment="Center" Visibility="Collapsed"/>
                                                    </StackPanel>
                                                    <TextBlock x:Name="TxtCompanion3Level" Text="Lv.1" Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                                <TextBlock Text="Strict mode bonuses" Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                    <Button x:Name="BtnCompanion3Personality" Content="" FontSize="10" Padding="4,1"
                                                            Background="{StaticResource DarkerBgBrush}" Foreground="{StaticResource TextSecondaryBrush}" BorderThickness="0" Cursor="Hand"
                                                            PreviewMouseLeftButtonDown="BtnCompanionPersonality_Click" Tag="3" ToolTip="Assign AI personality"/>
                                                    <TextBlock x:Name="TxtCompanion3Prompt" Text="" Foreground="{StaticResource DarkGrayBrush}" FontSize="9"
                                                               VerticalAlignment="Center" Margin="4,0,0,0" TextTrimming="CharacterEllipsis"
                                                               MaxWidth="80"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="CompanionCard4" CornerRadius="8" Margin="0,5,5,0"
                                                Padding="12,10" Cursor="Hand" MouseLeftButtonDown="CompanionCard_Click" Tag="4"
                                                BorderThickness="2" BorderBrush="Transparent">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="{StaticResource DeepPanelColor}" Offset="0"/>
                                                    <GradientStop Color="{StaticResource GridDeepPurpleColor}" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Bambi Cow" Foreground="{StaticResource PaleGoldBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock x:Name="TxtCompanion4Lock" Text=" [75]" Foreground="{StaticResource GoldBrush}" FontSize="9"
                                                                   VerticalAlignment="Center" Visibility="Collapsed"/>
                                                    </StackPanel>
                                                    <TextBlock x:Name="TxtCompanion4Level" Text="Lv.1" Foreground="{StaticResource TextSilverBrush}" FontSize="12"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                                <TextBlock Text="Session completion bonus" Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                    <Button x:Name="BtnCompanion4Personality" Content="" FontSize="10" Padding="4,1"
                                                            Background="{StaticResource DarkerBgBrush}" Foreground="{StaticResource TextSecondaryBrush}" BorderThickness="0" Cursor="Hand"
                                                            PreviewMouseLeftButtonDown="BtnCompanionPersonality_Click" Tag="4" ToolTip="Assign AI personality"/>
                                                    <TextBlock x:Name="TxtCompanion4Prompt" Text="" Foreground="{StaticResource DarkGrayBrush}" FontSize="9"
                                                               VerticalAlignment="Center" Margin="4,0,0,0" TextTrimming="CharacterEllipsis"
                                                               MaxWidth="80"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </UniformGrid>

                                    <!-- Active Companion Info -->
                                    <Border CornerRadius="8" Padding="12" BorderBrush="{StaticResource TransparentPinkBorderBrush}" BorderThickness="1">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="{StaticResource GridDarkBlueColor}" Offset="0"/>
                                                <GradientStop Color="{StaticResource GridNavyBlueColor}" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <StackPanel>
                                            <Grid>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock x:Name="TxtActiveCompanionName" Text="Bambi Sprite" Foreground="White"
                                                               FontSize="14" FontWeight="Bold"/>
                                                    <TextBlock x:Name="TxtActiveCompanionLevel" Text="  Level 1" Foreground="{StaticResource TextSecondaryBrush}"
                                                               FontSize="14"/>
                                                </StackPanel>
                                                <TextBlock x:Name="TxtActiveCompanionXP" Text="0 / 550 XP" Foreground="{StaticResource PinkBrush}"
                                                           FontSize="13" FontWeight="SemiBold" HorizontalAlignment="Right"/>
                                            </Grid>
                                            <ProgressBar x:Name="PrgCompanion0" Height="6" Margin="0,8,0,0" Value="0"
                                                         Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}"/>
                                            <TextBlock x:Name="TxtActiveCompanionDesc" Text="Gains bonus XP based on pink filter intensity"
                                                       Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,8,0,0"/>
                                        </StackPanel>
                                    </Border>
                                    <TextBlock x:Name="TxtCompanionStatus" Text="" Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- COMMUNITY PROMPTS BOX -->
                            <Border Grid.Column="2" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource LightPurpleColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource GridPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                                </Border.Effect>
                                <StackPanel>
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="COMMUNITY PROMPTS" Foreground="{StaticResource LightPurpleBrush}" FontSize="14" FontWeight="Bold"/>
                                            <Border Background="{StaticResource WarningBrush}" CornerRadius="3" Padding="5,1" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock Text="BETA" Foreground="White" FontSize="9" FontWeight="Bold"/>
                                            </Border>
                                            <Button x:Name="HelpBtnPrompts" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Tag="CommunityPrompts"/>
                                        </StackPanel>
                                        <Button x:Name="BtnRefreshPrompts" Content="Refresh" HorizontalAlignment="Right"
                                                Background="Transparent" Foreground="{StaticResource TextMutedBrush}" BorderThickness="0"
                                                FontSize="11" Padding="8,2" Cursor="Hand" Click="BtnRefreshPrompts_Click"/>
                                    </Grid>

                                    <!-- Active Prompt -->
                                    <Border CornerRadius="8" Padding="12" Margin="0,0,0,10" BorderBrush="{StaticResource TransparentLavenderBorderBrush}" BorderThickness="1">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="{StaticResource GridDarkBlueColor}" Offset="0"/>
                                                <GradientStop Color="{StaticResource GridNavyBlueColor}" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <Grid>
                                            <StackPanel>
                                                <TextBlock Text="Active Personality" Foreground="{StaticResource DarkGrayBrush}" FontSize="11"/>
                                                <TextBlock x:Name="TxtActivePromptName" Text="Default (Built-in)" Foreground="White"
                                                           FontSize="14" FontWeight="SemiBold" Margin="0,4,0,0"/>
                                            </StackPanel>
                                            <Button x:Name="BtnDeactivatePrompt" Content="Reset" HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource TextMutedBrush}" BorderThickness="0"
                                                    FontSize="11" Padding="10,4" Cursor="Hand" Visibility="Collapsed"
                                                    Click="BtnDeactivatePrompt_Click"/>
                                        </Grid>
                                    </Border>

                                    <!-- Installed List -->
                                    <TextBlock Text="Installed Prompts" Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,0,0,6"/>
                                    <Border CornerRadius="8" Padding="10" MinHeight="80" MaxHeight="120"
                                            Margin="0,0,0,12" BorderBrush="{StaticResource SemiTransparentGrayBorderBrush}" BorderThickness="1">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="{StaticResource GridDarkBlueColor}" Offset="0"/>
                                                <GradientStop Color="{StaticResource DarkerBgColor}" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                                            <StackPanel x:Name="InstalledPromptsPanel">
                                                <TextBlock x:Name="TxtNoInstalledPrompts" Text="No prompts installed yet"
                                                           Foreground="{StaticResource MutedBorderBrush}" FontSize="12" FontStyle="Italic"
                                                           HorizontalAlignment="Center" Margin="0,20,0,0"/>
                                            </StackPanel>
                                        </ScrollViewer>
                                    </Border>

                                    <!-- Buttons -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Button x:Name="BtnBrowsePrompts" Grid.Column="0" Content="Browse"
                                                Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource LightPurpleBrush}" BorderThickness="1"
                                                FontSize="12" Padding="0,8" Margin="0,0,4,0" Cursor="Hand" Click="BtnBrowsePrompts_Click"/>
                                        <Button x:Name="BtnImportPrompt" Grid.Column="1" Content="Import"
                                                Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource MutedBorderBrush}" BorderThickness="1"
                                                FontSize="12" Padding="0,8" Margin="4,0,4,0" Cursor="Hand" Click="BtnImportPrompt_Click"/>
                                        <Button x:Name="BtnExportPrompt" Grid.Column="2" Content="Export"
                                                Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource MutedBorderBrush}" BorderThickness="1"
                                                FontSize="12" Padding="0,8" Margin="4,0,0,0" Cursor="Hand" Click="BtnExportPrompt_Click"/>
                                    </Grid>

                                    <!-- Hypnotube Links Section -->
                                    <TextBlock Text="Hypnotube Links" FontWeight="Bold" FontSize="14"
                                               Foreground="{StaticResource PinkBrush}" Margin="0,20,0,5"/>
                                    <TextBlock Text="Video links for AI to suggest (comma-separated: link1,link2,link3)"
                                               FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,5" TextWrapping="Wrap"/>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <TextBlock Text="Current mode: " FontSize="11" Foreground="{StaticResource TextSilverBrush}"/>
                                        <TextBlock x:Name="TxtHypnotubeModeLabel" Text="Bambi Sleep"
                                                   FontSize="11" Foreground="{StaticResource PinkBrush}"/>
                                    </StackPanel>
                                    <TextBox x:Name="TxtHypnotubeLinks"
                                             MaxLength="2000"
                                             TextWrapping="Wrap"
                                             AcceptsReturn="False"
                                             Height="60"
                                             VerticalScrollBarVisibility="Auto"
                                             Background="{StaticResource DeepBlueBrush}"
                                             Foreground="White"
                                             BorderBrush="{StaticResource MutedBorderBrush}"
                                             BorderThickness="1"
                                             Padding="8,6"
                                             Margin="0,0,0,10"
                                             TextChanged="TxtHypnotubeLinks_TextChanged"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Divider -->
                        <Border Height="1" Margin="20,5,20,10" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="{StaticResource LightPurpleColor}" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- ROW 2: Settings + Quick Controls -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- SETTINGS BOX -->
                            <Border Grid.Column="0" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                                </Border.Effect>
                                <StackPanel>
                                    <Grid Margin="0,0,0,15">
                                        <TextBlock Text="COMPANION SETTINGS" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold"/>
                                        <Button x:Name="HelpBtnCompanionSettings" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="CompanionSettings"/>
                                    </Grid>

                                    <!-- Show Companion -->
                                    <Grid Margin="0,0,0,12">
                                        <TextBlock Text="Show Companion" Foreground="White" FontSize="13" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="ChkAvatarEnabledCompanion" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" IsChecked="True"
                                                  Checked="ChkAvatarEnabled_Changed" Unchecked="ChkAvatarEnabled_Changed"/>
                                    </Grid>

                                    <!-- Detach -->
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Window Mode" Foreground="White" FontSize="13"/>
                                            <TextBlock x:Name="TxtDetachStatusCompanion" Text="Anchored to main window"
                                                       Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <Button x:Name="BtnDetachCompanionTab" Content="Detach" HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource MutedBorderBrush}" BorderThickness="1"
                                                Padding="15,6" FontSize="12" Cursor="Hand" Click="BtnDetachCompanion_Click"/>
                                    </Grid>

                                    <!-- Idle Interval -->
                                    <Grid Margin="0,0,0,15">
                                        <StackPanel>
                                            <TextBlock Text="Idle Giggle Interval" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="How often companion speaks when idle" Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <TextBlock x:Name="TxtIdleIntervalCompanion" Text="120s" Foreground="{StaticResource PinkBrush}"
                                                   FontSize="14" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Slider x:Name="SliderIdleIntervalCompanion" Style="{StaticResource PinkSlider}"
                                            Minimum="5" Maximum="300" Value="120" Margin="0,0,0,15"
                                            ValueChanged="SliderIdleInterval_ValueChanged"/>

                                    <!-- Customize Button -->
                                    <Button x:Name="BtnCustomizeCompanion"
                                            Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource LightPurpleBrush}" BorderThickness="1"
                                            Padding="10,10" FontSize="13" Cursor="Hand" Click="BtnCustomizeCompanion_Click">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <TextBlock Text="Customize AI  " Foreground="White"/>
                                            <TextBlock x:Name="TxtCustomizePromptName" Text="Default" Foreground="{StaticResource LightPurpleBrush}" FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Button>
                                    
                                    <!-- Manage Phrases Button -->
                                    <Button x:Name="BtnManagePhrases"
                                            Background="{StaticResource BtnManagePhrasesBackgroundBrush}" Foreground="White" BorderBrush="{StaticResource BtnManagePhrasesTextBrush}" BorderThickness="1"
                                            Padding="10,10" FontSize="13" Cursor="Hand" Margin="0,8,0,0"
                                            Click="BtnManagePhrases_Click">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <TextBlock Text="Manage Phrases  " Foreground="White"/>
                                            <TextBlock x:Name="TxtPhraseCount" Text="0 active" Foreground="{StaticResource BtnManagePhrasesTextBrush}" FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- QUICK CONTROLS BOX -->
                            <Border Grid.Column="2" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource LightPurpleColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource GridPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.2"/>
                                </Border.Effect>
                                <StackPanel>
                                    <Grid Margin="0,0,0,15">
                                        <TextBlock Text="QUICK CONTROLS" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold"/>
                                        <Button x:Name="HelpBtnQuickControls" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="QuickControls"/>
                                    </Grid>

                                    <!-- Mute Avatar -->
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Mute Avatar" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="Hide speech bubbles and sounds" Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkMuteAvatarCompanion" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" VerticalAlignment="Center"
                                                  Checked="ChkMuteAvatar_Changed" Unchecked="ChkMuteAvatar_Changed"/>
                                    </Grid>

                                    <!-- Mute Whispers -->
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Mute Whispers" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="Mute subliminal audio" Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkMuteWhispersCompanion" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" VerticalAlignment="Center"
                                                  Checked="ChkMuteWhispers_Changed" Unchecked="ChkMuteWhispers_Changed"/>
                                    </Grid>

                                    <!-- Pause Browser -->
                                    <Grid Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Pause Browser" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="Pause embedded browser audio" Foreground="{StaticResource DarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkPauseBrowserCompanion" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" VerticalAlignment="Center"
                                                  Checked="ChkPauseBrowser_Changed" Unchecked="ChkPauseBrowser_Changed"/>
                                    </Grid>

                                    <!-- Tips -->
                                    <Border CornerRadius="6" Padding="10" Margin="0,8,0,0" BorderBrush="{StaticResource SemiTransparentGrayBorderBrush}" BorderThickness="1">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="{StaticResource GridDarkBlueColor}" Offset="0"/>
                                                <GradientStop Color="{StaticResource DarkerBgColor}" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <TextBlock Foreground="{StaticResource DarkGrayBrush}" FontSize="11" TextWrapping="Wrap" TextAlignment="Center">
                                            <Run Text="Click avatar for progress  Right-click for menu  Double-click to chat"/>
                                        </TextBlock>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- ROW 3: Triggers -->
                        <Border CornerRadius="10" Padding="15" BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="{StaticResource LightPurpleColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource LightPurpleColor}" BlurRadius="12" ShadowDepth="0" Opacity="0.15"/>
                            </Border.Effect>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="TRIGGER MODE" Foreground="{StaticResource LightPurpleBrush}" FontSize="14" FontWeight="Bold"
                                                   VerticalAlignment="Center"/>
                                        <TextBlock Text="  Random conditioning phrases with audio" Foreground="{StaticResource DarkGrayBrush}" FontSize="12"
                                                   VerticalAlignment="Center" Margin="8,0,0,0"/>
                                    </StackPanel>

                                    <!-- Trigger Settings (shown when enabled) -->
                                    <StackPanel x:Name="TriggerSettingsPanelCompanion" Orientation="Horizontal" Visibility="Collapsed"
                                                Margin="0,12,0,0">
                                        <TextBlock Text="Interval:" Foreground="White" FontSize="12" VerticalAlignment="Center"/>
                                        <Slider x:Name="SliderTriggerIntervalCompanion" Style="{StaticResource PinkSlider}"
                                                Width="150" Minimum="10" Maximum="600" Value="60"
                                                VerticalAlignment="Center" Margin="10,0,0,0"
                                                ValueChanged="SliderTriggerInterval_ValueChanged"/>
                                        <TextBlock x:Name="TxtTriggerIntervalCompanion" Text="60s" Foreground="{StaticResource LightPurpleBrush}"
                                                   FontSize="13" FontWeight="Bold" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                        <Button x:Name="BtnEditTriggersCompanion" Content="Edit Phrases"
                                                Background="{StaticResource DeepPanelBrush}" Foreground="White" BorderBrush="{StaticResource MutedBorderBrush}" BorderThickness="1"
                                                Padding="12,4" FontSize="11" Margin="20,0,0,0" Cursor="Hand"
                                                Click="BtnEditTriggers_Click"/>
                                    </StackPanel>
                                </StackPanel>

                                <CheckBox x:Name="ChkTriggerModeCompanion" Grid.Column="1" Style="{StaticResource ToggleStyle}"
                                          VerticalAlignment="Top" Margin="0,2,0,0"
                                          Checked="ChkTriggerMode_Changed" Unchecked="ChkTriggerMode_Changed"/>
                            </Grid>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </Border>
        </ContentControl>

        <!-- The Lab Tab -->
        <ContentControl x:Name="LabTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed"
                        Template="{StaticResource AnimatedTabBackground}">
            <Grid>
                <!-- Lab content (greyed out when locked) -->
                <Border x:Name="LabContentBorder" Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <!-- Tab Header -->
                        <Grid Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text=" The Lab" FontSize="20" FontWeight="Bold" Foreground="White"/>
                                <TextBlock Text="Experimental features currently in testing. These may change or be moved in future updates."
                                           Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,4,0,0"/>
                            </StackPanel>
                            <Button Content=" Guide" HorizontalAlignment="Right" VerticalAlignment="Center"
                                    Style="{StaticResource OutlineButton}" Padding="10,4" Cursor="Hand"
                                    Click="BtnLabGuide_Click" ToolTip="Open The Lab guide on the web"/>
                        </Grid>

                        <!-- KEYWORD TRIGGERS (moved from Settings) -->
                        <Border CornerRadius="10" Padding="15" Margin="0,5,0,0" BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PatreonPurpleColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <StackPanel>
                                <!-- Header row -->
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Keyword Triggers" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold"/>
                                        <TextBlock Text=" (Tier 2)" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="12" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TxtKeywordTriggersLocked" Text="  In Beta Testing for Prime Bimbo Subjects"
                                                   Foreground="{StaticResource GridMutedGoldBrush}" FontSize="10" FontStyle="Italic" VerticalAlignment="Center" Margin="8,0,0,0"
                                                   Visibility="Collapsed"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <Button x:Name="HelpBtnKeywordTriggers" Style="{StaticResource HelpButtonStyle}"
                                                VerticalAlignment="Center" Margin="0,0,8,0" Tag="KeywordTriggers" Panel.ZIndex="1"/>
                                        <Button x:Name="BtnKeywordTriggersStartStop" Content="Start"
                                                Background="{StaticResource PinkBrush}" Foreground="White" FontWeight="Bold" FontSize="11"
                                                Padding="14,4" BorderThickness="0" Cursor="Hand"
                                                Click="BtnKeywordTriggersStartStop_Click"/>
                                    </StackPanel>
                                </Grid>

                                <TextBlock Text="Type keywords anywhere on your computer to trigger audio, visuals, and haptics"
                                           Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,4,0,0" TextWrapping="Wrap"/>

                                <!-- Settings panel -->
                                <StackPanel x:Name="KeywordTriggersSettingsPanel" Margin="0,10,0,0">

                                    <!-- Global settings row -->
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Buffer timeout -->
                                        <StackPanel Grid.Column="0" Margin="0,0,6,0"
                                                    ToolTip="How long to wait after a keystroke before checking for keyword matches">
                                            <TextBlock Text="Buffer Timeout" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                            <Grid>
                                                <Slider x:Name="SliderKeywordBufferTimeout" Minimum="1000" Maximum="10000"
                                                        TickFrequency="500" IsSnapToTickEnabled="True"
                                                        ValueChanged="SliderKeywordBufferTimeout_ValueChanged"/>
                                                <TextBlock x:Name="TxtKeywordBufferTimeout" Text="3.0s"
                                                           Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right" IsHitTestVisible="False"/>
                                            </Grid>
                                        </StackPanel>

                                        <!-- Global cooldown -->
                                        <StackPanel Grid.Column="1" Margin="6,0,6,0"
                                                    ToolTip="Minimum time between any two trigger activations">
                                            <TextBlock Text="Global Cooldown" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                            <Grid>
                                                <Slider x:Name="SliderKeywordGlobalCooldown" Minimum="1" Maximum="120"
                                                        TickFrequency="1" IsSnapToTickEnabled="True"
                                                        ValueChanged="SliderKeywordGlobalCooldown_ValueChanged"/>
                                                <TextBlock x:Name="TxtKeywordGlobalCooldown" Text="5s"
                                                           Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right" IsHitTestVisible="False"/>
                                            </Grid>
                                        </StackPanel>

                                        <!-- Session XP boost -->
                                        <StackPanel Grid.Column="2" Margin="6,0,0,0"
                                                    ToolTip="XP multiplier bonus when triggers fire during an active session">
                                            <TextBlock Text="Session XP Boost" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                            <Grid>
                                                <Slider x:Name="SliderKeywordSessionMultiplier" Minimum="1.0" Maximum="3.0"
                                                        TickFrequency="0.1" IsSnapToTickEnabled="True"
                                                        ValueChanged="SliderKeywordSessionMultiplier_ValueChanged"/>
                                                <TextBlock x:Name="TxtKeywordSessionMultiplier" Text="1.5x"
                                                           Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right" IsHitTestVisible="False"/>
                                            </Grid>
                                        </StackPanel>
                                    </Grid>

                                    <!-- Screen OCR -->
                                    <Border CornerRadius="6" Padding="8" Margin="0,0,0,8"
                                            Background="{StaticResource DarkerBgBrush}" BorderBrush="{StaticResource GridHeaderBorderBrush}" BorderThickness="1">
                                        <StackPanel>
                                            <Grid>
                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                    <TextBlock Text="Screen Text Detection (OCR)" Foreground="{StaticResource LightGrayBrush}" FontSize="12" FontWeight="SemiBold"/>
                                                    <Button x:Name="HelpBtnScreenOcr" Style="{StaticResource HelpButtonStyle}"
                                                            VerticalAlignment="Center" Margin="6,0,0,0" Tag="ScreenOcr" Panel.ZIndex="1"/>
                                                </StackPanel>
                                                <CheckBox x:Name="ChkScreenOcrEnabled" Style="{StaticResource ToggleStyle}"
                                                          HorizontalAlignment="Right" VerticalAlignment="Center"
                                                          Checked="ChkScreenOcrEnabled_Changed" Unchecked="ChkScreenOcrEnabled_Changed"/>
                                            </Grid>
                                            <TextBlock Text="Scans your screen for trigger keywords using Windows OCR"
                                                       Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,2,0,0" TextWrapping="Wrap"/>
                                            <CheckBox x:Name="ChkKeywordHighlightEnabled" Content="Highlight matched keywords on screen"
                                                      Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="0,4,0,0"
                                                      IsChecked="True"
                                                      Checked="ChkKeywordHighlightEnabled_Changed"
                                                      Unchecked="ChkKeywordHighlightEnabled_Changed"
                                                      ToolTip="Show a glowing overlay over the word when OCR detects a keyword match"/>
                                            <StackPanel x:Name="ScreenOcrIntervalPanel" Visibility="Collapsed" Margin="0,6,0,0">
                                                <TextBlock Text="Scan Interval" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                                <Grid ToolTip="How often to scan your screen for trigger keywords (lower = more responsive but uses more CPU)">
                                                    <Slider x:Name="SliderScreenOcrInterval" Minimum="2" Maximum="10"
                                                            TickFrequency="1" IsSnapToTickEnabled="True"
                                                            ValueChanged="SliderScreenOcrInterval_ValueChanged"/>
                                                    <TextBlock x:Name="TxtScreenOcrInterval" Text="3s"
                                                               Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right" IsHitTestVisible="False"/>
                                                </Grid>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Trigger list -->
                                    <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto" Margin="0,4,0,0">
                                        <StackPanel x:Name="KeywordTriggerListPanel"/>
                                    </ScrollViewer>

                                    <!-- Action buttons -->
                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <Button Content="+ Add Trigger" Background="{StaticResource PinkBrush}" Foreground="White" FontWeight="Bold"
                                                FontSize="11" Padding="12,6" BorderThickness="0" Cursor="Hand"
                                                Click="BtnAddKeywordTrigger_Click"/>
                                        <Button Content="Import from Trigger Mode" Background="{StaticResource GridHeaderBorderBrush}" Foreground="{StaticResource TextSilverBrush}"
                                                FontSize="11" Padding="12,6" Margin="8,0,0,0" BorderThickness="0" Cursor="Hand"
                                                Click="BtnImportFromCustomTriggers_Click"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!--TO-DO: Test -->
                        <!-- REMOTE CONTROL -->
                        <Border CornerRadius="10" Padding="15" Margin="0,15,0,0" BorderThickness="1" Background="{StaticResource RemoteControlBackgroundBrush}" BorderBrush="{StaticResource RemoteControlBorderBrush}">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PinkBrushColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.2"/>
                            </Border.Effect>
                            <StackPanel>
                                <!-- Header row with toggle -->
                                <Grid Margin="0,0,0,10">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="Remote Control" Foreground="White" FontSize="16" FontWeight="Bold"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <Button x:Name="HelpBtnRemoteControl" Style="{StaticResource HelpButtonStyle}"
                                                VerticalAlignment="Center" Margin="0,0,8,0" Tag="RemoteControl" Panel.ZIndex="1"/>
                                        <CheckBox x:Name="ChkRemoteControlEnabled" Style="{StaticResource ToggleStyle}"
                                                  Checked="ChkRemoteControlEnabled_Changed" Unchecked="ChkRemoteControlEnabled_Changed"/>
                                    </StackPanel>
                                </Grid>
                                <TextBlock Text="Allow another person to remotely trigger actions on your app via a mobile-friendly webpage."
                                           Foreground="{StaticResource RemoteControlTextBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,10"/>

                                <!-- Settings (visible when active) -->
                                <StackPanel x:Name="RemoteControlPanel" Visibility="Collapsed">
                                    <!-- Tier selection -->
                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Permission Tier:" Foreground="{StaticResource RemoteControlTextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                        <ComboBox x:Name="CmbRemoteTier" HorizontalAlignment="Right" Width="130"
                                                  Style="{StaticResource DarkComboBoxStyle}" FontSize="12"
                                                  SelectionChanged="CmbRemoteTier_SelectionChanged">
                                            <ComboBoxItem Content="Light" IsSelected="True"/>
                                            <ComboBoxItem Content="Standard"/>
                                            <ComboBoxItem Content="Full"/>
                                        </ComboBox>
                                    </Grid>

                                    <!-- Controller Link -->
                                    <Border x:Name="RemoteLinkPanel" Background="{StaticResource RemoteControlControllerLinkBackgroundBrush}" CornerRadius="8" Padding="10,8" Margin="0,0,0,6"
                                            BorderBrush="{StaticResource RemoteControlControllerLinkBorderBrush}" BorderThickness="1" Visibility="Collapsed">
                                        <Grid>
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBlock Text="" FontSize="12" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                <TextBlock Text="codebambi.github.io/.../remote" Foreground="{StaticResource RemoteControlTextThirdBrush}" FontSize="11"
                                                           VerticalAlignment="Center"/>
                                            </StackPanel>
                                            <Button x:Name="BtnCopyRemoteLink" Content="Copy Link" Background="{StaticResource RemoteControlBtnCopyBrush}" Foreground="{StaticResource RemoteControlBtnCopyTextBrush}"
                                                    FontSize="10" Padding="8,3" BorderThickness="0" Cursor="Hand"
                                                    HorizontalAlignment="Right" VerticalAlignment="Center"
                                                    Click="BtnCopyRemoteLink_Click"/>
                                        </Grid>
                                    </Border>

                                    <!-- Session Code Display -->
                                    <Border x:Name="RemoteCodePanel" Background="{StaticResource RemoteControlRemoteCodePanelBackgroundBrush}" CornerRadius="8" Padding="15,12" Margin="0,0,0,10"
                                            BorderBrush="{StaticResource RemoteControlRemoteCodePanelBorderBrush}" BorderThickness="1" Visibility="Collapsed">
                                        <Grid>
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="S E S S I O N   C O D E" Foreground="{StaticResource RemoteControlRemoteCodePanelTextBrush}" FontSize="10" FontWeight="Bold"
                                                           HorizontalAlignment="Center" Margin="0,0,0,6"/>
                                                <TextBlock x:Name="TxtRemoteCode" Text="- - - - - -" Foreground="{StaticResource RemoteControlRemoteCodePanelTextSecondaryBrush}"
                                                           FontSize="32" FontWeight="Bold" FontFamily="Consolas"
                                                           HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <Button x:Name="BtnCopyRemoteCode" Content="Copy" Background="{StaticResource RemoteControlBtnCopyBrush}" Foreground="{StaticResource RemoteControlBtnCopyTextBrush}"
                                                    FontSize="11" Padding="10,4" BorderThickness="0" Cursor="Hand"
                                                    HorizontalAlignment="Right" VerticalAlignment="Center"
                                                    Click="BtnCopyRemoteCode_Click"/>
                                        </Grid>
                                    </Border>

                                    <!-- Connection Status -->
                                    <StackPanel x:Name="RemoteStatusPanel" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed">
                                        <Ellipse x:Name="RemoteStatusDot" Width="8" Height="8" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TxtRemoteStatus" Text="Waiting for controller..." Foreground="{StaticResource RemoteControlTextBrush}" FontSize="12"/>
                                    </StackPanel>

                                    <!-- Stop button -->
                                    <Button x:Name="BtnStopRemote" Content="Stop Session" Background="{StaticResource BtnRemoteCommandEndSessionBorderHoverBrush}" Foreground="{StaticResource RemoteControlTextFourthBrush}"
                                            FontWeight="Bold" FontSize="12" Padding="15,8" BorderThickness="0" Cursor="Hand"
                                            Margin="0,0,0,10" Visibility="Collapsed"
                                            Click="BtnStopRemote_Click" >
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="BtnBorder" Background="{StaticResource BtnRemoteCommandEndSessionBorderBrush}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="BtnBorder" Property="Background" Value="{StaticResource BtnRemoteCommandEndSessionBorderHoverBrush}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="BtnBorder" Property="Background" Value="{StaticResource BtnRemoteCommandEndSessionBorderPressBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <!-- Info notice -->
                                    <TextBlock TextWrapping="Wrap" Foreground="{StaticResource RemoteControlTextInfoNoticeBrush}" FontSize="10" Margin="0,4,0,0">
                                        <Run Text="All triggers use YOUR local media files. The controller can only trigger actions  they cannot see your screen or files."/>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
                </Border>

                <!--TO-DO: test to brushes -->
                <!-- Locked overlay for non-T2 users -->
                <Border x:Name="LabLockedOverlay" Visibility="Collapsed"
                        Background="{StaticResource LabLockedOverlayBackgroundBrush}" CornerRadius="10">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <TextBlock Text="" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        <TextBlock Text="The Lab is in Beta Testing" FontSize="22" FontWeight="Bold"
                                   Foreground="{StaticResource LabLockedOverlayTextBrush}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        <TextBlock TextWrapping="Wrap" TextAlignment="Center" Foreground="{StaticResource RemoteControlRemoteCodePanelTextSecondaryBrush}" FontSize="13"
                                   LineHeight="20" Margin="0,0,0,16">
                            These are experimental features currently being tested. Once they are stable and ready, they will be available to all Patreon supporters.
                            <LineBreak/><LineBreak/>
                            In the meantime, beta access is available to <Run Foreground="{StaticResource PatreonRoleBrush}" FontWeight="SemiBold">Prime Bimbo Subjects</Run> (Tier 2) and whitelisted users.
                        </TextBlock>
                        <Button Content=" Become a Prime Bimbo Subject" Cursor="Hand" FontSize="13" FontWeight="Bold"
                                Click="BtnPatreonExclusives_Click" Margin="0,4,0,0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border" CornerRadius="8" Padding="20,10"
                                            Background="{StaticResource LabLockedOverlayBtnBorderBrush}" BorderThickness="0" Cursor="Hand">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="{StaticResource LabLockedOverlayBtnHoverBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
        </ContentControl>

        <!-- Patreon Exclusives Tab -->
        <ContentControl x:Name="PatreonTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Border Style="{StaticResource SectionPanel}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <Grid Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text="Patreon Exclusives" Foreground="White" FontSize="22" FontWeight="Bold">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBlock Text="Premium features for supporters" Foreground="{StaticResource GridMutedDarkGrayBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>
                            <Button x:Name="HelpBtnPatreon" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="PatreonExclusives"/>
                        </Grid>

                        <!-- Patreon Login Status -->
                        <Border CornerRadius="10" Padding="15" Margin="0,0,0,15"
                                BorderBrush="{StaticResource PatreonBrandBrush}" BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DarkerBgColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PatreonBrandColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock x:Name="TxtPatreonStatus" Text="Not Connected" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                    <TextBlock x:Name="TxtPatreonTier" Text="Login to unlock exclusive features" Foreground="{StaticResource TextMutedBrush}" FontSize="12"/>
                                </StackPanel>

                                <Button x:Name="BtnPatreonLogin" Grid.Column="1"
                                        Content="Login"
                                        Background="{StaticResource PatreonBrandBrush}" Foreground="White"
                                        BorderThickness="0" Padding="15,8"
                                        FontWeight="Bold" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnPatreonLogin_Click"/>
                            </Grid>
                        </Border>

                        <!-- Discord Login Status -->
                        <Border CornerRadius="10" Padding="15" Margin="0,0,0,15"
                                BorderBrush="{StaticResource DiscordBrush}" BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DarkerBgColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource DiscordColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock x:Name="TxtDiscordStatus" Text="Not Connected" Foreground="White" FontSize="14" FontWeight="Bold"/>
                                    <TextBlock x:Name="TxtDiscordInfo" Text="Link Discord for community features" Foreground="{StaticResource TextMutedBrush}" FontSize="12"/>
                                </StackPanel>

                                <Button x:Name="BtnDiscordLogin" Grid.Column="1"
                                        Content="Login"
                                        Background="{StaticResource DiscordBrush}" Foreground="White"
                                        BorderThickness="0" Padding="15,8"
                                        FontWeight="Bold" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnDiscordLogin_Click"/>
                            </Grid>
                        </Border>

                        <!-- Account Linking Section (visible when logged in but other provider not linked) -->
                        <Border x:Name="AccountLinkingSection" Background="{StaticResource DarkerBgBrush}" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                                BorderBrush="{StaticResource GoldBrush}" BorderThickness="1" Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock Text="Link Accounts" Foreground="{StaticResource GoldBrush}" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                                <TextBlock Text="Link both providers to access your account from either login method."
                                           Foreground="{StaticResource TextSilverBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,10"/>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button x:Name="BtnLinkPatreon"
                                            Content=" Link Patreon"
                                            Background="{StaticResource PatreonBrandBrush}" Foreground="White"
                                            BorderThickness="0" Padding="15,8" Margin="0,0,10,0"
                                            FontWeight="Bold" FontSize="12"
                                            Cursor="Hand" Visibility="Collapsed"
                                            Click="BtnLinkPatreon_Click"/>
                                    <Button x:Name="BtnLinkDiscord"
                                            Content=" Link Discord"
                                            Background="{StaticResource DiscordBrush}" Foreground="White"
                                            BorderThickness="0" Padding="15,8"
                                            FontWeight="Bold" FontSize="12"
                                            Cursor="Hand" Visibility="Collapsed"
                                            Click="BtnLinkDiscord_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Divider -->
                        <Border Height="1" Margin="20,15" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="{StaticResource PinkColor}" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Feature Boxes Side by Side -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- LEVEL 1: AI Chatbot Feature Box -->
                            <Border Grid.Column="0" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                </Border.Effect>
                                <Grid>
                                    <Button x:Name="HelpBtnAiChat" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Top" Tag="AiChat" Panel.ZIndex="1"/>
                                <StackPanel Margin="0,0,25,0">
                                    <!-- Locked State -->
                                    <StackPanel x:Name="AiChatLocked" Visibility="Collapsed">
                                        <Grid>
                                            <TextBlock Text="AI Companion Chat" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Level 1" Foreground="{StaticResource DarkGrayBrush}" HorizontalAlignment="Right" FontSize="12" Margin="0,0,25,0"/>
                                        </Grid>
                                        <TextBlock Text="Support on Patreon to unlock AI-powered conversations"
                                                   Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                    </StackPanel>

                                    <!-- Unlocked State (Visible for testing) -->
                                    <StackPanel x:Name="AiChatUnlocked" Visibility="Visible">
                                        <Grid>
                                            <TextBlock Text="AI Companion Chat" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Unlocked" Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Right" FontSize="12" Margin="0,0,25,0"/>
                                        </Grid>

                                        <!-- AI Chat Toggle -->
                                        <Grid Margin="0,12,0,0">
                                            <StackPanel>
                                                <TextBlock Text="Enable AI Chat" Foreground="White" FontSize="12"/>
                                                <TextBlock Text="Double-click avatar to chat" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/>
                                            </StackPanel>
                                            <CheckBox x:Name="ChkAiChat" Style="{StaticResource ToggleStyle}"
                                                      HorizontalAlignment="Right" VerticalAlignment="Center"
                                                      IsChecked="True"
                                                      Checked="ChkAiChat_Changed" Unchecked="ChkAiChat_Changed"/>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Window Awareness Feature Box (Patreon) -->
                            <Border Grid.Column="2" CornerRadius="10" Padding="15" BorderThickness="1">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.BorderBrush>
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                </Border.Effect>
                                <Grid>
                                    <Button x:Name="HelpBtnAwareness" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Top" Tag="WindowAwareness" Panel.ZIndex="1"/>
                                <StackPanel Margin="0,0,25,0">
                                    <!-- Locked State -->
                                    <StackPanel x:Name="AwarenessLocked" Visibility="Collapsed">
                                        <Grid>
                                            <TextBlock Text="Window Awareness" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text=" Patreon" Foreground="{StaticResource PatreonPurpleBrush}" HorizontalAlignment="Right" FontSize="12" Margin="0,0,25,0"/>
                                        </Grid>
                                        <TextBlock Text="Support on Patreon to unlock smart activity detection"
                                                   Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                    </StackPanel>

                                    <!-- Unlocked State (Visible for testing) -->
                                    <StackPanel x:Name="AwarenessUnlocked" Visibility="Visible">
                                        <Grid>
                                            <TextBlock Text="Window Awareness" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="Unlocked" Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Right" FontSize="12" Margin="0,0,25,0"/>
                                        </Grid>

                                        <!-- Awareness Mode Toggle -->
                                        <Grid Margin="0,12,0,0">
                                            <StackPanel>
                                                <TextBlock Text="Enable Awareness" Foreground="White" FontSize="12"/>
                                                <TextBlock Text="Reacts to your activity" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/>
                                            </StackPanel>
                                            <CheckBox x:Name="ChkAwarenessMode" Style="{StaticResource ToggleStyle}"
                                                      HorizontalAlignment="Right" VerticalAlignment="Center"
                                                      IsChecked="False"
                                                      Checked="ChkAwarenessMode_Changed" Unchecked="ChkAwarenessMode_Changed"/>
                                        </Grid>

                                        <!-- Privacy Warning -->
                                        <Border Background="{StaticResource GridDarkestBgBrush}" CornerRadius="6" Padding="8" Margin="0,10,0,0" BorderBrush="{StaticResource WarningBrush}" BorderThickness="1">
                                            <StackPanel>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="" FontSize="12" VerticalAlignment="Center"/>
                                                        <TextBlock Text=" Privacy Notice" Foreground="{StaticResource WarningBrush}" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                    <Button x:Name="BtnPrivacySpoiler" Content=" Click to reveal"
                                                            Background="Transparent" Foreground="{StaticResource TextMutedBrush}" BorderThickness="0"
                                                            HorizontalAlignment="Right" FontSize="10" Cursor="Hand"
                                                            Click="BtnPrivacySpoiler_Click"/>
                                                </Grid>
                                                <TextBlock x:Name="TxtPrivacyDetails" Visibility="Collapsed"
                                                           TextWrapping="Wrap" Foreground="{StaticResource LightGrayBrush}" FontSize="10" Margin="0,8,0,0"
                                                           Text="This feature reads the name of the active window and browser tab, tracks how long you've been on that window, and uses this information to generate AI responses. Data is sent to our secure proxy server for processing. No data is stored permanently."/>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>

                        <!-- Awareness Settings (shown when enabled) -->
                        <Border x:Name="AwarenessSettingsPanel" Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="15" Margin="0,0,0,10" Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock Text="Awareness Settings" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="Bold" Margin="0,0,0,10"/>

                                <!-- Reaction Cooldown -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="6" Padding="10">
                                    <StackPanel>
                                        <Grid>
                                            <TextBlock Text="Reaction Cooldown" Foreground="White" FontSize="11"/>
                                            <TextBlock x:Name="TxtAwarenessCooldown" Text="90s" Foreground="{StaticResource PinkBrush}"
                                                       HorizontalAlignment="Right" FontSize="11" FontWeight="Bold"/>
                                        </Grid>
                                        <Slider x:Name="SliderAwarenessCooldown"
                                                Style="{StaticResource PinkSlider}"
                                                Minimum="10" Maximum="300" Value="90"
                                                Margin="0,8,0,0"
                                                ValueChanged="SliderAwarenessCooldown_ValueChanged"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Divider -->
                        <Border Height="1" Margin="20,15" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Haptics Control - Two Side-by-Side Boxes -->
                        <Grid Margin="0,10,0,0">
                            <!-- Haptics Content (enabled for whitelisted testers) -->
                            <Grid x:Name="HapticsContentGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left Box: Connection Settings -->
                            <Grid Grid.Column="0">
                                <Border x:Name="HapticsConnectionBox" CornerRadius="10" Padding="15"
                                        BorderThickness="1">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.BorderBrush>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                    <Border.Effect>
                                        <DropShadowEffect Color="{StaticResource PatreonPurpleColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel>
                                    <Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Haptic Connection" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="14" FontWeight="Bold"/>
                                            <TextBlock Text=" (Patreon)" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="12" VerticalAlignment="Center"/>
                                            <Button x:Name="HelpBtnHaptics" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Tag="Haptics"/>
                                        </StackPanel>
                                        <CheckBox x:Name="ChkHapticsEnabled" Style="{StaticResource ToggleStyle}"
                                                  HorizontalAlignment="Right" VerticalAlignment="Center"
                                                  Checked="ChkHapticsEnabled_Changed" Unchecked="ChkHapticsEnabled_Changed"/>
                                    </Grid>
                                    <Grid Margin="0,4,0,0">
                                        <TextBlock Text="Connect to Lovense or Buttplug.io devices" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                                        <Button x:Name="BtnHapticsHelp" Content="Need help setting up?"
                                                HorizontalAlignment="Right" Background="Transparent"
                                                Foreground="{StaticResource PinkBrush}" BorderThickness="0" FontSize="10"
                                                Cursor="Hand" Click="BtnHapticsHelp_Click" Padding="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <TextBlock Text="{TemplateBinding Content}"
                                                                           Foreground="{TemplateBinding Foreground}"
                                                                           FontSize="{TemplateBinding FontSize}"
                                                                           TextDecorations="Underline"/>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>

                                <!-- Provider Selection -->
                                <Grid Margin="0,12,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="Provider:" Foreground="White" FontSize="12" VerticalAlignment="Center"/>
                                    <ComboBox x:Name="CmbHapticProvider" Grid.Column="1" Margin="10,0"
                                              Background="{StaticResource DeepPanelBrush}" Foreground="Black" BorderThickness="0"
                                              SelectionChanged="CmbHapticProvider_SelectionChanged">
                                        <ComboBoxItem Content="Lovense Connect" Tag="Lovense" Foreground="Black"/>
                                        <ComboBoxItem Content="Buttplug.io (Intiface)" Tag="Buttplug" Foreground="Black"/>
                                    </ComboBox>
                                    <Button x:Name="BtnHapticConnect" Grid.Column="2" Content="Connect"
                                            Background="{StaticResource PinkBrush}" Foreground="White"
                                            BorderThickness="0" Padding="12,6"
                                            FontSize="11" Cursor="Hand"
                                            Click="BtnHapticConnect_Click"/>
                                </Grid>
<!-- URL Input with Tooltip Guide -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="URL:" Foreground="White" FontSize="11" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtHapticUrl" Grid.Column="1" Margin="10,0,0,0"
                                             Background="{StaticResource WhiteBrush}" Foreground="Black" BorderThickness="1"
                                             BorderBrush="{StaticResource PanelAccentBrush}" Padding="8,4" FontSize="11"
                                             TextChanged="TxtHapticUrl_TextChanged">
                                        <TextBox.ToolTip>
                                            <ToolTip Background="{StaticResource DeepBlueBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}" BorderThickness="1" Padding="12">
                                                <StackPanel MaxWidth="280">
                                                    <TextBlock Text="Connection Guide" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="Bold" Margin="0,0,0,8"/>

                                                    <TextBlock Text="Lovense Connect:" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="11" FontWeight="Bold"/>
                                                    <TextBlock Foreground="{StaticResource LightGrayBrush}" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,6">
                                                        <Run Text="1."/><Run Text=" Open Lovense Remote app" Foreground="White"/>
                                                        <LineBreak/><Run Text="2."/><Run Text=" Go to Settings  Game Mode" Foreground="White"/>
                                                        <LineBreak/><Run Text="3."/><Run Text=" Enable Game Mode, note the IP" Foreground="White"/>
                                                        <LineBreak/><Run Text="4."/><Run Text=" Enter: http://[IP]:30010" Foreground="{StaticResource PinkBrush}"/>
                                                    </TextBlock>

                                                    <TextBlock Text="Buttplug.io (Intiface):" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="11" FontWeight="Bold"/>
                                                    <TextBlock Foreground="{StaticResource LightGrayBrush}" FontSize="10" TextWrapping="Wrap" Margin="0,2,0,0">
                                                        <Run Text="1."/><Run Text=" Open Intiface Central" Foreground="White"/>
                                                        <LineBreak/><Run Text="2."/><Run Text=" Click 'Start Server'" Foreground="White"/>
                                                        <LineBreak/><Run Text="3."/><Run Text=" Click 'Start Scanning' for devices" Foreground="White"/>
                                                        <LineBreak/><Run Text="4."/><Run Text=" Use: ws://localhost:12345" Foreground="{StaticResource PinkBrush}"/>
                                                    </TextBlock>
                                                </StackPanel>
                                            </ToolTip>
                                        </TextBox.ToolTip>
                                    </TextBox>
                                </Grid>
                                <TextBlock x:Name="TxtHapticUrlHint"
                                           Text="Lovense: Enter IP from Lovense Remote  Settings  Game Mode"
                                           Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap"/>

                                <!-- Auto-connect on startup -->
                                <CheckBox x:Name="ChkHapticAutoConnect" Content="Auto-connect on startup"
                                          Foreground="{StaticResource LightGrayBrush}" FontSize="11" Margin="0,8,0,0"
                                          Checked="ChkHapticAutoConnect_Changed" Unchecked="ChkHapticAutoConnect_Changed"
                                          ToolTip="Automatically connect to your haptic device when the app starts"/>

                                <!-- Connection Status -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="6" Padding="10" Margin="0,10,0,0">
                                    <StackPanel>
                                        <Grid>
                                            <TextBlock Text="Status:" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                                            <TextBlock x:Name="TxtHapticStatus" Text="Disconnected"
                                                       Foreground="{StaticResource WarningBrush}" FontSize="11" HorizontalAlignment="Right"/>
                                        </Grid>
                                        <TextBlock x:Name="TxtHapticDevices" Text="No devices"
                                                   Foreground="{StaticResource DarkGrayBrush}" FontSize="10" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Intensity Slider -->
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Intensity:" Foreground="White" FontSize="11" VerticalAlignment="Center"/>
                                    <Slider x:Name="SliderHapticIntensity" Grid.Column="1"
                                            Style="{StaticResource PinkSlider}"
                                            Minimum="0" Maximum="100" Value="70" Margin="10,0"
                                            ValueChanged="SliderHapticIntensity_ValueChanged"/>
                                    <TextBlock x:Name="TxtHapticIntensity" Grid.Column="2" Text="70%"
                                               Foreground="{StaticResource PinkBrush}" FontSize="11" FontWeight="Bold"/>
                                </Grid>

                                <!-- Test Button -->
                                <Button x:Name="BtnHapticTest" Content="Test Vibration"
                                        Background="{StaticResource DeepPanelBrush}" Foreground="White"
                                        BorderBrush="{StaticResource PatreonPurpleBrush}" BorderThickness="1"
                                        Padding="12,6" Margin="0,10,0,0"
                                        HorizontalAlignment="Left" FontSize="11" Cursor="Hand"
                                        Click="BtnHapticTest_Click"/>
                                    </StackPanel>
                                </Border>
                                <!-- Lock Overlay for Left Box -->
                                <Border x:Name="HapticsConnectionLock" Background="{StaticResource OverlayBackgroundBrush}" CornerRadius="8" Visibility="Collapsed">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="" FontSize="32" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Patreon Only" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Right Box: Feature Sliders -->
                            <Grid Grid.Column="2">
                                <Border x:Name="HapticsFeatureBox" CornerRadius="10" Padding="15"
                                        BorderThickness="1">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.BorderBrush>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                    <Border.Effect>
                                        <DropShadowEffect Color="{StaticResource PatreonPurpleColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel>
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Feature Intensity" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="14" FontWeight="Bold"/>
                                        <TextBlock Text=" (Patreon)" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                                <TextBlock Text="Adjust vibration strength per feature" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,4,0,8"/>

                                        <!-- Bubble Pop -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticBubble" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Bubble"/>
                                            <TextBlock Grid.Column="1" Text="Bubbles" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticBubble" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Bubble"/>
                                            <TextBlock x:Name="TxtHapticBubble" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticBubbleMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Bubble">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Flash Display -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticFlashDisplay" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="FlashDisplay"/>
                                            <TextBlock Grid.Column="1" Text="Flash Show" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticFlashDisplay" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="FlashDisplay"/>
                                            <TextBlock x:Name="TxtHapticFlashDisplay" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticFlashDisplayMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="FlashDisplay">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Flash Click -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticFlashClick" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="FlashClick"/>
                                            <TextBlock Grid.Column="1" Text="Flash Click" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticFlashClick" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="FlashClick"/>
                                            <TextBlock x:Name="TxtHapticFlashClick" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticFlashClickMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="FlashClick">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Video -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticVideo" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Video"/>
                                            <TextBlock Grid.Column="1" Text="Videos" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticVideo" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Video"/>
                                            <TextBlock x:Name="TxtHapticVideo" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticVideoMode" Grid.Column="4" SelectedIndex="0" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Video">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Target Hit (video attention targets) -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticTargetHit" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="TargetHit"/>
                                            <TextBlock Grid.Column="1" Text="Target Hit" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticTargetHit" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="70" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="TargetHit"/>
                                            <TextBlock x:Name="TxtHapticTargetHit" Grid.Column="3" Text="70%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticTargetHitMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="TargetHit">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Subliminal -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticSubliminal" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Subliminal"/>
                                            <TextBlock Grid.Column="1" Text="Subliminals" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticSubliminal" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Subliminal"/>
                                            <TextBlock x:Name="TxtHapticSubliminal" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticSubliminalMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Subliminal">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Level Up -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticLevelUp" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="LevelUp"/>
                                            <TextBlock Grid.Column="1" Text="Level Up" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticLevelUp" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="LevelUp"/>
                                            <TextBlock x:Name="TxtHapticLevelUp" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticLevelUpMode" Grid.Column="4" SelectedIndex="4" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="LevelUp">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Achievement -->
                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticAchievement" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="Achievement"/>
                                            <TextBlock Grid.Column="1" Text="Achievements" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticAchievement" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="Achievement"/>
                                            <TextBlock x:Name="TxtHapticAchievement" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticAchievementMode" Grid.Column="4" SelectedIndex="3" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="Achievement">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>
                                        <!-- Bouncing Text -->
                                        <Grid Margin="0,3">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="44"/>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="85"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="ChkHapticBouncingText" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                                      VerticalAlignment="Center" Checked="ChkHapticFeature_Changed" Unchecked="ChkHapticFeature_Changed" Tag="BouncingText"/>
                                            <TextBlock Grid.Column="1" Text="Bounce Text" Foreground="White" FontSize="10" VerticalAlignment="Center" Margin="30,0,0,0"/>
                                            <Slider x:Name="SliderHapticBouncingText" Grid.Column="2" Style="{StaticResource PinkSlider}"
                                                    Minimum="0" Maximum="100" Value="50" Margin="5,0"
                                                    ValueChanged="SliderHapticFeature_Changed" Tag="BouncingText"/>
                                            <TextBlock x:Name="TxtHapticBouncingText" Grid.Column="3" Text="50%" Foreground="{StaticResource TextMutedBrush}" FontSize="10" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="CmbHapticBouncingTextMode" Grid.Column="4" SelectedIndex="1" FontSize="9"
                                                      Background="{StaticResource DeepPanelBrush}" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PatreonPurpleBrush}"
                                                      SelectionChanged="CmbHapticMode_SelectionChanged" Tag="BouncingText">
                                                <ComboBoxItem Content="Constant" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Pulse" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Wave" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Heartbeat" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Escalate" Foreground="{StaticResource PinkBrush}"/>
                                                <ComboBoxItem Content="Earthquake" Foreground="{StaticResource PinkBrush}"/>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Video Haptic Sync - Enhanced Featured Card -->
                                        <Border x:Name="VideoHapticSyncCard" BorderBrush="{StaticResource PatreonPurpleBrush}" BorderThickness="1,2,1,1"
                                                CornerRadius="8" Margin="0,12,0,0" Background="{StaticResource DeepBlueBrush}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <!-- Row 0: Header Section -->
                                                <Border Grid.Row="0" Background="{StaticResource PanelBgBrush}" CornerRadius="8,8,0,0" Padding="12,10">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Title and Description -->
                                                        <StackPanel Grid.Column="0">
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                                                <TextBlock Text="Video Haptic Sync" Foreground="{StaticResource PatreonPurpleBrush}"
                                                                           FontSize="14" FontWeight="Bold" VerticalAlignment="Center"/>
                                                            </StackPanel>
                                                            <TextBlock Text="Syncs haptics to video audio in real-time"
                                                                       Foreground="{StaticResource TextMutedBrush}" FontSize="10" Margin="0,2,0,0"/>
                                                        </StackPanel>

                                                        <!-- Help Button -->
                                                        <Button x:Name="HelpBtnVideoHapticSync" Grid.Column="1"
                                                                Style="{StaticResource HelpButtonStyle}" Tag="VideoHapticSync"
                                                                Margin="0,0,10,0"/>

                                                        <!-- Master Enable Toggle -->
                                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                            <TextBlock Text="Enable" Foreground="{StaticResource TextSilverBrush}" FontSize="10"
                                                                       VerticalAlignment="Center" Margin="0,0,8,0"/>
                                                            <CheckBox x:Name="ChkHapticAudioSync" Style="{StaticResource ToggleStyle}"
                                                                      IsChecked="False"
                                                                      Checked="ChkHapticAudioSync_Changed"
                                                                      Unchecked="ChkHapticAudioSync_Changed"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>

                                                <!-- Row 1: Algorithm Cards (left) + Image (right) -->
                                                <Grid Grid.Row="1" Margin="12,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="10"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <!-- Left: Algorithm Selection Cards (stacked vertically) -->
                                                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                        <TextBlock Text="Sync Algorithm" Foreground="{StaticResource TextSilverBrush}" FontSize="10" Margin="0,0,0,5"/>

                                                        <!-- Algorithm 1: Audio Reactive (Enabled) -->
                                                        <Border x:Name="AlgorithmCardAudioReactive"
                                                                Background="{StaticResource PanelBgBrush}" CornerRadius="4" Padding="8,5" Cursor="Hand"
                                                                BorderThickness="2" BorderBrush="{StaticResource PatreonPurpleBrush}" Margin="0,0,0,3"
                                                                MouseLeftButtonDown="AlgorithmCard_Click" Tag="AudioReactive">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background" Value="{StaticResource GridMutedBlueBgBrush}"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Text="Audio Reactive" Foreground="White"
                                                                           FontSize="10" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                                                <Ellipse x:Name="AlgorithmIndicatorAudioReactive" Grid.Column="1"
                                                                         Width="6" Height="6" Fill="{StaticResource PatreonPurpleBrush}"
                                                                         VerticalAlignment="Center" Margin="8,0,0,0"/>
                                                            </Grid>
                                                        </Border>

                                                        <!-- Algorithm 2: Beat Detection (Coming Soon) -->
                                                        <Grid Margin="0,0,0,3">
                                                            <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="4" Padding="8,5">
                                                                <Border.Effect>
                                                                    <BlurEffect Radius="2"/>
                                                                </Border.Effect>
                                                                <TextBlock Text="Beat Detection" Foreground="{StaticResource DarkGrayBrush}"
                                                                           FontSize="10" FontWeight="SemiBold"/>
                                                            </Border>
                                                            <Border Background="{StaticResource XPBarOverlayBrush}" CornerRadius="4">
                                                                <TextBlock Text="Coming Soon" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="8"
                                                                           FontWeight="Bold" HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"/>
                                                            </Border>
                                                        </Grid>

                                                        <!-- Algorithm 3: AI Enhanced (Coming Soon) -->
                                                        <Grid>
                                                            <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="4" Padding="8,5">
                                                                <Border.Effect>
                                                                    <BlurEffect Radius="2"/>
                                                                </Border.Effect>
                                                                <TextBlock Text="AI Enhanced" Foreground="{StaticResource DarkGrayBrush}"
                                                                           FontSize="10" FontWeight="SemiBold"/>
                                                            </Border>
                                                            <Border Background="{StaticResource XPBarOverlayBrush}" CornerRadius="4">
                                                                <TextBlock Text="Coming Soon" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="8"
                                                                           FontWeight="Bold" HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"/>
                                                            </Border>
                                                        </Grid>
                                                    </StackPanel>

                                                    <!-- Right: Square Image -->
                                                    <Border Grid.Column="2" CornerRadius="6" ClipToBounds="True"
                                                            BorderBrush="{StaticResource PatreonPurpleBrush}" BorderThickness="1"
                                                            Width="130" Height="130">
                                                        <Image x:Name="ImgVideoHapticSync"
                                                               Source="pack://application:,,,/Resources/features/vibe.png"
                                                               Stretch="UniformToFill"/>
                                                    </Border>
                                                </Grid>

                                                <!-- Row 3: Delay and Power Sliders -->
                                                <Border x:Name="VideoHapticSyncSliders" Grid.Row="3" Padding="12,8,12,12"
                                                        Visibility="Collapsed">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="12"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Delay Slider -->
                                                        <StackPanel Grid.Column="0">
                                                            <Grid>
                                                                <TextBlock Text="Delay" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                                                <TextBlock x:Name="TxtVideoHapticDelay" Text="0ms"
                                                                           Foreground="{StaticResource PatreonPurpleBrush}" FontSize="10"
                                                                           HorizontalAlignment="Right"/>
                                                            </Grid>
                                                            <Slider x:Name="SliderVideoHapticDelay" Minimum="-600" Maximum="600"
                                                                    Value="0" Margin="0,4,0,0"
                                                                    ValueChanged="SliderVideoHapticDelay_Changed"
                                                                    ToolTip="Adjust haptic timing: positive = earlier, negative = later"/>
                                                        </StackPanel>

                                                        <!-- Power Slider -->
                                                        <StackPanel Grid.Column="2">
                                                            <Grid>
                                                                <TextBlock Text="Power" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/>
                                                                <TextBlock x:Name="TxtVideoHapticPower" Text="100%"
                                                                           Foreground="{StaticResource PatreonPurpleBrush}" FontSize="10"
                                                                           HorizontalAlignment="Right"/>
                                                            </Grid>
                                                            <Slider x:Name="SliderVideoHapticPower" Minimum="0" Maximum="100"
                                                                    Value="100" Margin="0,4,0,0"
                                                                    ValueChanged="SliderVideoHapticPower_Changed"
                                                                    ToolTip="Live intensity control - reduce if vibration is too strong"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </StackPanel>
                                </Border>
                                <!-- Lock Overlay for Right Box -->
                                <Border x:Name="HapticsFeatureLock" Background="{StaticResource OverlayBackgroundBrush}" CornerRadius="8" Visibility="Collapsed">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="" FontSize="32" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Patreon Only" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                            </Grid>

                            <!-- Patreon Only Overlay (hidden for Patreon supporters) -->
                            <Border x:Name="HapticsComingSoonOverlay" Background="{StaticResource XPBarOverlayBrush}" CornerRadius="8">
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock Text="Patreon Only" Foreground="{StaticResource PinkBrush}" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                    <TextBlock Text="Unlock haptic feedback by supporting on Patreon"
                                               Foreground="{StaticResource TextSilverBrush}" FontSize="13" HorizontalAlignment="Center" Margin="0,8,0,0"/>
                                    <TextBlock Text="Lovense &amp; Buttplug.io support"
                                               Foreground="{StaticResource PatreonPurpleBrush}" FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Divider -->
                        <Border Height="1" Margin="20,15" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="{StaticResource PinkColor}" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Bambi Takeover - Two Side-by-Side Boxes (like Haptics) -->
                        <Grid Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left Box: Controls -->
                            <Grid Grid.Column="0">
                                <Border CornerRadius="10" Padding="12" BorderThickness="1">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.BorderBrush>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                    <Border.Effect>
                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                    </Border.Effect>
                                    <Grid>
                                        <!-- Locked State -->
                                        <StackPanel x:Name="AutonomyLocked" Visibility="Visible">
                                            <Grid>
                                                <TextBlock x:Name="TxtTakeoverLocked" Text=" Bambi Takeover" Foreground="{StaticResource DarkGrayBrush}" FontWeight="Bold" FontSize="14"/>
                                                <TextBlock x:Name="TxtAutonomyLockStatus" Text=" Patreon Only" Foreground="{StaticResource PatreonPurpleBrush}" HorizontalAlignment="Right" FontSize="11"/>
                                            </Grid>
                                            <TextBlock x:Name="TxtAutonomyLockMessage" Text="Support on Patreon to unlock" Foreground="{StaticResource PinkBrush}" FontSize="11" Margin="0,4,0,0"/>
                                        </StackPanel>

                                        <!-- Unlocked State -->
                                        <StackPanel x:Name="AutonomyUnlocked" Visibility="Collapsed">
                                            <!-- Header -->
                                            <Grid>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock x:Name="TxtTakeoverUnlocked" Text=" Bambi Takeover" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="14"/>
                                                    <Border Background="{StaticResource GridDarkPurpleBrush}" CornerRadius="4" Padding="6,2" Margin="8,0,0,0" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1">
                                                        <TextBlock Text="No engine needed" Foreground="{StaticResource PinkBrush}" FontSize="9"/>
                                                    </Border>
                                                </StackPanel>
                                            </Grid>

                                            <StackPanel x:Name="AutonomySettings" Margin="0,8,0,0">
                                                <!-- Sliders: 2x2 grid -->
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="6"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <StackPanel Grid.Row="0" Grid.Column="0">
                                                        <Grid><TextBlock Text="Interval" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/><TextBlock x:Name="TxtAutonomyInterval" Text="60s" Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyInterval" Minimum="30" Maximum="300" Value="60" Height="18" ValueChanged="SliderAutonomyInterval_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="0" Grid.Column="2">
                                                        <Grid><TextBlock Text="Cooldown" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/><TextBlock x:Name="TxtAutonomyCooldown" Text="30s" Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyCooldown" Minimum="10" Maximum="300" Value="30" Height="18" ValueChanged="SliderAutonomyCooldown_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="2" Grid.Column="0">
                                                        <Grid><TextBlock Text="Intensity" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/><TextBlock x:Name="TxtAutonomyIntensity" Text="5" Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyIntensity" Minimum="1" Maximum="10" Value="5" Height="18" ValueChanged="SliderAutonomyIntensity_Changed"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Row="2" Grid.Column="2">
                                                        <Grid><TextBlock Text="Announce" Foreground="{StaticResource TextSilverBrush}" FontSize="10"/><TextBlock x:Name="TxtAutonomyAnnounce" Text="50%" Foreground="{StaticResource PinkBrush}" FontSize="10" HorizontalAlignment="Right"/></Grid>
                                                        <Slider x:Name="SliderAutonomyAnnounce" Minimum="0" Maximum="100" Value="50" Height="18" ValueChanged="SliderAutonomyAnnounce_Changed"/>
                                                    </StackPanel>
                                                </Grid>

                                                <!-- Checkboxes: 3 columns -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <!-- Triggers -->
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Triggers" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Idle" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyIdle" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyIdle_Changed" Unchecked="ChkAutonomyIdle_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Random" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyRandom" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyRandom_Changed" Unchecked="ChkAutonomyRandom_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Time-Aware" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyTimeAware" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyTimeAware_Changed" Unchecked="ChkAutonomyTimeAware_Changed"/></Grid>
                                                    </StackPanel>
                                                    <!-- Basic -->
                                                    <StackPanel Grid.Column="2">
                                                        <TextBlock Text="Basic" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Flashes" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyFlash" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Videos" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyVideo" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Web Videos" FontSize="10" Foreground="{StaticResource TextLightBrush}" ToolTip="Auto-plays HypnoTube videos fullscreen"/><CheckBox x:Name="ChkAutonomyWebVideo" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Subliminals" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomySubliminal" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Comments" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyComment" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                    </StackPanel>
                                                    <!-- Advanced -->
                                                    <StackPanel Grid.Column="4">
                                                        <TextBlock Text="Advanced" Foreground="{StaticResource PinkBrush}" FontWeight="Bold" FontSize="10" Margin="0,0,0,2"/>
                                                        <Grid Margin="0,1"><TextBlock Text="Bubbles" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyBubbles" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Pink Filter" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyPinkFilter" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Lock Cards" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyLockCard" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Bouncing" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyBouncingText" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                        <Grid Margin="0,1"><TextBlock Text="Mindwipe" FontSize="10" Foreground="{StaticResource TextLightBrush}"/><CheckBox x:Name="ChkAutonomyMindWipe" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/></Grid>
                                                    </StackPanel>
                                                </Grid>

                                                <!-- Buttons -->
                                                <Grid Margin="0,10,0,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="8"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Button x:Name="BtnAutonomyStartStop" Grid.Column="0" Content=" Start" Background="{StaticResource GridDarkPurpleBrush}" Foreground="{StaticResource SuccessBrush}"
                                                            FontWeight="Bold" FontSize="12" Padding="12,6"
                                                            Click="BtnAutonomyStartStop_Click" ToolTip="Start/Stop Bambi Takeover"/>
                                                    <Button Grid.Column="2" Content="Test" Background="{StaticResource PinkBrush}" Foreground="White" FontWeight="Bold" FontSize="11"
                                                            Padding="12,6" Click="BtnTestAutonomy_Click" ToolTip="Test action"/>
                                                </Grid>

                                                <!-- Hidden elements -->
                                                <CheckBox x:Name="ChkAutonomySpiral" Visibility="Collapsed" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/>
                                                <CheckBox x:Name="ChkAutonomyBubbleCount" Visibility="Collapsed" Checked="ChkAutonomyBehavior_Changed" Unchecked="ChkAutonomyBehavior_Changed"/>
                                                <Button x:Name="BtnForceStartAutonomy" Visibility="Collapsed" Click="BtnForceStartAutonomy_Click"/>
                                                <CheckBox x:Name="ChkAutonomyEnabled" Visibility="Collapsed" Checked="ChkAutonomyEnabled_Changed" Unchecked="ChkAutonomyEnabled_Changed"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </Grid>

                            <!-- Right Box: Feature Image -->
                            <Grid Grid.Column="2">
                                <Border CornerRadius="10" Padding="12" BorderThickness="1">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource NavyBlueColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.BorderBrush>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource PinkColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                    <Border.Effect>
                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="Let Her Take Control" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="She will autonomously trigger effects based on your settings"
                                                   Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap" TextAlignment="Center" Margin="0,4,0,12"/>
                                        <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="8" Padding="8">
                                            <Image x:Name="ImgTakeover" Source="pack://application:,,,/Resources/features/bambi takeover.png"
                                                   Stretch="Uniform" MaxHeight="200"/>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Grid>

                        <!-- Divider -->
                        <Border Height="1" Margin="20,15" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Patreon Info Box -->
                        <Border CornerRadius="10" Padding="15" Margin="0,10,0,0"
                                BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DarkerBgColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PatreonPurpleColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <StackPanel>
                                <TextBlock Text="Support Development" Foreground="{StaticResource PatreonPurpleBrush}" FontSize="14" FontWeight="Bold"/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,8,0,0">
                                    <Run Text="Patreon unlocks:"/> <Run x:Name="RunPatreonFeatures" Text="AI Chat, Window Awareness, Slut Mode, Bambi Takeover" Foreground="White"/>
                                </TextBlock>
                                <Button x:Name="BtnVisitPatreon" Content="Visit Patreon"
                                        Background="{StaticResource PatreonPurpleBrush}" Foreground="White"
                                        BorderThickness="0" Padding="15,8" Margin="0,12,0,0"
                                        HorizontalAlignment="Left" FontSize="12"
                                        Cursor="Hand"
                                        Click="BtnVisitPatreon_Click"/>
                            </StackPanel>
                        </Border>

                        <!-- Discord Sharing Settings -->
                        <Border CornerRadius="10" Padding="15" Margin="0,10,0,0"
                                BorderThickness="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DarkerBgColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DiscordColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource PatreonPurpleColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource DiscordColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                            </Border.Effect>
                            <StackPanel>
                                <TextBlock Text="Discord Community Sharing" Foreground="{StaticResource DiscordBrush}" FontSize="14" FontWeight="Bold"/>
                                <TextBlock Text="Share achievements and level milestones to the community Discord" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,4,0,10"/>

                                <!-- Sharing Options -->
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0">
                                        <CheckBox x:Name="ChkShareAchievements" Style="{StaticResource ToggleStyle}"
                                                  Checked="ChkShareAchievements_Changed" Unchecked="ChkShareAchievements_Changed"/>
                                        <TextBlock Text="Share Achievements" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <CheckBox x:Name="ChkShareLevelUps" Style="{StaticResource ToggleStyle}"
                                                  Checked="ChkShareLevelUps_Changed" Unchecked="ChkShareLevelUps_Changed"/>
                                        <TextBlock Text="Share Level Milestones" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Privacy Options -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                    <CheckBox x:Name="ChkShowLevelInPresence" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                              Checked="ChkShowLevelInPresence_Changed" Unchecked="ChkShowLevelInPresence_Changed"/>
                                    <TextBlock Text="Show Level in Status" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                               ToolTip="Show your level in Discord Rich Presence status"/>
                                </StackPanel>

                                <!-- Allow Discord DM from Leaderboard -->
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <CheckBox x:Name="ChkAllowDiscordDm" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkAllowDiscordDm_Changed" Unchecked="ChkAllowDiscordDm_Changed"/>
                                    <TextBlock Text="Allow Discord DMs from Leaderboard" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                               ToolTip="Show your Discord icon on the leaderboard so others can send you DMs"/>
                                </StackPanel>

                                <!-- Share Profile Picture -->
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <CheckBox x:Name="ChkShareProfilePicture" Style="{StaticResource ToggleStyle}"
                                              Checked="ChkShareProfilePicture_Changed" Unchecked="ChkShareProfilePicture_Changed"/>
                                    <TextBlock Text="Share Profile Picture" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                               ToolTip="Show your Discord avatar on your profile when others view it"/>
                                </StackPanel>

                                <!-- Show Online Status -->
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <CheckBox x:Name="ChkShowOnlineStatus" Style="{StaticResource ToggleStyle}" IsChecked="True"
                                              Checked="ChkShowOnlineStatus_Changed" Unchecked="ChkShowOnlineStatus_Changed"/>
                                    <TextBlock Text="Show Online Status" Foreground="White" FontSize="11" Margin="6,0,0,0" VerticalAlignment="Center"
                                               ToolTip="Show when you're online. Disable to appear offline (invisible mode)"/>
                                </StackPanel>

                                <TextBlock Text="All sharing is opt-in. Nothing is shared without your consent."
                                           Foreground="{StaticResource DiscordBrush}" FontSize="10" FontStyle="Italic" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Patreon Status -->
                        <Border CornerRadius="10" Padding="15" Margin="0,10,0,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{StaticResource DarkerBgColor}" Offset="0"/>
                                    <GradientStop Color="{StaticResource DeepBlueColor}" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.2"/>
                            </Border.Effect>
                            <StackPanel>
                                <TextBlock Text="Connection Status" Foreground="{StaticResource PinkBrush}" FontSize="14" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtAiStatus" Text="Not connected" Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </ContentControl>

        <!-- Profile Tab -->
        <ContentControl x:Name="DiscordTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
            <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="10"/><ColumnDefinition Width="*"/></Grid.ColumnDefinitions>
            <Grid.RowDefinitions><RowDefinition Height="*"/><RowDefinition Height="10"/><RowDefinition Height="*"/></Grid.RowDefinitions>
            <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="3" Style="{StaticResource SectionPanel}" BorderBrush="{StaticResource DiscordBrush}" BorderThickness="1">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <Grid Margin="0,0,0,15">
                            <TextBlock Text="Profile Viewer" Foreground="{StaticResource DiscordBrush}" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <Button x:Name="HelpBtnDiscordProfile" Style="{StaticResource HelpButtonStyle}" HorizontalAlignment="Right" Tag="DiscordProfile"/>
                        </Grid>

                        <!-- Search Input -->
                        <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="10" Margin="0,0,0,15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="TxtProfileSearch" Background="Transparent" BorderThickness="0" Foreground="White"
                                         FontSize="13" VerticalAlignment="Center" KeyDown="TxtProfileSearch_KeyDown">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox">
                                            <Style.Triggers>
                                                <Trigger Property="Text" Value="">
                                                    <Setter Property="Background">
                                                        <Setter.Value>
                                                            <VisualBrush Stretch="None" AlignmentX="Left">
                                                                <VisualBrush.Visual>
                                                                    <TextBlock Text="Search by display name..." Foreground="{StaticResource GridMutedPurpleBrush}" FontSize="13" Margin="2,0,0,0"/>
                                                                </VisualBrush.Visual>
                                                            </VisualBrush>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                                <Button Grid.Column="1" Content="" Background="Transparent" BorderThickness="0"
                                        Foreground="{StaticResource DiscordBrush}" FontSize="16" Cursor="Hand" Click="BtnProfileSearch_Click"
                                        ToolTip="Search profile"/>
                            </Grid>
                        </Border>

                        <!-- Quick buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
                            <Button Content="My Profile" Background="{StaticResource DiscordBrush}" Foreground="White" BorderThickness="0"
                                    Padding="12,6" Margin="0,0,8,0" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                                    Click="BtnViewMyProfile_Click"/>
                            <Button Content="Clear" Background="{StaticResource PanelAccentBrush}" Foreground="White" BorderThickness="0"
                                    Padding="12,6" FontSize="11" Cursor="Hand" Click="BtnClearProfile_Click"/>
                        </StackPanel>

                        <!-- Profile Card with optional OG animated border (layered via Grid) -->
                        <Grid x:Name="ProfileCardWrapper" Visibility="Collapsed">
                            <!-- OG animated border (behind the card) -->
                            <Border x:Name="OgBorderContainer" Visibility="Collapsed" Padding="0" CornerRadius="18">
                                <Border.Resources>
                                    <Storyboard x:Key="OgBorderAnimation" RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="OgBorderRotation"
                                                         Storyboard.TargetProperty="Angle"
                                                         From="0" To="360" Duration="0:0:3"/>
                                    </Storyboard>
                                </Border.Resources>
                                <Border.Background>
                                    <LinearGradientBrush x:Name="OgBorderBrush" StartPoint="0,0" EndPoint="1,1">
                                        <LinearGradientBrush.RelativeTransform>
                                            <RotateTransform x:Name="OgBorderRotation" CenterX="0.5" CenterY="0.5" Angle="0"/>
                                        </LinearGradientBrush.RelativeTransform>
                                        <GradientStop Color="{StaticResource GoldColor}" Offset="0"/>
                                        <GradientStop Color="{StaticResource OrangeAccentColor}" Offset="0.25"/>
                                        <GradientStop Color="{StaticResource PinkColor}" Offset="0.5"/>
                                        <GradientStop Color="{StaticResource OrangeAccentColor}" Offset="0.75"/>
                                        <GradientStop Color="{StaticResource GoldColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                            </Border>
                            <!-- Profile card content (always visible when wrapper is visible) -->
                            <Border x:Name="ProfileCardContainer" Margin="8" Background="{StaticResource DarkerBgBrush}" CornerRadius="12">
                            <StackPanel>
                                <!-- Profile Header (Avatar + Name + Status) -->
                                <Border CornerRadius="12" Padding="15" Margin="0,0,0,10">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="{StaticResource DeepBlueColor}" Offset="0"/>
                                            <GradientStop Color="{StaticResource PillBackgroundColor}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Avatar with online indicator -->
                                        <Grid Width="100" Height="100">
                                            <Border CornerRadius="50" BorderBrush="{StaticResource DiscordBrush}" BorderThickness="3">
                                                <Border.Background>
                                                    <ImageBrush x:Name="ProfileViewerAvatar" Stretch="UniformToFill"/>
                                                </Border.Background>
                                            </Border>
                                            <!-- Online status dot -->
                                            <Ellipse x:Name="ProfileOnlineIndicator" Width="20" Height="20"
                                                     HorizontalAlignment="Right" VerticalAlignment="Bottom"
                                                     Margin="0,0,5,5" Stroke="{StaticResource DeepBlueBrush}" StrokeThickness="3" Fill="{StaticResource DiscordGreenBrush}"/>
                                        </Grid>

                                        <!-- Name and handle -->
                                        <StackPanel Grid.Column="1" Margin="12,0,0,0" VerticalAlignment="Center">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock x:Name="TxtProfileViewerName" Text="Display Name"
                                                           Foreground="White" FontSize="18" FontWeight="Bold" TextTrimming="CharacterEllipsis"/>
                                                <!-- Edit display name button (own profile only) -->
                                                <Button x:Name="BtnChangeDisplayName" Visibility="Collapsed"
                                                        Width="24" Height="24" Margin="6,0,0,0"
                                                        Background="Transparent" BorderThickness="0"
                                                        Cursor="Hand" VerticalAlignment="Center"
                                                        ToolTip="Change display name"
                                                        Click="BtnChangeDisplayName_Click">
                                                    <TextBlock Text="&#x270E;" Foreground="{StaticResource TextSecondaryBrush}" FontSize="14" VerticalAlignment="Center"/>
                                                </Button>
                                                <!-- Delete profile button (own profile only) -->
                                                <Button x:Name="BtnDeleteProfile" Visibility="Collapsed"
                                                        Width="24" Height="24" Margin="4,0,0,0"
                                                        Background="Transparent" BorderThickness="0"
                                                        Cursor="Hand" VerticalAlignment="Center"
                                                        ToolTip="Delete your profile"
                                                        Click="BtnDeleteProfile_Click">
                                                    <TextBlock Text="&#x1F5D1;" Foreground="{StaticResource WarningRedBackgroundBrush}" FontSize="13" VerticalAlignment="Center"/>
                                                </Button>
                                                <!-- OG GOOD GIRL Banner -->
                                                <Border x:Name="OgBannerBadge" Visibility="Collapsed" Margin="10,0,0,0" Padding="8,3" CornerRadius="4"
                                                        VerticalAlignment="Center">
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                            <GradientStop Color="{StaticResource GoldColor}" Offset="0"/>
                                                            <GradientStop Color="{StaticResource OrangeAccentColor}" Offset="0.5"/>
                                                            <GradientStop Color="{StaticResource PinkColor}" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <TextBlock Text="OG GOOD GIRL" Foreground="{StaticResource DarkerBgBrush}" FontSize="10" FontWeight="ExtraBold"
                                                               FontFamily="Segoe UI" VerticalAlignment="Center"/>
                                                </Border>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                                                <TextBlock x:Name="TxtProfileViewerOnline" Text="Online"
                                                           Foreground="{StaticResource DiscordGreenBrush}" FontSize="11"/>
                                            </StackPanel>
                                            <!-- Discord button + Patreon badge row -->
                                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                                <Button x:Name="BtnProfileDiscord" Visibility="Collapsed"
                                                        Background="{StaticResource DiscordBrush}" Foreground="White" BorderThickness="0"
                                                        Padding="10,5" Cursor="Hand"
                                                        HorizontalAlignment="Left" VerticalAlignment="Center"
                                                        Click="BtnProfileDiscord_Click"
                                                        ToolTip="Open Discord Profile">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="" FontSize="12" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                                        <TextBlock x:Name="TxtProfileDiscordId" Text="Message on Discord" Foreground="White" FontSize="12" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </Button>
                                                <!-- Patreon tier badge (same as leaderboard) -->
                                                <Image x:Name="ProfilePatreonTierBadge" Width="80" Height="80" Margin="8,0,0,0"
                                                       VerticalAlignment="Center" Visibility="Collapsed" Stretch="Uniform"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Patreon tier banner -->
                                        <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="10,0,0,0">
                                            <!-- Patreon tier banner (Pink filter / Prime subject) -->
                                            <Border x:Name="ProfilePatreonTierBanner" Visibility="Collapsed"
                                                    Width="140" Height="100" CornerRadius="8">
                                                <Image x:Name="ImgPatreonTierBanner" Stretch="Uniform"/>
                                            </Border>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Level, Rank & Patreon Badge -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="10" Padding="12" Margin="0,0,0,10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="LEVEL" Foreground="{StaticResource TextMutedBrush}" FontSize="10" FontWeight="Bold"/>
                                            <TextBlock x:Name="TxtProfileViewerLevel" Text="1" Foreground="{StaticResource GoldBrush}" FontSize="32" FontWeight="ExtraBold" Margin="0,-5,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="RANK" Foreground="{StaticResource TextMutedBrush}" FontSize="10" FontWeight="Bold"/>
                                            <TextBlock x:Name="TxtProfileViewerRank" Text="#-" Foreground="{StaticResource GoldBrush}" FontSize="32" FontWeight="ExtraBold" Margin="0,-5,0,0"/>
                                        </StackPanel>
                                        <!-- Patreon Badge -->
                                        <Image x:Name="ProfilePatreonBadge" Grid.Column="2" Height="40" VerticalAlignment="Center"
                                               Visibility="Collapsed"/>
                                    </Grid>
                                </Border>

                                <!-- Stats Grid (Trainer Card Style) -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="10" Padding="12" Margin="0,0,0,10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- XP with image -->
                                        <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,0,12" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatXp" Source="pack://application:,,,/Resources/achievements/lv_10.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="XP" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerXp" Text="0" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Bubbles with image -->
                                        <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,12" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatBubbles" Source="pack://application:,,,/Resources/achievements/pop_the_Thought.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="BUBBLES" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerBubbles" Text="0" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Video Time with image -->
                                        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,0,12" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatVideos" Source="pack://application:,,,/Resources/achievements/10_hours_pink.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="VIDEOS" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerVideos" Text="0h" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- GIFs with image -->
                                        <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,12" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatGifs" Source="pack://application:,,,/Resources/achievements/retinal_burn.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="FLASHES" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerGifs" Text="0" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Lock Cards with image -->
                                        <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatLockCards" Source="pack://application:,,,/Resources/achievements/total_lockdown.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="LOCK CARDS" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerLockCards" Text="0" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Achievements with image -->
                                        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                                            <Border Width="64" Height="64" CornerRadius="8" Background="{StaticResource ContentModeToggleBackgroundBrush}" Margin="0,0,12,0">
                                                <Image x:Name="ImgStatAchievements" Source="pack://application:,,,/Resources/achievements/spiral_eyes.png" Stretch="Uniform" Margin="3"/>
                                            </Border>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock Text="ACHIEVEMENTS" Foreground="{StaticResource PinkBrush}" FontSize="12" FontWeight="Bold"/>
                                                <TextBlock x:Name="TxtProfileViewerAchievements" Text="0" Foreground="White" FontSize="18" FontWeight="Bold"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Achievement Images Grid -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="10" Padding="10" Margin="0,0,0,5">
                                    <StackPanel>
                                        <TextBlock Text="ACHIEVEMENTS" Foreground="{StaticResource DiscordBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,8"/>
                                        <ItemsControl x:Name="ProfileAchievementGrid">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Width="80" Height="80" Margin="4" CornerRadius="8"
                                                            Background="{StaticResource ContentModeToggleBackgroundBrush}" ToolTip="{Binding Name}">
                                                        <Image Source="{Binding Image}" Stretch="Uniform" Margin="4"/>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                        <TextBlock x:Name="TxtNoAchievements" Text="No achievements yet"
                                                   Foreground="{StaticResource GridMutedPurpleBrush}" FontSize="11" FontStyle="Italic"
                                                   HorizontalAlignment="Center" Visibility="Collapsed"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>
                        </Grid>

                        <!-- No profile selected message -->
                        <Border x:Name="NoProfileSelected" Background="{StaticResource DeepPanelBrush}" CornerRadius="10" Padding="30">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                <TextBlock Text="Search for a user" Foreground="{StaticResource TextMutedBrush}" FontSize="14" HorizontalAlignment="Center"/>
                                <TextBlock Text="or click 'My Profile'" Foreground="{StaticResource GridMutedPurpleBrush}" FontSize="12" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>            <Border Grid.Column="2" Grid.Row="0" Grid.RowSpan="3" Style="{StaticResource SectionPanel}" BorderBrush="{StaticResource DiscordBrush}" BorderThickness="1"><ScrollViewer VerticalScrollBarVisibility="Auto"><StackPanel Margin="10"><TextBlock Text="Community Settings" Foreground="{StaticResource DiscordBrush}" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/><Border Background="{StaticResource DarkerBgBrush}" CornerRadius="8" Padding="15" Margin="0,0,0,12" BorderBrush="{StaticResource DiscordBrush}" BorderThickness="1"><Grid><Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions><StackPanel VerticalAlignment="Center"><TextBlock x:Name="TxtDiscordTabStatus" Text="Not Connected" Foreground="White" FontSize="14" FontWeight="Bold"/><TextBlock x:Name="TxtDiscordTabInfo" Text="Link Discord for community features" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,2,0,0"/></StackPanel><Button x:Name="BtnDiscordTabLogin" Grid.Column="1" Content="Login" Background="{StaticResource DiscordBrush}" Foreground="White" BorderThickness="0" Padding="15,8" FontWeight="Bold" FontSize="11" Cursor="Hand" Click="BtnDiscordTabLogin_Click"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Discord Rich Presence" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Show your activity status" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabRichPresence" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Checked="ChkDiscordRichPresence_Changed" Unchecked="ChkDiscordRichPresence_Changed"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Show Level in Status" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Display your level" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabShowLevel" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True" Checked="ChkShowLevelInPresence_Changed" Unchecked="ChkShowLevelInPresence_Changed"/></Grid></Border><TextBlock Text="Community Sharing" Foreground="{StaticResource DiscordBrush}" FontSize="13" FontWeight="Bold" Margin="0,12,0,10"/><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Share Achievements" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Post achievements to Discord" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabShareAchievements" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Checked="ChkShareAchievements_Changed" Unchecked="ChkShareAchievements_Changed"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Share Level Milestones" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Post level ups to Discord" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabShareLevelUps" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Checked="ChkShareLevelUps_Changed" Unchecked="ChkShareLevelUps_Changed"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Allow DMs from Leaderboard" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Let others message you" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabAllowDm" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Checked="ChkAllowDiscordDm_Changed" Unchecked="ChkAllowDiscordDm_Changed"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Share Profile Picture" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Show your avatar to others" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabSharePfp" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" Checked="ChkShareProfilePicture_Changed" Unchecked="ChkShareProfilePicture_Changed"/></Grid></Border><Border Background="{StaticResource DeepBlueBrush}" CornerRadius="6" Padding="12" Margin="0,0,0,8"><Grid><StackPanel><TextBlock Text="Show Online Status" Foreground="White" FontSize="12" FontWeight="SemiBold"/><TextBlock Text="Appear offline when disabled" Foreground="{StaticResource TextMutedBrush}" FontSize="10"/></StackPanel><CheckBox x:Name="ChkDiscordTabShowOnline" Style="{StaticResource ToggleStyle}" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True" Checked="ChkShowOnlineStatus_Changed" Unchecked="ChkShowOnlineStatus_Changed"/></Grid></Border><TextBlock Text="All sharing is opt-in." Foreground="{StaticResource DiscordBrush}" FontSize="10" FontStyle="Italic" Margin="0,10,0,0"/><Button Content="Join Discord Server" Background="{StaticResource DiscordBrush}" Foreground="White" BorderThickness="0" Padding="15,12" Margin="0,15,0,0" FontWeight="Bold" FontSize="12" Cursor="Hand" Click="BtnDiscord_Click"/></StackPanel></ScrollViewer></Border>
            </Grid>
        </ContentControl>
        <!-- Leaderboard Tab -->
        <ContentControl x:Name="LeaderboardTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header with sort dropdown and refresh -->
                    <Border Grid.Row="0" Background="{StaticResource HelpButtonHoverBackgroundBrush}" CornerRadius="12,12,0,0" Padding="20,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Help button + left flavour text -->
                            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                <Button x:Name="HelpBtnLeaderboard" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Tag="Leaderboard"/>
                                <Border Background="{StaticResource GridAccentBorderBrush}" CornerRadius="8" Padding="12,8" Margin="10,0,0,0" BorderBrush="{StaticResource GridAccentBorderBrush}" BorderThickness="1">
                                    <StackPanel>
                                        <TextBlock Text="who's the prettiest bimbo?~" FontStyle="Italic" FontSize="15" FontWeight="Bold"
                                                   Foreground="{StaticResource GridAccentBorderBrush}"/>
                                        <TextBlock Text="every level counts, every quest matters~" FontStyle="Italic" FontSize="13" FontWeight="Bold"
                                                   Foreground="{StaticResource GridAccentBorderBrush}" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>

                            <!-- Big LEADERBOARD title with stroke effect -->
                            <Grid Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <!-- Shadow/outline layer -->
                                <TextBlock Text="LEADERBOARD" FontSize="38" FontWeight="ExtraBold" FontFamily="Segoe Print"
                                           Foreground="{StaticResource OverlayBackgroundBrush}" Margin="2,2,0,0"/>
                                <!-- Main text -->
                                <TextBlock Text="LEADERBOARD" FontSize="38" FontWeight="ExtraBold" FontFamily="Segoe Print"
                                           Foreground="{StaticResource PinkBrush}"/>
                            </Grid>

                            <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Border Background="{StaticResource GridAccentBorderBrush}" CornerRadius="8" Padding="12,8" Margin="0,0,12,0" BorderBrush="{StaticResource GridAccentBorderBrush}" BorderThickness="1" VerticalAlignment="Center">
                                        <StackPanel>
                                            <TextBlock x:Name="TxtLeaderboardSeason" Text="season 1 ~ prove your devotion~"
                                                       FontStyle="Italic" FontSize="15" FontWeight="Bold" Foreground="{StaticResource GridAccentBorderBrush}"/>
                                            <TextBlock Text="resets monthly  your rank is everything~" FontStyle="Italic" FontSize="13" FontWeight="Bold"
                                                       Foreground="{StaticResource GridAccentBorderBrush}" Margin="0,2,0,0"/>
                                        </StackPanel>
                                    </Border>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock x:Name="TxtLeaderboardStatus" Foreground="{StaticResource PinkBrush}"
                                                   HorizontalAlignment="Center" Margin="0,0,0,4" FontSize="13"/>
                                        <Button x:Name="BtnRefreshLeaderboard" Content="Refresh" Padding="15,8"
                                                Background="{StaticResource PinkBrush}" Foreground="White" FontSize="13" FontWeight="SemiBold"
                                                Click="BtnRefreshLeaderboard_Click" Cursor="Hand">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource AnnouncementMutedPinkBrush}"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Leaderboard list - double-click to view profile -->
                    <ListView x:Name="LstLeaderboard" Grid.Row="1" Background="Transparent"
                              BorderThickness="0" Margin="10,5,10,10" Foreground="{StaticResource PinkBrush}"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                              VirtualizingStackPanel.IsVirtualizing="True"
                              VirtualizingStackPanel.VirtualizationMode="Recycling"
                              ScrollViewer.IsDeferredScrollingEnabled="True"
                              FontSize="18" FontFamily="Segoe Print" FontWeight="ExtraBold"
                              GridViewColumnHeader.Click="LeaderboardColumnHeader_Click"
                              MouseDoubleClick="LstLeaderboard_MouseDoubleClick">
                        <ListView.Resources>
                            <!-- Header style for dark theme - clickable for sorting -->
                            <Style TargetType="GridViewColumnHeader">
                                <Setter Property="Background" Value="{StaticResource DarkPurpleBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="FontWeight" Value="ExtraBold"/>
                                <Setter Property="FontSize" Value="18"/>
                                <Setter Property="FontFamily" Value="Segoe Print"/>
                                <Setter Property="Padding" Value="12,10"/>
                                <Setter Property="BorderThickness" Value="0,0,1,2"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{StaticResource GridDeepPurpleAccentBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.Resources>
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Rank" Width="80" DisplayMemberBinding="{Binding Rank}"/>
                                <!-- OG Column - Glowing pink neon for Season 0 OGs -->
                                <GridViewColumn Header="" Width="50">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="OG" FontWeight="ExtraBold" FontSize="16"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       FontFamily="Segoe UI Black">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsSeason0Og}" Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
                                                                <Setter Property="Effect">
                                                                    <Setter.Value>
                                                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="15" ShadowDepth="0" Opacity="1"/>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Name" Width="280" DisplayMemberBinding="{Binding DisplayNameWithFlair}"/>
                                <GridViewColumn Header="Patreon" Width="120">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <!-- Tier 1 Badge (also fallback for IsPatreon with tier 0) -->
                                                <Image Source="/Resources/Patreon tier1.png" Height="42" RenderOptions.BitmapScalingMode="HighQuality">
                                                    <Image.Style>
                                                        <Style TargetType="Image">
                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding PatreonTier}" Value="1">
                                                                    <Setter Property="Visibility" Value="Visible"/>
                                                                </DataTrigger>
                                                                <!-- Fallback: show tier1 for patrons with tier 0 -->
                                                                <MultiDataTrigger>
                                                                    <MultiDataTrigger.Conditions>
                                                                        <Condition Binding="{Binding IsPatreon}" Value="True"/>
                                                                        <Condition Binding="{Binding PatreonTier}" Value="0"/>
                                                                    </MultiDataTrigger.Conditions>
                                                                    <Setter Property="Visibility" Value="Visible"/>
                                                                </MultiDataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <!-- Tier 2 Badge -->
                                                <Image Source="/Resources/Patreon tier2.png" Height="42" RenderOptions.BitmapScalingMode="HighQuality">
                                                    <Image.Style>
                                                        <Style TargetType="Image">
                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding PatreonTier}" Value="2">
                                                                    <Setter Property="Visibility" Value="Visible"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <!-- Tier 3 Badge -->
                                                <Image Source="/Resources/Patreon tier3.png" Height="42" RenderOptions.BitmapScalingMode="HighQuality">
                                                    <Image.Style>
                                                        <Style TargetType="Image">
                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding PatreonTier}" Value="3">
                                                                    <Setter Property="Visibility" Value="Visible"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                            </Grid>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Disc." Width="60">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Click="BtnLeaderboardDiscord_Click" Cursor="Hand"
                                                    Tag="{Binding DiscordId}" Background="Transparent" BorderThickness="0"
                                                    ToolTip="Send Discord DM">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding HasDiscord}" Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                <Image Source="/Resources/discord.png" Height="36" VerticalAlignment="Center" RenderOptions.BitmapScalingMode="HighQuality"/>
                                            </Button>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Level" Width="100" DisplayMemberBinding="{Binding Level}"/>
                                <GridViewColumn Header="XP" Width="100" DisplayMemberBinding="{Binding XpDisplay}"/>
                                <GridViewColumn Header="Achievements" Width="130" DisplayMemberBinding="{Binding AchievementsDisplay}"/>
                                <!-- Trophy Case Columns (shown only when skill unlocked) -->
                                <GridViewColumn x:Name="ColLongestSession" Header="Best Session" Width="110">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Visibility="{Binding HasTrophyCase, Converter={StaticResource BoolToVisibility}}">
                                                <TextBlock Text="{Binding LongestSessionDisplay}" HorizontalAlignment="Center"/>
                                                <TextBlock Text="min" FontSize="11" Foreground="{StaticResource TextSilverBrush}" HorizontalAlignment="Center" Margin="0,-3,0,0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn x:Name="ColHighestStreak" Header="Best Streak" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Visibility="{Binding HasTrophyCase, Converter={StaticResource BoolToVisibility}}">
                                                <TextBlock Text="{Binding HighestStreakDisplay}" HorizontalAlignment="Center"/>
                                                <TextBlock Text="days" FontSize="11" Foreground="{StaticResource TextSilverBrush}" HorizontalAlignment="Center" Margin="0,-3,0,0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="Online" Width="80">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Ellipse Width="18" Height="18" HorizontalAlignment="Center">
                                                <Ellipse.Style>
                                                    <Style TargetType="Ellipse">
                                                        <Setter Property="Fill" Value="{StaticResource GridMutedDarkBlueBrush}"/>
                                                        <Setter Property="Stroke" Value="{StaticResource GridMutedSlateBrush}"/>
                                                        <Setter Property="StrokeThickness" Value="2"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsOnline}" Value="True">
                                                                <Setter Property="Fill" Value="{StaticResource PinkBrush}"/>
                                                                <Setter Property="Stroke" Value="{StaticResource AnnouncementMutedPinkBrush}"/>
                                                                <Setter Property="Effect">
                                                                    <Setter.Value>
                                                                        <DropShadowEffect Color="{StaticResource PinkColor}" BlurRadius="12" ShadowDepth="0"/>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Ellipse.Style>
                                            </Ellipse>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Foreground" Value="{StaticResource PinkBrush}"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Padding" Value="8"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="FontSize" Value="18"/>
                                <Setter Property="FontWeight" Value="ExtraBold"/>
                                <Setter Property="FontFamily" Value="Segoe Print"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Style.Triggers>
                                    <!-- OG users get gold-tinted row -->
                                    <DataTrigger Binding="{Binding IsSeason0Og}" Value="True">
                                        <Setter Property="Background" Value="{StaticResource GridGoldAccentBrush}"/>
                                        <Setter Property="BorderBrush" Value="{StaticResource GridGoldHoverBrush}"/>
                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                    </DataTrigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{StaticResource GridPinkTransparentBrush}"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="{StaticResource GridPinkMutedBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </Grid>
        </ContentControl>

        <!-- Assets & Packs Tab -->
        <ContentControl x:Name="AssetsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" MaxHeight="290"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header with title and actions -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text=" Assets &amp; Content Packs" Style="{StaticResource SectionHeader}"
                               FontSize="18" VerticalAlignment="Center"/>
                    <Button x:Name="HelpBtnAssets" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Tag="Assets"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="BtnRefreshPacks" Content=" Refresh"
                            Style="{StaticResource OutlineButton}" Margin="0,0,8,0" Padding="12,6"
                            Click="BtnRefreshPacks_Click" ToolTip="Refresh available packs"/>
                    <Button x:Name="BtnOpenAssetsFolder" Content=" Open Folder"
                            Style="{StaticResource OutlineButton}" Padding="12,6"
                            Click="BtnOpenAssetsFolder_Click" ToolTip="Open assets folder in Explorer"/>
                </StackPanel>
            </Grid>

            <!-- TOP: Content Packs Section -->
            <Border Grid.Row="1" Style="{StaticResource SectionPanel}" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header with bandwidth bar -->
                    <Grid Grid.Row="0" Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text=" Community Content Packs"
                                       Style="{StaticResource SectionHeader}"/>
                            <Button x:Name="HelpBtnPacks" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Tag="ContentPacks"/>
                        </StackPanel>

                        <!-- Bandwidth usage bar -->
                        <StackPanel x:Name="BandwidthPanel" Grid.Column="1" Orientation="Horizontal"
                                    HorizontalAlignment="Right" VerticalAlignment="Center"
                                    Visibility="Collapsed">
                            <TextBlock x:Name="TxtBandwidthLabel" Text="Bandwidth:"
                                       Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <Border Background="{StaticResource DarkerBgBrush}" CornerRadius="4" Width="150" Height="16" VerticalAlignment="Center">
                                <Grid>
                                    <ProgressBar x:Name="BandwidthProgressBar"
                                                 Minimum="0" Maximum="100" Value="0"
                                                 Foreground="{StaticResource PinkBrush}" Background="Transparent"
                                                 BorderThickness="0"/>
                                    <TextBlock x:Name="TxtBandwidthUsage" Text="0 / 10 GB"
                                               Foreground="White" FontSize="10" FontWeight="SemiBold"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <!-- Horizontal scrolling pack cards -->
                    <ScrollViewer x:Name="PacksScrollViewer" Grid.Row="2"
                                  HorizontalScrollBarVisibility="Auto"
                                  VerticalScrollBarVisibility="Disabled"
                                  PreviewMouseWheel="PacksScrollViewer_PreviewMouseWheel"
                                  Padding="0,0,0,8"
                                  MaxHeight="340">
                        <ScrollViewer.Resources>
                            <!-- Force bigger scrollbar -->
                            <Style TargetType="ScrollBar">
                                <Setter Property="Height" Value="14"/>
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ScrollBar">
                                            <Grid Background="Transparent">
                                                <Border Background="{StaticResource GridDeepPanelBrush}" CornerRadius="7" Opacity="0.5" Margin="2"/>
                                                <Track x:Name="PART_Track" IsDirectionReversed="False">
                                                    <Track.Thumb>
                                                        <Thumb Background="{StaticResource PinkBrush}" Cursor="Hand">
                                                            <Thumb.Template>
                                                                <ControlTemplate TargetType="Thumb">
                                                                    <Border Background="{TemplateBinding Background}"
                                                                            CornerRadius="6" Margin="2"/>
                                                                </ControlTemplate>
                                                            </Thumb.Template>
                                                        </Thumb>
                                                    </Track.Thumb>
                                                </Track>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ScrollViewer.Resources>
                        <StackPanel Orientation="Horizontal">
                            <!-- Dynamic Pack Cards -->
                            <ItemsControl x:Name="PackCardsItemsControl">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Width="240" Height="300" Margin="0,0,12,0" CornerRadius="8"
                                                Background="{StaticResource DeepPanelBrush}" BorderBrush="{StaticResource PanelAccentBrush}" BorderThickness="1">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="90"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <!-- Preview Image (rotating for installed packs, static otherwise) -->
                                                <Border Grid.Row="0" CornerRadius="8,8,0,0" ClipToBounds="True" Background="{StaticResource DarkerBgBrush}">
                                                    <Grid>
                                                        <!-- Rotating preview image from pack content (for installed packs with loaded previews) -->
                                                        <Image Source="{Binding CurrentPreviewImage}"
                                                               Stretch="UniformToFill" RenderOptions.BitmapScalingMode="HighQuality"
                                                               Visibility="{Binding HasPreviewImages, Converter={StaticResource BoolToVisibility}}"/>
                                                        <!-- Static preview image from URL (fallback when no dynamic previews) -->
                                                        <Image Source="{Binding PreviewImageUrl, TargetNullValue={x:Null}}"
                                                               Stretch="UniformToFill" RenderOptions.BitmapScalingMode="HighQuality"
                                                               Visibility="{Binding HasPreviewImages, Converter={StaticResource InverseBoolToVisibility}}"/>
                                                        <!-- "No Preview" text shows only when no dynamic or static preview exists -->
                                                        <TextBlock Text="No Preview" FontSize="14" Foreground="{StaticResource DarkGrayBrush}"
                                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                   Visibility="{Binding HasAnyPreview, Converter={StaticResource InverseBoolToVisibility}}"/>
                                                        <!-- Size badge -->
                                                        <Border Background="{StaticResource PinkBrush}" CornerRadius="4" Padding="8,3"
                                                                HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="6">
                                                            <TextBlock Text="{Binding SizeDisplay}" FontSize="11" FontWeight="Bold" Foreground="White"/>
                                                        </Border>
                                                        <!-- Installed badge -->
                                                        <Border Background="{StaticResource PrimaryActionGreenBrush}" CornerRadius="4" Padding="6,2"
                                                                HorizontalAlignment="Right" VerticalAlignment="Top" Margin="6"
                                                                Visibility="{Binding IsDownloaded, Converter={StaticResource BoolToVisibility}}">
                                                            <TextBlock Text="INSTALLED" FontSize="8" FontWeight="Bold" Foreground="White"/>
                                                        </Border>
                                                    </Grid>
                                                </Border>

                                                <!-- Info section -->
                                                <Grid Grid.Row="1" Margin="8,4,8,4">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <TextBlock Grid.Row="0" Text="{Binding Name}" FontWeight="Bold"
                                                               Foreground="{StaticResource TextLightBrush}" FontSize="12"
                                                               Margin="0,0,0,2"/>
                                                    <TextBlock Grid.Row="1" Text="{Binding Description}"
                                                               Foreground="{StaticResource TextMutedBrush}" FontSize="10"
                                                               TextWrapping="Wrap" TextTrimming="CharacterEllipsis"
                                                               MaxHeight="92"
                                                               VerticalAlignment="Top"
                                                               ToolTip="{Binding Description}"/>
                                                    <TextBlock Grid.Row="2" Foreground="{StaticResource PinkBrush}" FontSize="9" Margin="0,2,0,4" FontWeight="SemiBold">
                                                        <TextBlock.Text>
                                                            <MultiBinding StringFormat="{}{0} images, {1} videos">
                                                                <Binding Path="ImageCount"/>
                                                                <Binding Path="VideoCount"/>
                                                            </MultiBinding>
                                                        </TextBlock.Text>
                                                    </TextBlock>

                                                    <!-- Action Buttons -->
                                                    <Grid Grid.Row="3">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="4"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <!-- Install/Uninstall Button -->
                                                        <Button Grid.Column="0" Content="{Binding DownloadButtonText}"
                                                                Tag="{Binding}"
                                                                Style="{StaticResource SmallPinkButton}"
                                                                Padding="4,4" Click="BtnPackDownload_Click"
                                                                IsEnabled="{Binding IsNotDownloading}"/>
                                                        <!-- Activate/Deactivate Button (only visible when downloaded) -->
                                                        <Button Grid.Column="2" Content="{Binding ActivateButtonText}"
                                                                Tag="{Binding}"
                                                                Style="{StaticResource SmallPinkButton}"
                                                                Padding="4,4" Click="BtnPackActivate_Click"
                                                                Visibility="{Binding IsDownloaded, Converter={StaticResource BoolToVisibility}}"/>
                                                    </Grid>

                                                    <!-- Progress bar -->
                                                    <ProgressBar Grid.Row="4" Height="4" Margin="0,6,0,0"
                                                                 Minimum="0" Maximum="100" Value="{Binding DownloadProgress}"
                                                                 Foreground="{StaticResource PinkBrush}" Background="{StaticResource DarkerBgBrush}"
                                                                 Visibility="{Binding IsDownloading, Converter={StaticResource BoolToVisibility}}"/>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Creator Card: Join Discord -->
                            <Border Width="220" Height="300" Margin="0,0,12,0" CornerRadius="8"
                                    Background="{StaticResource DeepPanelBrush}" BorderBrush="{StaticResource DiscordBrush}" BorderThickness="2">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="90"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <!-- Discord Preview -->
                                    <Border Grid.Row="0" CornerRadius="8,8,0,0" ClipToBounds="True" Background="{StaticResource DiscordBrush}">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <Image Source="pack://application:,,,/Resources/discord.png"
                                                   Width="48" Height="48" Stretch="Uniform"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Info section -->
                                    <Grid Grid.Row="1" Margin="8,4,8,4">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Text="Create Your Own Pack!" FontWeight="Bold"
                                                   Foreground="{StaticResource TextLightBrush}" FontSize="12"
                                                   Margin="0,0,0,2"/>
                                        <TextBlock Grid.Row="1" Text="Are you a content creator? Join our Discord to submit your pack and reach thousands of users!"
                                                   Foreground="{StaticResource TextMutedBrush}" FontSize="10"
                                                   TextWrapping="Wrap" MaxHeight="52" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Row="2" Foreground="{StaticResource DiscordBrush}" FontSize="9" Margin="0,2,0,4" FontWeight="SemiBold">
                                            Get featured in the app
                                        </TextBlock>

                                        <!-- Button -->
                                        <Button Grid.Row="3" Content="Join Discord"
                                                Background="{StaticResource DiscordBrush}" Foreground="White" BorderThickness="0"
                                                Padding="8,4" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                                                Click="BtnCreatorDiscord_Click">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}"
                                                                        CornerRadius="4" Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Row="2" Height="5" HorizontalAlignment="Stretch"
                          Background="Transparent" Cursor="SizeNS"/>

            <!-- BOTTOM: Interactive File Browser -->
            <Border Grid.Row="3" Style="{StaticResource SectionPanel}" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <Grid Grid.Row="0" Margin="0,0,0,8">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text=" Asset Browser" Style="{StaticResource SectionHeader}"/>
                            <Button x:Name="HelpBtnAssetBrowser" Style="{StaticResource HelpButtonStyle}" VerticalAlignment="Center" Margin="8,0,0,0" Tag="AssetBrowser"/>
                        </StackPanel>
                        <TextBlock x:Name="TxtAssetCounts" Text="0 images, 0 videos"
                                   Foreground="{StaticResource TextMutedBrush}" FontSize="12"
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Action bar with preset selector -->
                    <Grid Grid.Row="1" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left: Select/Deselect buttons -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <Button Content="Select All" Style="{StaticResource OutlineButton}"
                                    Padding="10,4" FontSize="11" Margin="0,0,6,0" Click="BtnSelectAllAssets_Click"/>
                            <Button Content="Deselect All" Style="{StaticResource OutlineButton}"
                                    Padding="10,4" FontSize="11" Click="BtnDeselectAllAssets_Click"/>
                        </StackPanel>

                        <!-- Right: Preset selector -->
                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                            <TextBlock Text="Preset:" Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="11" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <ComboBox x:Name="CmbAssetPresets" Width="180" FontSize="11"
                                      DisplayMemberPath="DisplayText"
                                      SelectedValuePath="Id"
                                      SelectionChanged="CmbAssetPresets_SelectionChanged"/>
                            <Button x:Name="BtnSaveAssetPreset" Content="Save As"
                                    Style="{StaticResource SmallPinkButton}"
                                    Padding="8,4" FontSize="11" Margin="6,0,0,0"
                                    ToolTip="Save current selection as a new preset"
                                    Click="BtnSaveAssetPreset_Click"/>
                            <Button x:Name="BtnUpdateAssetPreset" Content="Update"
                                    Style="{StaticResource OutlineButton}"
                                    Padding="8,4" FontSize="11" Margin="4,0,0,0"
                                    ToolTip="Update selected preset with current selection"
                                    Click="BtnUpdateAssetPreset_Click"/>
                            <Button x:Name="BtnDeleteAssetPreset" Content="Delete"
                                    Style="{StaticResource OutlineButton}"
                                    Padding="8,4" FontSize="11" Margin="4,0,0,0"
                                    ToolTip="Delete selected preset"
                                    Click="BtnDeleteAssetPreset_Click"/>
                        </StackPanel>
                    </Grid>

                    <!-- Split view: TreeView on left, Thumbnails on right -->
                    <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="280"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- LEFT: Folder TreeView -->
                        <Border Grid.Column="0" Background="{StaticResource DarkerBgBrush}" CornerRadius="6" Padding="4">
                            <TreeView x:Name="AssetTreeView" Background="Transparent" BorderThickness="0"
                                      SelectedItemChanged="AssetTreeView_SelectedItemChanged"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                      ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <TreeView.Resources>
                                    <!-- Force bigger scrollbars in TreeView -->
                                    <Style TargetType="ScrollBar">
                                        <Setter Property="Width" Value="14"/>
                                        <Setter Property="Height" Value="14"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ScrollBar">
                                                    <Grid Background="Transparent">
                                                        <Border Background="{StaticResource GridDeepPanelBrush}" CornerRadius="7" Opacity="0.5" Margin="2"/>
                                                        <Track x:Name="PART_Track" IsDirectionReversed="True">
                                                            <Track.Thumb>
                                                                <Thumb Background="{StaticResource PinkBrush}" Cursor="Hand">
                                                                    <Thumb.Template>
                                                                        <ControlTemplate TargetType="Thumb">
                                                                            <Border Background="{TemplateBinding Background}"
                                                                                    CornerRadius="6" Margin="2"/>
                                                                        </ControlTemplate>
                                                                    </Thumb.Template>
                                                                </Thumb>
                                                            </Track.Thumb>
                                                        </Track>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Orientation" Value="Horizontal">
                                                <Setter Property="Height" Value="14"/>
                                                <Setter Property="Width" Value="Auto"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                    <Style TargetType="TreeViewItem">
                                        <Setter Property="Foreground" Value="{StaticResource TextLightBrush}"/>
                                        <Setter Property="FontSize" Value="12"/>
                                        <Setter Property="Padding" Value="2"/>
                                        <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="{StaticResource GridPinkTransparentBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="{StaticResource HelpButtonHoverBackgroundBrush}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TreeView.Resources>
                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                        <StackPanel Orientation="Horizontal" Margin="2">
                                            <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                      IsThreeState="False"
                                                      Checked="FolderCheckBox_Changed"
                                                      Unchecked="FolderCheckBox_Changed"
                                                      VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <TextBlock Text="" FontSize="12" Margin="0,0,4,0" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding FileCountDisplay}"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="10" Margin="4,0,0,0" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                        </Border>

                        <!-- Splitter -->
                        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                                      Background="Transparent" Cursor="SizeWE"/>

                        <!-- RIGHT: Thumbnail Preview Grid -->
                        <Border Grid.Column="2" Background="{StaticResource DarkerBgBrush}" CornerRadius="6" Padding="4">
                            <Grid>
                                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                    <ItemsControl x:Name="ThumbnailsItemsControl">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="100" Height="120" Margin="4" CornerRadius="6"
                                                        Background="{StaticResource DeepPanelBrush}" BorderBrush="{StaticResource PanelAccentBrush}" BorderThickness="2" Cursor="Hand"
                                                        MouseLeftButtonDown="ThumbnailItem_Click">
                                                    <Border.ContextMenu>
                                                        <ContextMenu>
                                                            <MenuItem Header="Preview" Click="ThumbnailItem_Preview_Click"/>
                                                            <Separator/>
                                                            <MenuItem Header="Open in Explorer" Click="ThumbnailItem_OpenInExplorer_Click"/>
                                                        </ContextMenu>
                                                    </Border.ContextMenu>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>

                                                        <!-- Thumbnail image -->
                                                        <Border Grid.Row="0" CornerRadius="6,6,0,0" ClipToBounds="True" Background="{StaticResource DarkerBgBrush}">
                                                            <Grid>
                                                                <!-- Video placeholder icon (shows when IsVideo and no thumbnail) -->
                                                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                            Visibility="{Binding IsVideo, Converter={StaticResource BoolToVisibility}}">
                                                                    <TextBlock Text="" FontSize="32" HorizontalAlignment="Center"/>
                                                                    <TextBlock Text="VIDEO" FontSize="9" Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                                <!-- Image thumbnail (for images, or video if we had one) -->
                                                                <Image Source="{Binding Thumbnail}" Stretch="UniformToFill"/>
                                                                <!-- Loading indicator -->
                                                                <TextBlock Text="" FontSize="14"
                                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                           Visibility="{Binding IsLoadingThumbnail, Converter={StaticResource BoolToVisibility}}"/>
                                                            </Grid>
                                                        </Border>

                                                        <!-- Checkbox overlay -->
                                                        <CheckBox Grid.Row="0" IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                                  HorizontalAlignment="Left" VerticalAlignment="Top"
                                                                  Margin="4" Checked="ThumbnailCheckBox_Changed"
                                                                  Unchecked="ThumbnailCheckBox_Changed"/>

                                                        <!-- Filename -->
                                                        <Border Grid.Row="1" Background="{StaticResource GridMutedBlueBrush}" Padding="4,2">
                                                            <TextBlock Text="{Binding Name}" FontSize="9"
                                                                       Foreground="{StaticResource TextLightBrush}"
                                                                       TextTrimming="CharacterEllipsis"
                                                                       ToolTip="{Binding Name}"/>
                                                        </Border>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>

                                <!-- Empty state -->
                                <TextBlock x:Name="TxtThumbnailsEmpty"
                                           Text="Select a folder to view its contents"
                                           Foreground="{StaticResource TextMutedBrush}" FontSize="13"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
            </Grid>
        </ContentControl>

        <!-- Enhancements Tab (Skill Tree) -->
        <ContentControl x:Name="EnhancementsTab" Grid.Row="4" Margin="10,5,10,10" Visibility="Collapsed" Template="{StaticResource AnimatedTabBackground}">
            <Grid>
                <!-- Hidden container for named elements (used programmatically) -->
                <StackPanel Visibility="Collapsed">
                    <TextBlock x:Name="TxtSkillPoints" Text="0"/>
                    <TextBlock x:Name="TxtXpMultiplier" Text="1.00x"/>
                    <TextBlock x:Name="TxtPinkRushIndicator" Text="  RUSH!"/>
                    <TextBlock x:Name="TxtConditioningTime" Text="0h 0m"/>
                    <WrapPanel x:Name="ActiveBonusesList"/>
                    <Border x:Name="ActiveBonusesPanel"/>
                </StackPanel>

                <Border x:Name="SkillTreeOuterBorder" Background="{StaticResource GridDarkestBgBrush}" CornerRadius="12" Padding="5" Margin="20,5,20,20">
                    <ScrollViewer x:Name="SkillTreeScroller"
                             Style="{StaticResource SkillTreeScrollViewerStyle}"
                             HorizontalScrollBarVisibility="Visible"
                             VerticalScrollBarVisibility="Disabled"
                             PreviewMouseWheel="SkillTreeScroller_PreviewMouseWheel">
                        <Canvas x:Name="SkillTreeCanvas" Width="2400" Height="460" HorizontalAlignment="Left">
                            <!-- Header and skill nodes will be drawn programmatically -->
                        </Canvas>
                    </ScrollViewer>
                </Border>

                <!-- Login Required Overlay -->
                <Border x:Name="EnhancementsLoginOverlay" Background="{StaticResource GridDarkestBgBrush}" CornerRadius="12" Visibility="Collapsed">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="40">
                        <TextBlock Text="" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,15"/>
                        <TextBlock Text="Login Required" Foreground="{StaticResource PinkBrush}" FontSize="22" FontWeight="Bold"
                                   HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <TextBlock Text="Log in with Discord or Patreon to access Enhancements!"
                                   Foreground="{StaticResource MutedPurplePinkBrush}" FontSize="14" HorizontalAlignment="Center"
                                   TextAlignment="Center" TextWrapping="Wrap" MaxWidth="350"/>
                    </StackPanel>
                </Border>
            </Grid>
        </ContentControl>

        <!-- Global Bottom Bar: Start / Save / Exit (Always visible) -->
        <Border Grid.Row="5" Background="{StaticResource PanelBgBrush}" Margin="10,5,10,10" CornerRadius="10" Padding="15,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Status Text (overlaid on top of buttons, shown when running) -->
                <TextBlock x:Name="TxtPresetsStatus" Grid.ColumnSpan="2"
                           Text="" Foreground="{StaticResource TextMutedBrush}" FontSize="11"
                           HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,-20,0,0"/>

                <!-- START Button (with session timer display) -->
                <Grid Grid.Column="0" Margin="0,0,8,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="BtnStart" Grid.Column="0" Style="{StaticResource PinkButton}"
                            Height="50" FontSize="18" Click="BtnStart_Click"
                            ToolTip="Start/Stop the conditioning engine">
                        <StackPanel x:Name="StartButtonContent" Orientation="Horizontal" Height="24" VerticalAlignment="Center">
                            <TextBlock x:Name="TxtStartIcon" Text="" FontSize="16" Width="20" Margin="0,0,10,0" VerticalAlignment="Center" TextAlignment="Center"/>
                            <TextBlock x:Name="TxtStartLabel" Text="START" FontSize="18" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <!-- Pause Button (visible only during sessions) -->
                    <Button x:Name="BtnPauseSession" Grid.Column="1" Width="50" Height="50" Margin="5,0,0,0"
                            Visibility="Collapsed" Click="BtnPauseSession_Click"
                            ToolTip="Pause session (-100 XP penalty per pause)">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{StaticResource OrangeAccentBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FontSize" Value="20"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                        <TextBlock x:Name="TxtPauseIcon" Text="?" FontSize="20"/>
                    </Button>
                </Grid>
                
                <!-- Save / Exit (other half) -->
                <Grid Grid.Column="1" Margin="8,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" Content=" Save" Style="{StaticResource PinkButton}" 
                            Height="50" FontSize="16" Margin="0,0,5,0" Click="BtnSave_Click"
                            ToolTip="Save all settings to disk"/>
                    <Button Grid.Column="1" Content=" Exit" Height="50" FontSize="16" Margin="5,0,0,0" Click="BtnExit_Click"
                            ToolTip="Exit the application completely">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="{StaticResource WarningBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="20,10">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Grid>
        </Border>

        <!--TO-DO: Change to brushes -->
        <!-- Remote Control Overlay (shown when controller is connected) -->
        <Border x:Name="RemoteControlOverlay" Grid.RowSpan="6" Panel.ZIndex="999" Visibility="Collapsed" Background="{StaticResource OverlayBlackTransparentBrush}" Opacity="0">
            <Grid>
                <!-- Command notification banner at top -->
                <Border x:Name="RemoteCommandNotification" VerticalAlignment="Top" HorizontalAlignment="Center"
                        Background="{StaticResource RemoteControlRemoteCommandNotificationBorderBrush}" CornerRadius="0,0,10,10" Padding="24,10" Margin="0,0,0,0" Opacity="0">
                    <TextBlock x:Name="TxtRemoteCommand" Text="" Foreground="{StaticResource TxtRemoteCommandBrush}" FontSize="16" FontWeight="SemiBold"
                               HorizontalAlignment="Center"/>
                </Border>

                <!-- Center content -->
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="" FontSize="56" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <TextBlock Text="REMOTE CONTROLLED" Foreground="{StaticResource TxtRemoteCommandBrush}" FontSize="28" FontWeight="Bold"
                               HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock x:Name="TxtOverlaySessionCode" Text="" Foreground="{StaticResource RemoteControlTextBrush}" FontSize="18"
                               FontFamily="Consolas" HorizontalAlignment="Center" Margin="0,0,0,30"/>
                    <TextBlock Text="Someone else is controlling your app" Foreground="{StaticResource TxtRemoteCommandSecondaryBrush}" FontSize="14"
                               HorizontalAlignment="Center" Margin="0,0,0,40"/>

                    <!-- End Session button -->
                    <Button Content="End Session" Click="BtnEndRemoteSession_Click" Cursor="Hand"
                            Foreground="{StaticResource BtnRemoteCommandEndSessionTextBrush}" FontSize="15" FontWeight="SemiBold" Padding="32,12"
                            HorizontalAlignment="Center">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="BtnBorder" Background="{StaticResource BtnRemoteCommandEndSessionBorderBrush}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="BtnBorder" Property="Background" Value="{StaticResource BtnRemoteCommandEndSessionBorderHoverBrush}"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="BtnBorder" Property="Background" Value="{StaticResource BtnRemoteCommandEndSessionBorderPressBrush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Global Drop Overlay (shown when dragging files anywhere) -->
        <Border x:Name="GlobalDropOverlay" Grid.RowSpan="5" Visibility="Collapsed" Background="{StaticResource GlobalDropOverlayBackgroundBrush}" IsHitTestVisible="False">
            <Border Background="{StaticResource DeepBlueBrush}" CornerRadius="16" BorderBrush="{StaticResource PinkBrush}" BorderThickness="3"
                    MaxWidth="450" MaxHeight="220" VerticalAlignment="Center" HorizontalAlignment="Center"
                    Padding="40,30">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="DropOverlayIcon" Text="" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="DropOverlayTitle" Text="Drop to Import" Foreground="{StaticResource PinkBrush}" FontSize="20" FontWeight="Bold"
                               HorizontalAlignment="Center" Margin="0,15,0,5"/>
                    <TextBlock x:Name="DropOverlaySubtitle" Text="Images, Videos, ZIPs, Folders" Foreground="{StaticResource TextMutedBrush}" FontSize="14"
                               HorizontalAlignment="Center" TextWrapping="Wrap" TextAlignment="Center"/>
                </StackPanel>
            </Border>
        </Border>

        <!-- Main App Tutorial Overlay -->
        <Border x:Name="MainTutorialOverlay" Grid.RowSpan="5" Panel.ZIndex="1000" Visibility="Collapsed" Background="{StaticResource MainTutorialOverlayBackgroundBrush}">
            <Grid>
                <Border Background="Transparent" MouseLeftButtonDown="MainTutorial_Close"/>
                <Border Background="{StaticResource AchievementTileBackgroundBrush}" CornerRadius="12" BorderBrush="{StaticResource PinkBrush}" BorderThickness="2"
                        MaxWidth="700" MaxHeight="600" VerticalAlignment="Center" HorizontalAlignment="Center"
                        Margin="40" MouseLeftButtonDown="MainTutorial_ContentClick">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Border Grid.Row="0" Background="{StaticResource DeepPanelBrush}" CornerRadius="10,10,0,0" Padding="20,15">
                            <Grid>
                                <TextBlock Text=" How to Use the App" Foreground="{StaticResource PinkBrush}" FontSize="18" FontWeight="Bold"
                                           HorizontalAlignment="Center"/>
                                <Button Content="?" Click="MainTutorial_Close" HorizontalAlignment="Right" VerticalAlignment="Top"
                                        Background="Transparent" Foreground="{StaticResource TextSecondaryBrush}" FontSize="14" BorderThickness="0" Cursor="Hand"
                                        Margin="0,-5,-5,0"/>
                            </Grid>
                        </Border>

                        <!-- Tutorial Content -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20,15">
                            <StackPanel>
                                <!-- Quick Tip -->
                                <Border Background="{StaticResource GridDeepPurpleBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,15" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Hover over any control for tooltips! Click a guide below to start an interactive tutorial."
                                                   Foreground="{StaticResource MutedPurplePinkBrush}" FontSize="12" TextWrapping="Wrap" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Getting Started -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Getting Started" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Quick overview of the basics - START button, adding content, essential tips" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialGettingStarted_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Settings Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Settings Tab" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Flash images, videos, subliminals, overlays, audio, and all effect settings" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialSettings_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Presets Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Presets &amp; Sessions" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Save configurations, run timed sessions, create custom sessions with the editor" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialPresets_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Progression Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Progression" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="XP system, level unlocks, scheduler, and intensity ramp settings" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialProgression_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Achievements Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Achievements" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Unlock achievements by reaching milestones and using features" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialAchievements_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Companion Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Companion Settings" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Speech bubbles, trigger messages, and AI personality configuration" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialCompanion_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Patreon Tab -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Patreon Exclusives" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="AI chat, window awareness, slut mode, and premium features" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialPatreon_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Avatar -->
                                <Border Background="{StaticResource DeepPanelBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="Avatar Companion" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold"/>
                                            <TextBlock Text="Interacting, detaching, resizing, evolution stages, and animations" Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap"/>
                                        </StackPanel>
                                        <Button Grid.Column="2" Content="Start Guide" Click="BtnTutorialAvatar_Click"
                                                Style="{StaticResource SmallPinkButton}" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>

                                <!-- Pro Tips -->
                                <Border Background="{StaticResource ComboBoxBackgroundBrush}" CornerRadius="8" Padding="12" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text=" Pro Tips" Foreground="{StaticResource PinkBrush}" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                        <TextBlock Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap">
                                            <Run Text=""/><Run Text=" assets/images" FontWeight="SemiBold"/><Run Text=" - Add your flash images here"/>
                                        </TextBlock>
                                        <TextBlock Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text=""/><Run Text=" assets/videos" FontWeight="SemiBold"/><Run Text=" - Add your videos here"/>
                                        </TextBlock>
                                        <TextBlock Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text=" Use Borderless Windowed mode in games for best results"/>
                                        </TextBlock>
                                        <TextBlock Foreground="{StaticResource TextMutedBrush}" FontSize="11" TextWrapping="Wrap" Margin="0,2,0,0">
                                            <Run Text=" Right-click on features for additional options"/>
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Footer -->
                        <Border Grid.Row="2" Background="{StaticResource DeepPanelBrush}" CornerRadius="0,0,10,10" Padding="20,15">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="Start Interactive Tutorial" Click="BtnStartTutorial_Click" Margin="0,0,15,0"
                                        Background="Transparent" Foreground="{StaticResource PinkBrush}" BorderBrush="{StaticResource PinkBrush}" BorderThickness="1"
                                        Padding="20,10" FontWeight="SemiBold" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="6" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="{StaticResource HelpButtonHoverBackgroundBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Content="Got it!" Style="{StaticResource PinkButton}"
                                        Click="MainTutorial_Close" Padding="40,10"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Border>
        </Grid>
    </Viewbox>
</Window>
